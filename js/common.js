function setCookie(e,t){document.cookie=e+"="+(t||"")+";expires=expires=Fri, 31 Dec 9999 23:59:59 UTC;path=/"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function eraseCookie(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function storeForm(){var e=document.getElementById("comment-parent"),t=document.getElementById("commento-textarea-root"),o=document.getElementById("commento-anonymous-checkbox-root"),n=e.value,i=t.value,r=o.value;setCookie("comment-parent",n),setCookie("comment",i),setCookie("getemail",r)}function updateForm(){var e,t=document.getElementById("comment-parent"),o=document.getElementById("commento-textarea-root"),n=document.getElementById("commento-anonymous-checkbox-root"),i=getCookie("comment-parent"),r=getCookie("comment"),m=getCookie("getemail");return r?(t.value=i,o.value=r,n.value=m,e=!0):e=!1,eraseCookie("comment-parent"),eraseCookie("comment"),eraseCookie("getemail"),e}function getCode(){var e;if(URLSearchParams){e=new URLSearchParams(window.location.search).get("code")}else{e=function(){var e={},t=(window.location.search.split("?")[1]||"").split("&");for(var o in t)if(t.hasOwnProperty(o)){var n=t[o].split("=");e[n[0]]=decodeURIComponent(n[1]||"")}return e}().code}return e}function submitComment(e){var t=getCode(),o=document.getElementById("commento-textarea-root"),n=document.getElementById("commento-submit-button-root");if(o.style.disabled=!0,n.style.disabled=!0,t)e.currentTarget.submit();else{e.preventDefault(),storeForm();var i=window.location.href;window.location.href="https://github.com/login/oauth/authorize?scope=user:email&client_id=bc27cd2859301269f316&redirect_uri="+i}}function submitFormWithCode(){var e=getCode();if(e){document.getElementById("cover-spin").style.display="block";if(!updateForm())return window.location.href="#comment-error",null;var t=document.getElementById("comment-form");t.action="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/custom/ruddra/ruddra.comments/master/comments/"+e,t.submit()}}function toggleMarkDownTable(){var e=document.getElementById("commento-markdown-help-root");"none"===e.style.display?e.style.display="block":e.style.display="none"}function increaseLikeCounter(){var e=document.getElementById("like-count"),t=parseInt(e.innerText,10);if(isNaN(t))setTimeout(function(){increaseLikeCounter()},0);else{t++,e.innerText=t;var o=document.getElementById("loved-count");o.style.color="#2c4fff",o.style.textShadow="-0.02ex 0 #222,0.02ex 0 #222"}}function loveArticle(){1!=alreadyLiked()&&(storeLiked(),makePink(),submitLike())}function alreadyLiked(){return isNaN(getCookie("liked-"+getSlug()))}function getSlug(){return window.location.pathname.split("/").reverse()[1]}function createCORSRequest(e,t){var o=new XMLHttpRequest;return"withCredentials"in o?o.open(e,t,!0):"undefined"!=typeof XDomainRequest?(o=new XDomainRequest,o.open(e,t)):o=null,o}function makeHttpRequest(e){var t=getSlug(),o={"options[parent]":t,"options[slug]":t,"options[origin]":"https://ruddra.com/likes","fields[email]":window.location.href},n=[];Object.keys(o).forEach(function(e){var t=e+"="+o[e];n.push(t)});var i=createCORSRequest("POST","https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/github/ruddra/ruddra.likes/master/comments/");i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.setRequestHeader("Access-Control-Allow-Origin","*"),i.onload=function(){200===this.status?(increaseLikeCounter(),makeRed()):e>0&&setTimeout(function(){makeHttpRequest(e--)},1e3)},i.onerror=function(){setTimeout(function(){makeHttpRequest(e--)},1e3)},i.send(n.join("&"))}function submitLike(){makeHttpRequest(5)}function storeLiked(){setCookie("liked-"+getSlug(),"liked")}function makeRed(){document.getElementById("love-share-sign").style.fill="#ff0000"}function makePink(){document.getElementById("love-share-sign").style.fill="#ff8fc7"}function showLiked(){1==alreadyLiked()&&(makeRed(),increaseLikeCounter())}if("#comment-submitted"==window.location.hash){var $comTarget=document.getElementById("comment-submitted-box");$comTarget.style.display="block"}else if("#comment-error"==window.location.hash){var $comTarget=document.getElementById("comment-error");$comTarget.style.display="block"}submitFormWithCode(),showLiked();var listener_=document.getElementById("love-share"),listener_mb=document.getElementById("love-share-mb");listener_&&listener_.addEventListener("click",loveArticle),listener_mb&&listener_mb.addEventListener("click",loveArticle);