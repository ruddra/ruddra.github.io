<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=yandex-verification content="3ccce49727df78e2"><title>Django 1.7 and Scrapy</title><meta name=description content="Today I am going to share how to use Scrapy and Django together to crawl to a website and store scraped data to Database using Django."><link rel=preload href=/fonts/pt-serif-400-i-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-i-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-i-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-i-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-i-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-i-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-i-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-latin.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-i-latin.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-i-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-i-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-i-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-i-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-i-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-i-latin.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-i-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-i-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-cyrillic.woff2 as=font><link rel=stylesheet href=https://ruddra.com/css/bundle.min.edb2f8b848301ddcf0f903d1c4ff2e4a344daa2e9b9175600473110673e4f2da.css integrity="sha256-7bL4uEgwHdzw+QPRxP8uSjRNqi6bkXVgBHMRBnPk8to=" async><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon.png><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/rss+xml title=RSS href=/sitemap.xml><meta name=generator content="Hugo 0.64.0"><meta name=twitter:card content="summary_large_image"><meta name=robots content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="Ruddra.com | Blog by Arnab Kumar Shil"><meta property="article:publisher" content="https://ruddra.com"><meta property="article:section" content="Bulletin"><meta property="article:published_time" content="2016-01-03T00:00:00.00Z"><meta property="article:modified_time" content="2020-04-05T00:00:00.00Z"><meta property="og:updated_time" content="2020-04-05T00:00:00.00Z"><meta property="og:image" content="https://ruddra.com/content/images/2020/03/scrapy.jpg"><meta property="og:image:secure_url" content="https://ruddra.com/content/images/2020/03/scrapy.jpg"><meta property="og:image:width" content="720"><meta property="og:image:height" content="350"><meta name=twitter:title content="Django 1.7 and Scrapy"><meta name=twitter:description content="Today I am going to share how to use Scrapy and Django together to crawl to a website and store scraped data to Database using Django."><meta property="og:type" content="article"><meta property="og:title" content="Django 1.7 and Scrapy"><meta property="og:description" content="Today I am going to share how to use Scrapy and Django together to crawl to a website and store scraped data to Database using Django."><meta name=twitter:image content="https://ruddra.com/content/images/2020/03/scrapy.jpg"><meta property="og:image" content="https://ruddra.com/content/images/2020/03/scrapy.jpg"><meta property="article:tag" content="scrapy"><meta property="article:tag" content="django"><meta property="article:tag" content="ruddra"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","mainEntityOfPage":"https:\/\/ruddra.com\/posts\/django-1-7-scrapy\/","identifier":"https:\/\/ruddra.com\/posts\/django-1-7-scrapy\/","author":{"@type":"Person","name":"Arnab Kumar Shil","url":"https:\/\/ruddra.com/info/about/"},"logo":"https:\/\/ruddra.com\/favicon-32x32.png","name":"Django 1.7 and Scrapy","headline":"Django 1.7 and Scrapy","description":"Today I am going to share how to use Scrapy and Django together to crawl to a website and store scraped data to Database using Django.","inLanguage":"en-US","creator":["Arnab Kumar Shil"],"accountablePerson":"Arnab Kumar Shil","copyrightHolder":"Arnab Kumar Shil","copyrightYear":"2016","dateCreated":"2016-01-03T00:00:00.00Z","datePublished":"2016-01-03T00:00:00.00Z","dateModified":"2020-04-05T00:00:00.00Z","url":"https:\/\/ruddra.com\/posts\/django-1-7-scrapy\/","wordCount":"502","publisher":{"@type":"Organization","name":"Ruddra.com | Blog by Arnab Kumar Shil","url":"https:\/\/ruddra.com","logo":"https:\/\/ruddra.com\/avatar.png"},"image":["https:\/\/ruddra.com\/content\/images\/2020\/03\/scrapy.jpg"],"keywords":["Tag:Scrapy","Tag:Django","Elevated:true","Tag:Blog"]}</script></head><body><input type=checkbox class=sidebar-checkbox id=sidebar-checkbox><div class=sidebar id=sidebar><div class=sidebar-item><img src=/avatar.jpg><p>Hi! I am Arnab, a full stack developer specializing in <b><a href=/tags/python/>Python</a></b>,
<b><a href=/tags/django/>Django</a></b>, <b><a href=/tags/docker/>Docker</a></b>, <b><a href=/tags/reactjs/>React</a></b>, <b><a href=/tags/openshift/>OpenShift</a></b>.</p><p class=sidebar-icons><a class=icon-side-bar href=https://stackoverflow.com/users/2696165/ruddra target=_blank rel="noopener me" title=stackoverflow><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="10 10 100 100" fill="currentcolor" class="feather"><path d="M84.4 93.8V70.6h7.7v30.9H22.6V70.6h7.7v23.2z"/><path d="M38.8 68.4l37.8 7.9 1.6-7.6-37.8-7.9-1.6 7.6zm5-18 35 16.3 3.2-7-35-16.4-3.2 7.1zm9.7-17.2 29.7 24.7 4.9-5.9-29.7-24.7-4.9 5.9zm19.2-18.3-6.2 4.6 23 31 6.2-4.6-23-31zM38 86h38.6v-7.7H38V86z"/></svg></a><a class=icon-side-bar href=https://github.com/ruddra target=_blank rel="noopener me" title=github><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a class=icon-side-bar href=https://www.linkedin.com/in/ruddraarnab target=_blank rel="noopener me" title=linkedin><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a class=icon-side-bar href=https://medium.com/@ruddra target=_blank rel="noopener me" title=medium><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/><g class="currentLayer"><title>Layer 1</title><path d="M2.846 6.887c.03-.295-.083-.586-.303-.784l-2.24-2.7v-.403h6.958l5.378 11.795 4.728-11.795h6.633v.403l-1.916 1.837c-.165.126-.247.333-.213.538v13.498c-.034.204.048.411.213.537l1.871 1.837v.403h-9.412v-.403l1.939-1.882c.19-.19.19-.246.19-.537v-10.91l-5.389 13.688h-.728l-6.275-13.688v9.174c-.052.385.076.774.347 1.052l2.521 3.058v.404h-7.148v-.404l2.521-3.058c.27-.279.39-.67.325-1.052v-10.608z" id="svg_1" class="selected" opacity="1" fill="#fff" fill-opacity="1"/></g></svg></a><a class=icon-side-bar href=/posts/index.xml target=_blank rel="noopener me" title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></div><nav class=sidebar-nav><a class=sidebar-nav-item href=/>Home</a>
<a class=sidebar-nav-item href=/info/about/>About
Me</a>
<a class=sidebar-nav-item href=/info/privacy/>Privacy Policy</a><form class="sidebar-nav-item search-form" method=get action=/search><input type=text class=tftextinput name=q size=21 maxlength=120><button type=submit class=tfbutton><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="rgb(155,155,155)"><path d="M9.145 18.29c-5.042.0-9.145-4.102-9.145-9.145S4.103.0 9.145.0s9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321.0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"/></svg></button></form></nav><div class=sidebar-item><p>&copy; 2020. All rights reserved.</p></div></div><div class=wrap><div class=masthead><div class=container><h3 class=masthead-title><a href=/ title=Home style=color:#cfcdcd>Ruddra</a><small style=color:#838383;font-size:1.25rem>.com</small></h3><form class="masthead-search-form pull-right" method=get action=/search><input type=text class=tftextinput name=q size=21 maxlength=120><button type=submit class=tfbutton><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="rgb(155,155,155)"><path d="M9.145 18.29c-5.042.0-9.145-4.102-9.145-9.145S4.103.0 9.145.0s9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321.0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"/></svg></button></form></div></div><div class="container content"><div class=post><h1 class=post-title>Django 1.7 and Scrapy</h1><span class=post-date>Jan 3, 2016 &#183; 3 min read &#183;
6 comments</span><div class=img-container><img class=img-center src=https://ruddra.com/content/images/2020/03/scrapy.jpg alt="Django 1.7 and Scrapy"></div><div class=photo-credit>Photo by <a href=https://unsplash.com/@kylejglenn>Kyle Glenn</a> on <a href=https://unsplash.com>Unsplash</a></div><blockquote><p>This post is deprecated. Use it at your own risk.</p></blockquote><p>Today I am going to share how to use <a href=scrapy.org>Scrapy</a> and <a href=https://www.djangoproject.com/>Django</a> together to crawl to a website and store scraped data to Database using Django.<div class=toc><h2 class=toc>Table of contents</h2><nav id=TableOfContents><ul><li><a href=#project-setup>Project setup</a><ul><li><a href=#django>Django</a></li><li><a href=#scrapy>Scrapy</a></li></ul></li><li><a href=#screenshots>Screenshots</a></li></ul></nav></div><div></p><h2 id=project-setup>Project setup<a href=#project-setup class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><h3 id=django>Django<a href=#django class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>First, let us build a Django application using the following commands.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>pip install <span class=nv>django</span><span class=o>=</span><span class=o>=</span>1.7
django-admin.py startproject example_project
<span class=nb>cd</span> example_project
</code></pre></div><p>Inside the <code>example_project</code> directory, we will create a django app named <code>app</code>:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>python manage.py startapp app
</code></pre></div><p>Then, we will update the <code>models.py</code> like this:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>

<span class=k>class</span> <span class=nc>ExampleDotCom</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>)</span><span class=p>:</span>
    <span class=n>title</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>)</span>
    <span class=n>description</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>title</span>
</code></pre></div><p>Now we shall update the <code>admin.py</code> inside the <code>app</code> directory:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
<span class=kn>from</span> <span class=nn>app.models</span> <span class=kn>import</span> <span class=n>ExampleDotCom</span>

<span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=n>ExampleDotCom</span><span class=p>)</span>
</code></pre></div><p>Update <code>INSTALLED_APPS</code> of <code>settings.py</code> like:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>INSTALLED_APPS</span> <span class=o>+</span><span class=o>=</span> <span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>app</span><span class=s1>&#39;</span><span class=p>,</span><span class=p>)</span>
</code></pre></div><p>Now, we will run the following commands in project directory:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
</code></pre></div><p>The last command will prompt to create a super user for the application. Now we will run the following command:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>python manage.py runserver
</code></pre></div><p>It will start the django application.</p><p>Django part is complete for now. Lets start the <strong>scrapy</strong> project.</p><h3 id=scrapy>Scrapy<a href=#scrapy class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>In separate directory, we will create a scrapy project using the following commands:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>pip install <span class=nv>Scrapy</span><span class=o>=</span><span class=o>=</span>1.0.3
scrapy startproject example_bot
</code></pre></div><p>To use with Django application from scrapy application, we shall update its <code>settings.py</code> inside <code>example_bot</code> project directory:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>os</span>
<span class=kn>import</span> <span class=nn>sys</span>

<span class=n>DJANGO_PROJECT_PATH</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>YOUR/PATH/TO/DJANGO/PROJECT</span><span class=s1>&#39;</span>
<span class=n>DJANGO_SETTINGS_MODULE</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>example_project.settings</span><span class=s1>&#39;</span>

<span class=n>sys</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>DJANGO_PROJECT_PATH</span><span class=p>)</span>
<span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>DJANGO_SETTINGS_MODULE</span><span class=s1>&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>DJANGO_SETTINGS_MODULE</span>
<span class=n>BOT_NAME</span> <span class=o>=</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>example_bot</span><span class=s1>&#39;</span>

<span class=n>SPIDER_MODULES</span> <span class=o>=</span> <span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>example_bot.spiders</span><span class=s1>&#39;</span><span class=p>]</span>
</code></pre></div><p>To connect with django model, we need to install <a href=http://doc.scrapy.org/en/0.24/topics/djangoitem.html>DjangoItem</a> like this:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>pip install scrapy-djangoitem<span class=o>=</span><span class=o>=</span>1.0.0
</code></pre></div><p>Inside <code>example_bot</code> directory, we will update the <code>items.py</code> file like this:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>scrapy_djangoitem</span> <span class=kn>import</span> <span class=n>DjangoItem</span>
<span class=kn>from</span> <span class=nn>app.models</span> <span class=kn>import</span> <span class=n>ExampleDotCom</span>

<span class=k>class</span> <span class=nc>ExampleDotComItem</span><span class=p>(</span><span class=n>DjangoItem</span><span class=p>)</span><span class=p>:</span>
    <span class=n>django_model</span> <span class=o>=</span> <span class=n>ExampleDotCom</span>
</code></pre></div><p>Now we will create a crawl spider named <code>example.py</code> inside <code>spiders</code> directory:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>scrapy.spiders</span> <span class=kn>import</span> <span class=n>BaseSpider</span>
<span class=kn>from</span> <span class=nn>example_bot.items</span> <span class=kn>import</span> <span class=n>ExampleDotComItem</span>

<span class=k>class</span> <span class=nc>ExampleSpider</span><span class=p>(</span><span class=n>BaseSpider</span><span class=p>)</span><span class=p>:</span>
    <span class=n>name</span> <span class=o>=</span> <span class=sa></span><span class=s2>&#34;</span><span class=s2>example</span><span class=s2>&#34;</span>
    <span class=n>allowed_domains</span> <span class=o>=</span> <span class=p>[</span><span class=sa></span><span class=s2>&#34;</span><span class=s2>example.com</span><span class=s2>&#34;</span><span class=p>]</span>
    <span class=n>start_urls</span> <span class=o>=</span> <span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>http://www.example.com/</span><span class=s1>&#39;</span><span class=p>]</span>

    <span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>response</span><span class=p>)</span><span class=p>:</span>
            <span class=n>title</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>//title/text()</span><span class=s1>&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>extract</span><span class=p>(</span><span class=p>)</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
            <span class=n>description</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>xpath</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>//body/div/p/text()</span><span class=s1>&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>extract</span><span class=p>(</span><span class=p>)</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
            <span class=k>return</span> <span class=n>ExampleDotComItem</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=n>title</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=n>description</span><span class=p>)</span>
</code></pre></div><p>Now we shall create an pipeline class like this inside <code>pipelines.py</code>:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>ExPipeline</span><span class=p>(</span><span class=nb>object</span><span class=p>)</span><span class=p>:</span>
    <span class=k>def</span> <span class=nf>process_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>,</span> <span class=n>spider</span><span class=p>)</span><span class=p>:</span>
        <span class=n>item</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>item</span>
</code></pre></div><p>Now we need to update the <code>settings.py</code> with this:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>ITEM_PIPELINES</span> <span class=o>=</span> <span class=p>{</span>
    <span class=sa></span><span class=s1>&#39;</span><span class=s1>example_bot.pipelines.ExPipeline</span><span class=s1>&#39;</span><span class=p>:</span> <span class=mi>1000</span><span class=p>,</span>
<span class=p>}</span>
</code></pre></div><p>Project structure will be like this:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>├── django1.7+scrapy
│   ├── example_bot
│   │   ├── __init__.py
│   │   ├── items.py
│   │   ├── pipelines.py
│   │   ├── settings.py
│   │   └── spiders
│   │       ├── __init__.py
│   │       └── example.py
│   └── scrapy.cfg
└── example_project
    ├── manage.py
    ├── app
    │   ├── __init__.py
    │   ├── models.py
    │   ├── admin.py
    │   └── views.py
    └── example_project
        ├── __init__.py
        ├── settings.py
        └── urls.py
</code></pre></div><p>Now we shall run the application using the following command:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>scrapy crawl example
</code></pre></div><p>Now let us return to the running django application. If everything above is done correctly, then we shall see an object of ExampleDotCom class has been created like the below screenshot in this url <code>http://localhost:8000/admin/app/exampledotcom/</code>:</p><h2 id=screenshots>Screenshots<a href=#screenshots class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p><img src=/content/git/scrap_django1.jpg alt="scrap django 1"></p><p><img src=/content/git/scrapy_django2.jpg alt="scrap django 2"></p><p>Thats all. Up and running django 1.7 + Scrapy project.</p><p><strong>Drawbacks:</strong> Only implemented using django 1.7</p><p><strong>Source:</strong> <a href=https://github.com/ruddra/django1.7-scrapy1.0.3>https://github.com/ruddra/django1.7-scrapy1.0.3</a></p><p>Got help and clues from this <a href=http://stackoverflow.com/questions/19068308/access-django-models-with-scrapy-defining-path-to-django-project>SO</a> link.</p></div><br><p><a class=tag-class href=/tags/scrapy>Scrapy</a> <a class=tag-class href=/tags/django>Django</a></p><div class=newsletter-section><h2>Get Better With Scrapy</h2><div id=commento class="commento-root commento-root-font"><div id=newsletter-error class=commento-error-box style=display:none>An error occurred when submitting the form, please try again.</div><div id=newsletter-submitted style=display:none><b>Thank you for your subscription to newsletters.<br>You will start recieving emails from next iteration.</b><br><br></div><div id=newsletter-body><div>Subscribe to get monthly articles about Scrapy and more.<br>We won't spam you. Unsubscribe at any time.</div><br><div id=commento-main-area class=commento-main-area><form id=comment-form method=post action=https://ruddra-comments.herokuapp.com/v2/entry/ruddra/ruddra.comments/master/comments><input type=hidden name=options[redirect] value=https://ruddra.com/posts/django-1-7-scrapy/#newsletter-submitted>
<input type=hidden name=options[slug] value=newsletter-subscription>
<input type=hidden name=options[parent] value=newsletter-subscription>
<input type=hidden name=options[origin] value=https://ruddra.com/newsletters/>
<input type=hidden name=options[redirectError] value=https://ruddra.com/posts/django-1-7-scrapy/#newsletter-error><div id=commento-login class=commento-login><input type=email name=fields[email] placeholder="Your email address" style="padding-left:10px;width:90%;line-height:2;border:1px solid rgba(50,50,93,.1)" required></div><div style=width:95.8%><button id=commento-submit-button-root type=submit class="commento-button commento-submit-button">Subscribe</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id=commento-checkbox-root name=options[subscribe] type=checkbox value=email required><label for=commento-checkbox-root>I agree to receive
emails</label></div></div></form></div></div></div></div><script>if(window.location.hash=="#newsletter-submitted"){var $comTarget=document.getElementById('newsletter-submitted');$comTarget.style.display='block';var $comTarget=document.getElementById('newsletter-body');$comTarget.style.display='none';}else if(window.location.hash=="#newsletter-error"){var $comTarget=document.getElementById('newsletter-error');$comTarget.style.display='block';}</script><div class=pagination><div class="pagination-item older"><span class=pagination-arrow>&#8592; Previous</span><div class=pagination-link><a href=https://ruddra.com/posts/make-a-blog-using-django-part-2/>Make a Blog using Django Part 2</a></div><div class=pagination-image><img src=https://ruddra.com/content/images/2020/03/blog.jpg alt="Make a Blog using Django Part 2"></div><p class=pagination-text>This post is now deprecated. Please follow the official tutorial for creating your first django application.
From …</p></div><div class="pagination-item newer"><span class=pagination-arrow>Next &#8594;</span><div class=pagination-link><a href=https://ruddra.com/posts/make-csv-file-using-mysql-and-python/>Make .CSV file using MySQL and Python</a></div><div class=pagination-image><img src=https://ruddra.com/content/images/2020/03/csv.jpg alt="Make .CSV file using MySQL and Python"></div><p class=pagination-text>In this blog, I am going to show how to develop an application by which we can make .csv files from MySQL database using …</p></div></div><div class=tiny><div id=commento class="commento-root commento-root-font"><div id=comment-submitted style=display:none><h3><i>Thank you for your comment. It will be published once approved.</i></h3><br></div><div id=comment-error class=commento-error-box style=display:none>An error occurred when submitting the form, please try again.</div><div id=commento-mod-tools class=commento-mod-tools style=display:none><button id=commento-mod-tools-lock-button>Lock Thread</button></div><div id=commento-main-area class=commento-main-area><form id=comment-form method=post action=https://ruddra-comments.herokuapp.com/v2/entry/ruddra/ruddra.comments/master/comments><input type=hidden name=options[redirect] value=https://ruddra.com/posts/django-1-7-scrapy/#comment-submitted>
<input type=hidden name=options[slug] value=django-1-7-scrapy>
<input type=hidden name=options[parent] value=django-1-7-scrapy>
<input type=hidden name=options[origin] value=https://ruddra.com/posts/django-1-7-scrapy/>
<input type=hidden id=comment-parent name=fields[reply_to]>
<input type=hidden name=options[redirectError] value=https://ruddra.com/posts/django-1-7-scrapy/#comment-error><div id=commento-logged-container class=commento-logged-container><div class=commento-name id=comment-headline><b>Share Your Thoughts</b></div></div><div class=commento-logout></div></div><div id=commento-login class=commento-login><input type=txt name=fields[name] placeholder=Name style="padding-left:10px;width:100%;line-height:2;border:1px solid rgba(50,50,93,.1);margin-bottom:5px;border-radius:2px" required>
<input type=email name=fields[email] placeholder="Email(will not be shared publicly)" style="padding-left:10px;width:100%;line-height:2;border:1px solid rgba(50,50,93,.1);border-radius:2px" required></div><div id=commento-textarea-super-container-root class=commento-button-margin><div id=commento-textarea-container-root class=commento-textarea-container><textarea name=fields[comment] id=commento-textarea-root placeholder="Add a comment" onchange=renderCommentInMD(this.value) onkeyup=this.onchange(); onpaste=this.onchange(); oninput=this.onchange(); required></textarea></div><button id=commento-submit-button-root type=submit class="commento-button commento-submit-button">Add
Comment</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id=commento-anonymous-checkbox-root name=options[subscribe] type=checkbox value=email><label for=commento-anonymous-checkbox-root>Notify me of new comments</label></div><a id=commento-markdown-button-root class=commento-markdown-button><b>M ↓</b> &nbsp; Markdown</a></div><p id=commneto-renderer-msg></p></form><div id=commento-comments-area class=commento-comments><div id=commento-comment-card-1469178891 style="border-left:2px solid #5cc49b" class=commento-card><div class=commento-header><div id=commento-comment-options-1469178891 class=commento-options><button id=commento-comment-reply-1469178891 href=#comment-form onclick="changeValue('fields[reply_to]','1469178891','Dário Marcelino')" title="Reply to Dário Marcelino" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img src="https://www.gravatar.com/avatar/73f471882c8968fed658a608e05cc49b?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-1469178891 class=commento-name>Dário Marcelino</div><div id=commento-comment-subtitle-1469178891 class=commento-subtitle><div id=commento-comment-timeago-1469178891 title="Friday, Jul 22, 2016" class=commento-timeago>Friday, Jul 22, 2016</div></div></div><div id=commento-comment-contents-1469178891><div id=commento-comment-body-1469178891 class=commento-body><div id=commento-comment-text-1469178891><p>I&rsquo;m using Django 1.9 and I had to add <code>import django django.setup()</code> to scrappy settings.py for it run. Thanks</p></div></div></div><div></div><script>function changeValue(elementName,newValue,name){document.getElementsByName(elementName)[0].value=newValue;document.getElementById('comment-headline').innerHTML="<b>Reply To: "+name+"</b>";window.location.hash="#comment-form";};</script></div><div id=commento-comment-card-1504537769 style="border-left:2px solid #2d88c2" class=commento-card><div class=commento-header><div id=commento-comment-options-1504537769 class=commento-options><button id=commento-comment-reply-1504537769 href=#comment-form onclick="changeValue('fields[reply_to]','1504537769','Webshare.io')" title="Reply to Webshare.io" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img src="https://www.gravatar.com/avatar/55b07ee21aab8aaab913db6a292d88c2?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-1504537769 class=commento-name>Webshare.io</div><div id=commento-comment-subtitle-1504537769 class=commento-subtitle><div id=commento-comment-timeago-1504537769 title="Monday, Sep 4, 2017" class=commento-timeago>Monday, Sep 4, 2017</div></div></div><div id=commento-comment-contents-1504537769><div id=commento-comment-body-1504537769 class=commento-body><div id=commento-comment-text-1504537769><p>Just in case if you are get blocked, you can use a free proxy with thousands of IP addresses for Scrapy at <a href=https://proxy.webshare.io/>https://proxy.webshare.io/</a></p></div></div></div><div><div id=commento-comment-card-1524624992 style="border-left:2px solid #bfcb36" class=commento-card><div class=commento-header><div id=commento-comment-options-1524624992 class=commento-options><button id=commento-comment-reply-1524624992 title="Reply to Haris Jafri" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick="changeValue('fields[reply_to]','1504537769','Haris Jafri')"></button></div><img src="https://www.gravatar.com/avatar/1598e5fe3155fe46ec7b76130cbfcb36?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-1524624992 class=commento-name>Haris Jafri</div><div id=commento-comment-subtitle-1524624992 class=commento-subtitle><div id=commento-comment-timeago-1524624992 title="Wednesday, Apr 25, 2018" class=commento-timeago>Wednesday, Apr 25, 2018</div></div></div><div id=commento-comment-contents-1524624992><div id=commento-comment-body-1524624992 class=commento-body><div id=commento-comment-text-1524624992><p>where should i put it?</p></div></div></div></div><div id=commento-comment-card-1524625008 style="border-left:2px solid #bfcb36" class=commento-card><div class=commento-header><div id=commento-comment-options-1524625008 class=commento-options><button id=commento-comment-reply-1524625008 title="Reply to Haris Jafri" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick="changeValue('fields[reply_to]','1504537769','Haris Jafri')"></button></div><img src="https://www.gravatar.com/avatar/1598e5fe3155fe46ec7b76130cbfcb36?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-1524625008 class=commento-name>Haris Jafri</div><div id=commento-comment-subtitle-1524625008 class=commento-subtitle><div id=commento-comment-timeago-1524625008 title="Wednesday, Apr 25, 2018" class=commento-timeago>Wednesday, Apr 25, 2018</div></div></div><div id=commento-comment-contents-1524625008><div id=commento-comment-body-1524625008 class=commento-body><div id=commento-comment-text-1524625008><p>i still get error,,using django 2.0</p></div></div></div></div><div id=commento-comment-card-1524781225 style="border-left:2px solid #58cb05" class=commento-card><div class=commento-header><div id=commento-comment-options-1524781225 class=commento-options><button id=commento-comment-reply-1524781225 title="Reply to robosoma" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick="changeValue('fields[reply_to]','1504537769','robosoma')"></button></div><img src="https://www.gravatar.com/avatar/71fbcd8555a9f77981745638fd58cb05?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-1524781225 class=commento-name>robosoma</div><div id=commento-comment-subtitle-1524781225 class=commento-subtitle><div id=commento-comment-timeago-1524781225 title="Friday, Apr 27, 2018" class=commento-timeago>Friday, Apr 27, 2018</div></div></div><div id=commento-comment-contents-1524781225><div id=commento-comment-body-1524781225 class=commento-body><div id=commento-comment-text-1524781225><p>with django 2.x worked code is <code>sys.path.append(os.path.dirname(os.path.abspath('.'))) os.environ['DJANGO_SETTINGS_MODULE'] = 'my_project.settings' import django django.setup()</code></p></div></div></div></div><div id=commento-comment-card-1524781445 style="border-left:2px solid #bfcb36" class=commento-card><div class=commento-header><div id=commento-comment-options-1524781445 class=commento-options><button id=commento-comment-reply-1524781445 title="Reply to Haris Jafri" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick="changeValue('fields[reply_to]','1504537769','Haris Jafri')"></button></div><img src="https://www.gravatar.com/avatar/1598e5fe3155fe46ec7b76130cbfcb36?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-1524781445 class=commento-name>Haris Jafri</div><div id=commento-comment-subtitle-1524781445 class=commento-subtitle><div id=commento-comment-timeago-1524781445 title="Friday, Apr 27, 2018" class=commento-timeago>Friday, Apr 27, 2018</div></div></div><div id=commento-comment-contents-1524781445><div id=commento-comment-body-1524781445 class=commento-body><div id=commento-comment-text-1524781445><p>There is error that no module app ..where should i add the app module?</p></div></div></div></div></div><script>function changeValue(elementName,newValue,name){document.getElementsByName(elementName)[0].value=newValue;document.getElementById('comment-headline').innerHTML="<b>Reply To: "+name+"</b>";window.location.hash="#comment-form";};</script></div></div></div></div><script>if(window.location.hash=="#comment-submitted"){var $comTarget=document.getElementById('comment-submitted');$comTarget.style.display='block';}else if(window.location.hash=="#comment-error"){var $comTarget=document.getElementById('comment-error');$comTarget.style.display='block';}
function renderCommentInMD(inputVal){var converter=new showdown.Converter();document.getElementById('commneto-renderer-msg').innerHTML=`<h2 class="commneto-renderer-msg-header" style="color:rgb(128, 9, 9); font-weight:800;font-size:20px">&nbspPreview:</h2>`+converter.makeHtml(inputVal);document.getElementById('commento-textarea-root').innerHTML=inputVal}</script></div></div><script src=https://ruddra.com/js/bundle.min.js async></script></div></div><label for=sidebar-checkbox class=sidebar-toggle></label><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-58095062-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>