<!doctype html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta charset="utf-8"><meta name="author" content="Arnab Kumar Shil"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#000000"><meta property="fb:app_id" content="668971647169067"><link rel="manifest" href="/manifest.json"><meta name="yandex-verification" content="3ccce49727df78e2"><link rel="copyright" href="https://ruddra.com/implementation-of-forgot-reset-password-feature-in-django/#copyright"><link rel="article:author" href="https://ruddra.com/about"><meta name="robots" content="index,follow"><meta name="referrer" content="unsafe-url"><meta property="og:url" content="https://ruddra.com/implementation-of-forgot-reset-password-feature-in-django/"><meta name="keywords" content="Python,Django,Blog"><title>Implementation of Forgot/Reset Password Feature in Django</title><meta name="description" content="Django has its own implementation for reset/forgot password for its admin site. We are going to use that code as reference to implement similar feature for …"><link rel="preload" as="font" type="font/woff2" href="/fonts/merriweather-v21-latin-regular.woff2" crossorigin><link rel="preload" as="font" type="font/woff2" href="/fonts/pt-sans-v11-latin-regular.woff2" crossorigin><link rel="preload" as="font" type="font/woff2" href="/fonts/merriweather-v21-latin-700.woff2" crossorigin><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="5 Minutes"><style>@font-face{font-family:pt sans;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/pt-sans-v11-latin-regular.eot);src:local("PT Sans"),local("PTSans-Regular"),url(/fonts/pt-sans-v11-latin-regular.eot?#iefix) format("embedded-opentype"),url(/fonts/pt-sans-v11-latin-regular.woff2) format("woff2"),url(/fonts/pt-sans-v11-latin-regular.woff) format("woff"),url(/fonts/pt-sans-v11-latin-regular.ttf) format("truetype"),url(/fonts/pt-sans-v11-latin-regular.svg#PTSans) format("svg")}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}a{text-decoration:none;padding:2px}body,html{margin:0;padding:0;scroll-behavior:smooth}body{color:#222;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}.masthead{border-bottom:1px solid #eee;padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem;background:#202020}.masthead-title{margin-top:0;margin-bottom:0;color:#505050;font-size:20px;letter-spacing:-.025rem;line-height:1.25}.homepage-title a,.masthead-title a{color:#505050;padding:0}.masthead-title small{font-size:75%;font-weight:400;color:silver;letter-spacing:0}h3{font-family:pt sans,Helvetica,Arial,sans-serif;font-weight:400}.container{max-width:38rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.content{visibility:hidden}.sidebar{display:none}.sidebar-checkbox{display:none}#snackbar{display:none}.masthead-search-form{display:none}.sidebar-toggle{display:none}.masthead .homepage-title .home-title,.masthead .masthead-title .home-title{color:#cfcdcd}.masthead .homepage-title .home-title-small,.masthead .masthead-title .home-title-small{color:#8c8585;font-size:1.25rem;letter-spacing:-.25px}.homepage-title{margin:0;font-size:20px;line-height:1.25;letter-spacing:-.025rem;font-family:pt sans,Helvetica,Arial,sans-serif;font-weight:400}@media only screen and (min-width:38em){.container{max-width:32rem}}@media only screen and (min-width:30.1em){.container{max-width:28rem}}@media only screen and (min-width:56em){.container{max-width:38rem}}@media screen and (max-width:48em){.masthead-search-form{display:none}.homepage-title,.masthead-title{text-align:center}}</style><link rel="stylesheet" href="/css/bundle.min.b1472282a3e859564e7c21dc2064c08c0ae23f5302c2f299b409f7834213783e.css" media="print" onload='this.media="all",this.onload=null'><link rel="amphtml" type="text/html" href="https://ruddra.com/amp/implementation-of-forgot-reset-password-feature-in-django/"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon.png"><link rel="shortcut icon" href="/favicon.ico"><link rel="icon" href="https://ruddra.com/logo.png"><link rel="alternate" type="application/rss+xml" title="RSS" href="/sitemap.xml"><link rel="search" href="/opensearch.xml" title="Search at Ruddra" type="application/opensearchdescription+xml"><meta name="generator" content="Hugo 0.71.1"><meta name="twitter:card" content="summary_large_image"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="Coding Blog by Arnab Kumar Shil"><meta property="article:publisher" content="https://ruddra.com"><meta property="article:section" content="Bulletin"><meta property="article:published_time" content="2014-10-21T00:00:00.00Z"><meta property="article:modified_time" content="2020-07-08T00:00:00.00Z"><meta property="og:updated_time" content="2020-07-08T00:00:00.00Z"><meta property="og:image" content="https://ruddra.com/content/images/2020/03/reset.jpg"><meta property="og:image:secure_url" content="https://ruddra.com/content/images/2020/03/reset.jpg"><meta name="revised" content="Ruddra.com, 06/07/8076"><meta property="og:image:width" content="720"><meta property="og:image:height" content="350"><meta name="twitter:site" content="@ruddra"><meta name="twitter:creator" content="@ruddra"><meta name="twitter:title" content="Implementation of Forgot/Reset Password Feature in Django"><meta name="twitter:description" content="Django has its own implementation for reset/forgot password for its admin site. We are going to use that code as reference to implement similar feature for …"><meta property="og:type" content="Article"><meta property="og:title" content="Implementation of Forgot/Reset Password Feature in Django"><meta property="og:description" content="Django has its own implementation for reset/forgot password for its admin site. We are going to use that code as reference to implement similar feature for …"><meta name="twitter:image" content="https://ruddra.com/content/images/2020/03/reset.jpg"><meta name="twitter:image:src" content="https://ruddra.com/content/images/2020/03/reset.jpg"><meta property="article:tag" content="python"><meta property="article:tag" content="django"><meta property="article:tag" content="ruddra"><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","identifier":"implementation-of-forgot-reset-password-feature-in-django","headline":"Implementation of Forgot\/Reset Password Feature in Django","keywords":["Python","Django","Blog"],"url":"https:\/\/ruddra.com\/implementation-of-forgot-reset-password-feature-in-django\/","dateCreated":"2014-10-21T00:00:00.00Z","datePublished":"2014-10-21T00:00:00.00Z","dateModified":"2020-07-08T00:00:00.00Z","articleBody":"Django has its own implementation for reset/forgot password for its admin site. We are going to use that code as reference to implement similar feature for a non admin-site authentication page. …","mainEntityOfPage":"https:\/\/ruddra.com\/implementation-of-forgot-reset-password-feature-in-django\/","image":{"@type":"ImageObject","url":"https:\/\/ruddra.com\/content\/images\/2020\/03\/reset.jpg","height":300,"width":750},"creator":["Arnab Kumar Shil"],"author":{"@type":"Person","name":"Arnab Kumar Shil","url":"https://ruddra.com"},"wordCount":"1002","commentCount":"21","copyrightYear":"2014","discussionUrl":"https:\/\/ruddra.com\/implementation-of-forgot-reset-password-feature-in-django\/#comment-headline","isFamilyFriendly":"true","maintainer":{"@type":"Person","name":"Arnab Kumar Shil","url":"https://ruddra.com"},"publisher":{"@type":"Organization","name":"Coding Blog by Arnab Kumar Shil","url":"https://ruddra.com","logo":{"@type":"ImageObject","url":"https:\/\/ruddra.com\/logo.png"}},"thumbnailUrl":"https:\/\/ruddra.com\/content\/images\/2020\/03\/reset.jpg"}</script></head><body><input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"><div class="sidebar" id="sidebar"><div class="sidebar-item"><img data-src="/avatar.jpg" src="data:image/jpeg;base64,/9j/2wCEABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2MBERISGBUYLxoaL2NCOEJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY//AABEIABQAFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AK2quHuEbGMHq23n5T/hVHTj9qnESPG+MsoLEYGCcVc8XXzSWUMIjRQz5JVjxgf/AF65q1ne2uI5ocb1YHHr7Vmk7GraudimnX+0FbXcDyOR/iKd/Z+o/wDPn+o/xqy7ozZMAJ9QoNN3R/8APuP++K5+Z9jYxtXUPYMGzhWJHPopNZnhaCO5163SVdy/Mce4UkfyrU1T/jxk+rf+gNWf4O/5GK3+jf8AoJrqRhLc78wRDjywcevNHkxf88k/KpH+9SUrILn/2Q==" class="lozad" alt="avatar" width="175px" height="175px"><p class="sidebar-item-bio">I am Arnab, a full stack developer specializing in <a href="https://ruddra.com/tags/python">Python</a>, <a href="https://ruddra.com/tags/django">Django</a>, <a href="https://ruddra.com/tags/react">React</a>, <a href="https://ruddra.com/tags/docker">Docker</a>, <a href="https://ruddra.com/tags/openshift">OpenShift</a>. A top <a href="https://stackoverflow.com/users/story/2696165">1%</a> contributor at Stack Overflow.</p><p class="sidebar-icons"><a class="icon-side-bar" href="https://facebook.com/ruddra.blog/" target="_blank" rel="noopener me" title="facebook"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></a><a class="icon-side-bar" href="https://twitter.com/ruddraarnab" target="_blank" rel="noopener me" title="twitter"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a class="icon-side-bar" href="https://www.linkedin.com/in/ruddraarnab" target="_blank" rel="noopener me" title="linkedin"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a class="icon-side-bar" href="https://github.com/ruddra" target="_blank" rel="noopener me" title="github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a class="icon-side-bar" href="https://stackoverflow.com/users/2696165/ruddra" target="_blank" rel="noopener me" title="stackoverflow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="10 10 100 100" fill="currentcolor" class="feather"><path d="M84.4 93.8V70.6h7.7v30.9H22.6V70.6h7.7v23.2z"/><path d="M38.8 68.4l37.8 7.9 1.6-7.6-37.8-7.9-1.6 7.6zm5-18 35 16.3 3.2-7-35-16.4-3.2 7.1zm9.7-17.2 29.7 24.7 4.9-5.9-29.7-24.7-4.9 5.9zm19.2-18.3-6.2 4.6 23 31 6.2-4.6-23-31zM38 86h38.6v-7.7H38V86z"/></svg></a></p></div><nav class="sidebar-nav"><a class="sidebar-nav-item" href="/">Home</a> <a class="sidebar-nav-item" href="/about/">About Me</a> <a class="sidebar-nav-item" href="/privacy/">Privacy Policy</a> <a class="sidebar-nav-item" href="/contact/">Contact Me</a><form target="_top" class="sidebar-nav-item search-form" method="get" action="/search/"><input type="text" placeholder="Search ..." aria-label="search" class="tftextinput" name="q" size="21" maxlength="120"><button type="submit" aria-label="search button" class="tfbutton"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="rgb(155,155,155)"><path d="M9.145 18.29c-5.042.0-9.145-4.102-9.145-9.145S4.103.0 9.145.0s9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321.0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"/></svg></button></form></nav><div class="sidebar-item" id="copyright"><p>&copy; 2020 Arnab Kumar Shil &#183; <a href="/index.xml"><svg class="rss-feed" xmlns="http://www.w3.org/2000/svg" width="10" height="9" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></a><br><a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> &#183; Made with <a href="https://gohugo.io">Hugo</a></p><a class="donation" href="https://ko-fi.com/ruddra"><img class="lozad" data-src="/kofi.png"></a></div></div><div class="masthead"><div class="container"><h3 class="masthead-title"><a href="https://ruddra.com/" title="Home" class="home-title">Ruddra</a><small class="home-title-small">.com</small></h3><form target="_top" class="masthead-search-form" method="get" action="/search/"><input type="text" aria-label="search" placeholder="Search ..." class="tftextinput" name="q" size="21" maxlength="120"><button type="submit" aria-label="search button" class="tfbutton"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="rgb(155,155,155)"><path d="M9.145 18.29c-5.042.0-9.145-4.102-9.145-9.145S4.103.0 9.145.0s9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321.0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"/></svg></button></form></div></div><div class="container content"><div id="blog-post" class="post"><h1 class="post-title"><a href="https://ruddra.com/implementation-of-forgot-reset-password-feature-in-django/">Implementation of Forgot/Reset Password Feature in Django</a></h1><span class="post-date">October 21, 2014 &#183; 5 Min Read &#183; In <a class="tag-links-a" href="/tags/python">Python</a>, <a class="tag-links-a" href="/tags/django">Django</a></span><div class="img-container"><img class="lozad" data-src="/content/images/2020/03/reset_hu3b21ac4a131914c7b15032863f11a60e_1064513_220x0_resize_q100_box.jpg" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTg0IDM0NTYiLz4=" data-srcset="/content/images/2020/03/reset_hu3b21ac4a131914c7b15032863f11a60e_1064513_220x0_resize_q100_box.jpg 220w,/content/images/2020/03/reset_hu3b21ac4a131914c7b15032863f11a60e_1064513_440x0_resize_q100_box.jpg 440w,/content/images/2020/03/reset_hu3b21ac4a131914c7b15032863f11a60e_1064513_500x0_resize_q100_box.jpg 500w,/content/images/2020/03/reset_hu3b21ac4a131914c7b15032863f11a60e_1064513_720x0_resize_q100_box.jpg 600w,/content/images/2020/03/reset_hu3b21ac4a131914c7b15032863f11a60e_1064513_720x0_resize_q100_box.jpg 720w" alt="Implementation of Forgot/Reset Password Feature in Django" data-sizes="440w"><noscript><img src="/content/images/2020/03/reset.jpg" width="5184" height="3456" alt="Implementation of Forgot/Reset Password Feature in Django"></noscript></div><div class="photo-credit">Photo by <a href="https://unsplash.com/@chilinik?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Nikita Kostrykin</a> on Unsplash</div><div><p>Django has its own implementation for <strong>reset/forgot password</strong> for its admin site. We are going to use that code as reference to implement similar feature for a non admin-site authentication page. Although there are tons of good packages which will allow user to use their password resetting system. But if the system isn&rsquo;t too complex and doesn&rsquo;t need such authentication plugins, then reusing the django&rsquo;s very own implementation can be a good option.</p><p>This implementation is going to divided into two parts. First part is sending an email with reset url, and the Second part is clicking the reset url attached in email and entering new password for reset completion.</p><p>Before starting anything, lets look at the django&rsquo;s reset/forgot password&rsquo;s implementation in <a href="https://github.com/django/django/blob/master/django/contrib/auth/forms.py"><code>django/contrib/auth/forms.py</code></a>) and <a href="https://github.com/django/django/blob/master/django/contrib/auth/views.py"><code>django/contrib/auth/views.py</code></a>).</p><div class="toc"><input id="_toc" type="checkbox" name="_toc"><label class="collapse" for="_toc">Table of contents&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline class="chevron-down" points="6 10 14 18 22 10"/><polyline class="chevron-up" points="22 18 14 10 6 18"/></svg></label><nav id="TableOfContents"><ul><li><a href="#implementation-of-sending-an-email-for-forgot-password-with-reset-url">Implementation of sending an email for forgot password with reset url</a><ul><li><a href="#screenshots-password-reset-flow">Screenshots password reset flow</a></li></ul></li><li><a href="#implementation-of-clicking-the-reset-url-and-entering-new-password-for-reset-completion">Implementation of clicking the reset url and entering new password for reset completion</a><ul><li><a href="#screenshots-reset-successful">Screenshots reset successful</a></li></ul></li><li><a href="#alternative-reference-to-this-implementation">Alternative reference to this implementation</a></li><li><a href="#in-conclusion">In conclusion</a></li></ul></nav></div><p></p><h2 id="implementation-of-sending-an-email-for-forgot-password-with-reset-url">Implementation of sending an email for forgot password with reset url<a href="#implementation-of-sending-an-email-for-forgot-password-with-reset-url" class="hanchor" aria-label="Anchor"> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>We are going to make a <strong>reset password form</strong> where we are going to add an text field which will take either username or email address associated with the corresponding user.</p><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">PasswordResetRequestForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">email_or_username</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="p">(</span><span class="s2">&#34;Email Or Username&#34;</span><span class="p">),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">254</span><span class="p">)</span>
</code></pre></div><p>We are going to make a <strong>view</strong> which will check the input email/username and send an email to user&rsquo;s email address(implementation reference: <a href="https://github.com/django/django/blob/master/django/contrib/auth/forms.py#L235">github source</a>).</p><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.contrib.auth.tokens</span> <span class="kn">import</span> <span class="n">default_token_generator</span>
<span class="kn">from</span> <span class="nn">django.utils.encoding</span> <span class="kn">import</span> <span class="n">force_bytes</span>
<span class="kn">from</span> <span class="nn">django.utils.http</span> <span class="kn">import</span> <span class="n">urlsafe_base64_encode</span><span class="p">,</span> <span class="n">urlsafe_base64_decode</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="kn">from</span> <span class="nn">django.core.mail</span> <span class="kn">import</span> <span class="n">send_mail</span>
<span class="kn">from</span> <span class="nn">settings</span> <span class="kn">import</span> <span class="n">DEFAULT_FROM_EMAIL</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">FormView</span>
<span class="kn">from</span> <span class="nn">.forms</span> <span class="kn">import</span> <span class="n">PasswordResetRequestForm</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">messages</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.db.models.query_utils</span> <span class="kn">import</span> <span class="n">Q</span>

<span class="k">class</span> <span class="nc">ResetPasswordRequestView</span><span class="p">(</span><span class="n">FormView</span><span class="p">):</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&#34;account/test_template.html&#34;</span>
    <span class="n">success_url</span> <span class="o">=</span> <span class="s1">&#39;/account/login&#39;</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">PasswordResetRequestForm</span>

    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">form</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">ResetPasswordRequestView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">data</span><span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s2">&#34;email_or_username&#34;</span><span class="p">]</span>
        <span class="n">user</span><span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Q</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">data</span><span class="p">)</span><span class="o">|</span><span class="n">Q</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">],</span>
                <span class="s1">&#39;site_name&#39;</span><span class="p">:</span> <span class="s1">&#39;your site&#39;</span><span class="p">,</span>
                <span class="s1">&#39;uid&#39;</span><span class="p">:</span> <span class="n">urlsafe_base64_encode</span><span class="p">(</span><span class="n">force_bytes</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)),</span>
                <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span>
                <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">default_token_generator</span><span class="o">.</span><span class="n">make_token</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
                <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">scheme</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">email_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_email.html&#39;</span>
            <span class="n">subject</span> <span class="o">=</span> <span class="s2">&#34;Reset Your Password&#34;</span>
            <span class="n">email</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">email_template_name</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
            <span class="n">send_mail</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">DEFAULT_FROM_EMAIL</span> <span class="p">,</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">],</span> <span class="n">fail_silently</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">messages</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;An email has been sent to &#39;</span> <span class="o">+</span> <span class="n">data</span> <span class="o">+</span><span class="s2">&#34; if it is a valid user.&#34;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">form</span>
</code></pre></div><p>As you see above, the code is fairly simple(although it looks long). An encoded user id has been generated here and a token by using. This user id is going to be used later to get the user, the token will be used for checking validity of the url for that user and both the token and the user id is going to be used as unique reference for reset password url. <strong>c</strong> is a dictionary which has user id, token and other related data etc. This dictionary is going to be blent with the template <code>registration/password_reset_email.html</code> and send to the user&rsquo;s email address. We will be using django&rsquo;s message framework to show messages.</p><div class="highlight"><pre class="chroma"><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">if</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x">
</span><span class="x">&lt;ul class=&#34;messages&#34;&gt;
</span><span class="x">    </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span><span class="x">
</span><span class="x">    &lt;li&gt;</span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">message.tags</span> <span class="cp">%}</span><span class="x"> class=&#34;</span><span class="cp">{{</span> <span class="nv">message.tags</span> <span class="cp">}}</span><span class="x">&#34;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x">&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="x">&lt;/li&gt;
</span><span class="x">    </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x">
</span><span class="x">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x">
</span><span class="x">&lt;/ul&gt;
</span><span class="x">
</span><span class="x">&lt;form action=&#34;&#34; method=&#34;post&#34;&gt;
</span><span class="x">    </span><span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span><span class="x">
</span><span class="x">    </span><span class="cp">{{</span> <span class="nv">form.as_p</span> <span class="cp">}}</span><span class="x">
</span><span class="x">    &lt;input type=&#34;submit&#34; value=&#34;Submit&#34; /&gt;
</span><span class="x">&lt;/form&gt;
</span></code></pre></div><p>Two more things before wrapping up sending email part. One, making a url for using this view.</p><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^account/reset_password&#39;</span><span class="p">,</span> <span class="n">ResetPasswordRequestView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;reset_password&#34;</span><span class="p">),</span>
<span class="p">)</span>
</code></pre></div><p>Two, create or edit the template inside <strong>TEMPLATES</strong> directory named <code>registration/password_reset_email.html</code>.</p><div class="highlight"><pre class="chroma"><code class="language-django" data-lang="django"><span class="cp">{%</span> <span class="k">load</span> <span class="nv">i18n</span> <span class="cp">%}{%</span> <span class="k">autoescape</span> <span class="nv">off</span> <span class="cp">%}</span><span class="x">
</span><span class="x"></span><span class="cp">{%</span> <span class="k">blocktrans</span> <span class="cp">%}</span><span class="x">You&#39;re receiving this email because you requested a password reset for your user account at </span><span class="cp">{{</span> <span class="nv">site_name</span> <span class="cp">}}{%</span><span class="k">endblocktrans</span> <span class="cp">%}</span><span class="x">
</span><span class="x">
</span><span class="x"></span><span class="cp">{%</span> <span class="k">trans</span> <span class="s2">&#34;Please go to the following page and choose a new password:&#34;</span> <span class="cp">%}</span><span class="x">
</span><span class="x">    </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">reset_link</span> <span class="cp">%}</span><span class="x">
</span><span class="x">        </span><span class="cp">{{</span> <span class="nv">domain</span> <span class="cp">}}{%</span> <span class="k">url</span> <span class="s1">&#39;reset_password_confirm&#39;</span> <span class="nv">uidb64</span><span class="o">=</span><span class="nv">uid</span> <span class="nv">token</span><span class="o">=</span><span class="nv">token</span> <span class="cp">%}</span><span class="x">
</span><span class="x">    </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x">
</span><span class="x"></span><span class="cp">{%</span> <span class="k">trans</span> <span class="s2">&#34;Your username, in case you&#39;ve forgotten:&#34;</span> <span class="cp">%}</span><span class="x"> </span><span class="cp">{{</span> <span class="nv">user.get_username</span> <span class="cp">}}</span><span class="x">
</span><span class="x"></span><span class="cp">{%</span> <span class="k">trans</span> <span class="s2">&#34;Thanks for using our site!&#34;</span> <span class="cp">%}</span><span class="x">
</span><span class="x"></span><span class="cp">{%</span> <span class="k">blocktrans</span> <span class="cp">%}</span><span class="x">The </span><span class="cp">{{</span> <span class="nv">site_name</span> <span class="cp">}}</span><span class="x"> team</span><span class="cp">{%</span> <span class="k">endblocktrans</span> <span class="cp">%}</span><span class="x">
</span><span class="x"></span><span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span><span class="x">
</span></code></pre></div><p>Now run the server and you will see forms like the screen shots below: (This screenshots look cool because django adminsite&rsquo;s js/css have been used here.)</p><h3 id="screenshots-password-reset-flow">Screenshots password reset flow<a href="#screenshots-password-reset-flow" class="hanchor" aria-label="Anchor"> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>Rendered template from PasswordResetRequestForm form</p><div class="page-img-container"><img class="lozad page-image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4MDQgNDE4Ii8+" data-src="/content/git/django-reset-password/reset-password_huab50579a67f8f09641b4297c32d8981c_22872_500x0_resize_q100_box.jpg" data-srcset="/content/git/django-reset-password/reset-password_huab50579a67f8f09641b4297c32d8981c_22872_500x0_resize_q100_box.jpg 500w,/content/git/django-reset-password/reset-password_huab50579a67f8f09641b4297c32d8981c_22872_600x0_resize_q100_box.jpg 600w,/content/git/django-reset-password/reset-password_huab50579a67f8f09641b4297c32d8981c_22872_720x0_resize_q100_box.jpg 720w" alt="django reset" data-sizes="440w"><noscript><img src="/content/git/django-reset-password/reset-password.jpg" width="804" height="418" alt="django reset"></noscript></div><p>Rendered template from PasswordResetRequestForm form with error messages</p><div class="page-img-container"><img class="lozad page-image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA4NDggNTc0Ii8+" data-src="/content/git/django-reset-password/invalid-username_hu19a6ca25db9caf3d97e6432d96ec978e_28269_500x0_resize_q100_box.jpg" data-srcset="/content/git/django-reset-password/invalid-username_hu19a6ca25db9caf3d97e6432d96ec978e_28269_500x0_resize_q100_box.jpg 500w,/content/git/django-reset-password/invalid-username_hu19a6ca25db9caf3d97e6432d96ec978e_28269_600x0_resize_q100_box.jpg 600w,/content/git/django-reset-password/invalid-username_hu19a6ca25db9caf3d97e6432d96ec978e_28269_720x0_resize_q100_box.jpg 720w" alt="django reset" data-sizes="440w"><noscript><img src="/content/git/django-reset-password/invalid-username.jpg" width="848" height="574" alt="django reset"></noscript></div><p>Rendered template of login form with sent email confirmation message</p><div class="page-img-container"><img class="lozad page-image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5NDQgODQ4Ii8+" data-src="/content/git/django-reset-password/reset-mail-sent_hu16e7969b357b05ae889fe8f209f9580c_43053_500x0_resize_q100_box.jpg" data-srcset="/content/git/django-reset-password/reset-mail-sent_hu16e7969b357b05ae889fe8f209f9580c_43053_500x0_resize_q100_box.jpg 500w,/content/git/django-reset-password/reset-mail-sent_hu16e7969b357b05ae889fe8f209f9580c_43053_600x0_resize_q100_box.jpg 600w,/content/git/django-reset-password/reset-mail-sent_hu16e7969b357b05ae889fe8f209f9580c_43053_720x0_resize_q100_box.jpg 720w" alt="django reset" data-sizes="440w"><noscript><img src="/content/git/django-reset-password/reset-mail-sent.jpg" width="944" height="848" alt="django reset"></noscript></div><p>Sent email look</p><div class="page-img-container"><img class="lozad page-image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjQ0IDQxNiIvPg==" data-src="/content/git/django-reset-password/reset-email_hua216f340e579333e3eaf26cdf1a7fb17_48360_500x0_resize_q100_box.jpg" data-srcset="/content/git/django-reset-password/reset-email_hua216f340e579333e3eaf26cdf1a7fb17_48360_500x0_resize_q100_box.jpg 500w,/content/git/django-reset-password/reset-email_hua216f340e579333e3eaf26cdf1a7fb17_48360_600x0_resize_q100_box.jpg 600w,/content/git/django-reset-password/reset-email_hua216f340e579333e3eaf26cdf1a7fb17_48360_720x0_resize_q100_box.jpg 720w" alt="django reset" data-sizes="440w"><noscript><img src="/content/git/django-reset-password/reset-email.jpg" width="1244" height="416" alt="django reset"></noscript></div><h2 id="implementation-of-clicking-the-reset-url-and-entering-new-password-for-reset-completion">Implementation of clicking the reset url and entering new password for reset completion<a href="#implementation-of-clicking-the-reset-url-and-entering-new-password-for-reset-completion" class="hanchor" aria-label="Anchor"> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>First, lets write a <strong>form</strong> which will have two fields new password and retype password field.</p><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">SetPasswordForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">error_messages</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;password_mismatch&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&#34;The two password fields didn&#39;t match.&#34;</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="n">new_password1</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="p">(</span><span class="s2">&#34;New password&#34;</span><span class="p">),</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                    <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">PasswordInput</span><span class="p">)</span>
    <span class="n">new_password2</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="p">(</span><span class="s2">&#34;New password confirmation&#34;</span><span class="p">),</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                    <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">PasswordInput</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clean_new_password2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">password1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;new_password1&#39;</span><span class="p">)</span>
        <span class="n">password2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;new_password2&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">password1</span> <span class="o">!=</span> <span class="n">password2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">forms</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;password_mismatch&#39;</span><span class="p">],</span>
                <span class="n">code</span><span class="o">=</span><span class="s1">&#39;password_mismatch&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">password2</span>
</code></pre></div><p>It will take two password input and verify if they match, if those inputs match(in clean method), it will return password. Now using that form, we are going to write a view(<a href="https://github.com/django/django/blob/731f313d604a6cc141f36d8a1ba9a75790c70154/django/contrib/auth/views.py#L192%22">reference for implementation</a>).</p><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">PasswordResetConfirmView</span><span class="p">(</span><span class="n">FormView</span><span class="p">):</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&#34;account/test_template.html&#34;</span>
    <span class="n">success_url</span> <span class="o">=</span> <span class="s1">&#39;/admin/&#39;</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">SetPasswordForm</span>

    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">form</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PasswordResetConfirmView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">uidb64</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;uidb64&#39;</span><span class="p">]</span>
        <span class="n">token</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span>
        <span class="n">UserModel</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">uid</span> <span class="o">=</span> <span class="n">urlsafe_base64_decode</span><span class="p">(</span><span class="n">uidb64</span><span class="p">)</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">OverflowError</span><span class="p">,</span> <span class="n">User</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">):</span>
            <span class="n">user</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">default_token_generator</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">token</span><span class="p">):</span>
            <span class="n">new_password</span><span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">&#39;new_password2&#39;</span><span class="p">]</span>
            <span class="n">user</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="n">new_password</span><span class="p">)</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">messages</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;Password reset has been successful.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">messages</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;Password reset has not been unsuccessful.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">form</span>
</code></pre></div><p>URL for this view:</p><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">urlpatterns</span> <span class="o">+=</span> <span class="n">patterns</span><span class="p">(</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^account/reset_password_confirm/(?P&lt;uidb64&gt;[0-9A-Za-z]+)-(?P&lt;token&gt;.+)/$&#39;</span><span class="p">,</span> <span class="n">PasswordResetConfirmView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;reset_password_confirm&#39;</span><span class="p">),</span>
<span class="p">)</span>
</code></pre></div><p>Well <strong>PasswordResetConfirmView</strong> takes two parameter from urls, uidb64 and token, those were sent within email generated by <strong>ResetPasswordRequestView</strong>. We got user id hence the user by decoding <strong>uid64</strong>, and function <code>default_token_generator</code> checks the token against the user. If they are valid, then we set new password for the user. If they are not valid, it will show an error message saying the url is no longer valid.</p><h3 id="screenshots-reset-successful">Screenshots reset successful<a href="#screenshots-reset-successful" class="hanchor" aria-label="Anchor"> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>Rendered template for SetPasswordForm form</p><div class="page-img-container"><img class="lozad page-image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5OTQgNjA4Ii8+" data-src="/content/git/django-reset-password/reset-password-prompt_hu6419a9133b2b033b89fce68db4e9b4f2_30916_500x0_resize_q100_box.jpg" data-srcset="/content/git/django-reset-password/reset-password-prompt_hu6419a9133b2b033b89fce68db4e9b4f2_30916_500x0_resize_q100_box.jpg 500w,/content/git/django-reset-password/reset-password-prompt_hu6419a9133b2b033b89fce68db4e9b4f2_30916_600x0_resize_q100_box.jpg 600w,/content/git/django-reset-password/reset-password-prompt_hu6419a9133b2b033b89fce68db4e9b4f2_30916_720x0_resize_q100_box.jpg 720w" alt="django reset" data-sizes="440w"><noscript><img src="/content/git/django-reset-password/reset-password-prompt.jpg" width="994" height="608" alt="django reset"></noscript></div><p>Reset successful</p><div class="page-img-container"><img class="lozad page-image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDk4IDc4MCIvPg==" data-src="/content/git/django-reset-password/reset-success_hu3e57b2202d120f6c8d4503b6b38af8db_37369_500x0_resize_q100_box.jpg" data-srcset="/content/git/django-reset-password/reset-success_hu3e57b2202d120f6c8d4503b6b38af8db_37369_500x0_resize_q100_box.jpg 500w,/content/git/django-reset-password/reset-success_hu3e57b2202d120f6c8d4503b6b38af8db_37369_600x0_resize_q100_box.jpg 600w,/content/git/django-reset-password/reset-success_hu3e57b2202d120f6c8d4503b6b38af8db_37369_720x0_resize_q100_box.jpg 720w" alt="django reset" data-sizes="440w"><noscript><img src="/content/git/django-reset-password/reset-success.jpg" width="1098" height="780" alt="django reset"></noscript></div><h2 id="alternative-reference-to-this-implementation">Alternative reference to this implementation<a href="#alternative-reference-to-this-implementation" class="hanchor" aria-label="Anchor"> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>You can check the <a href="https://docs.djangoproject.com/en/2.1/topics/auth/default/#module-django.contrib.auth.views">django authentication views</a> for your own implementation or customize them.</p><h2 id="in-conclusion">In conclusion<a href="#in-conclusion" class="hanchor" aria-label="Anchor"> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>Thus you implement your very own forgot or reset the password. For full project/implementation, please check/fork <a href="https://github.com/ruddra/django-reset-password/tree/master">this repository</a>. If you have any questions, please share in the comment section below.</p><p><strong>Last updated</strong>: July 8, 2020</p></div></div><ul class="side-share"><li><span id="love-share"><svg class="love-share-sign" id="love-share-sign" fill="#d6d6d6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 4.248c-3.148-5.402-12-3.825-12 2.944C0 11.853 5.571 16.619 12 23c6.43-6.381 12-11.147 12-15.808.0-6.792-8.875-8.306-12-2.944z"/></svg><span id="loved-count" class="loved-count">x<span id="like-count">4</span></span></span></li><li class="social-share"><a target="_blank" aria-label="FB" rel="noreferrer" href="https://www.facebook.com/dialog/share?app_id=668971647169067&display=page&href=https%3a%2f%2fruddra.com%2fimplementation-of-forgot-reset-password-feature-in-django%2f&redirect_uri=https%3a%2f%2fruddra.com%2fimplementation-of-forgot-reset-password-feature-in-django%2f"><svg class="fb-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M9 8H6v4h3v12h5V12h3.642L18 8h-4V6.333C14 5.378 14.192 5 15.115 5H18V0h-3.808C10.596.0 9 1.583 9 4.615V8z"/><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zm-3 7h-1.924C13.461 7 13 7.252 13 7.889V9h3l-.238 3H13v8h-3v-8H8V9h2V7.077C10 5.055 11.064 4 13.461 4H16v3z"/></svg></a></li><li class="social-share"><a aria-label="Twitter" target="_blank" rel="noreferrer" href="https://twitter.com/intent/tweet?text=Implementation%20of%20Forgot%2fReset%20Password%20Feature%20in%20Django&url=https%3a%2f%2fruddra.com%2fimplementation-of-forgot-reset-password-feature-in-django%2f"><svg class="tw-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179.0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142.0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zm-.139 9.237c.209 4.617-3.234 9.765-9.33 9.765-1.854.0-3.579-.543-5.032-1.475 1.742.205 3.48-.278 4.86-1.359-1.437-.027-2.649-.976-3.066-2.28.515.098 1.021.069 1.482-.056-1.579-.317-2.668-1.739-2.633-3.26.442.246.949.394 1.486.411-1.461-.977-1.875-2.907-1.016-4.383 1.619 1.986 4.038 3.293 6.766 3.43-.479-2.053 1.08-4.03 3.199-4.03.943.0 1.797.398 2.395 1.037.748-.147 1.451-.42 2.086-.796-.246.767-.766 1.41-1.443 1.816.664-.08 1.297-.256 1.885-.517-.439.656-.996 1.234-1.639 1.697z"/></svg></a></li><li class="social-share"><a aria-label="LN" target="_blank" rel="noreferrer" href="https://www.linkedin.com/shareArticle/?mini=true&url=https%3a%2f%2fruddra.com%2fimplementation-of-forgot-reset-password-feature-in-django%2f&title=Implementation%20of%20Forgot%2fReset%20Password%20Feature%20in%20Django&summary=&source="><svg class="ln-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zM5 8H0v16h5V8zm7.982.0H8.014v16h4.969v-8.399c0-4.67 6.029-5.052 6.029.0V24H24V13.869c0-7.88-8.922-7.593-11.018-3.714V8z"/><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zM8 19H5V8h3v11zm-1.5-12.268c-.966.0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zM20 19h-3v-5.604c0-3.368-4-3.113-4 0V19h-3V8h3v1.765c1.396-2.586 7-2.777 7 2.476V19z"/></svg></a></li></ul><div class="newsletter-section" id="newsletter-submitted"><h2 class="newsletter-header">Get Better With Python</h2><div id="commento-newsletter" class="commento-root commento-root-font"><div id="newsletter-error" class="commento-error-box" style="display:none">An error occurred when submitting the form, please try again.</div><div id="newsletter-submitted-box" style="display:none"><p class="newsletter-submitted-txt">Thank you for your subscription to our newsletters.<br>You will start receiving emails from next iteration.</p></div><div id="newsletter-body"><div class="newsletter-txt">Subscribe to get monthly articles about Python and more.<br>We won't spam you. Unsubscribe at any time.</div><div id="commento-main-area-newsletter" class="commento-main-area"><form id="commento-form" method="post" action="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/ruddra/ruddra.comments/master/comments"><input type="hidden" name="options[redirect]" value="https://ruddra.com/implementation-of-forgot-reset-password-feature-in-django/#newsletter-submitted"> <input type="hidden" name="options[slug]" value="newsletter-subscription"> <input type="hidden" name="options[parent]" value="newsletter-subscription"> <input type="hidden" name="options[origin]" value="https://ruddra.com/newsletters/"> <input type="hidden" name="options[redirectError]" value="https://ruddra.com/implementation-of-forgot-reset-password-feature-in-django/#newsletter-error"><div id="commento-login" class="commento-login"><label id="email-newsletter"><input aria-label="My email address is ..." type="email" name="fields[email]" placeholder="My email address is ..." style="padding-left:10px;width:90%;line-height:2;border:1px solid rgba(50,50,93,.1)" required></label></div><div style="width:95.8%"><button id="commento-submit-button-root-newsletter" type="submit" class="commento-button commento-submit-button">Subscribe</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id="commento-checkbox-root" name="options[subscribe]" type="checkbox" value="email" required><label for="commento-checkbox-root">I agree to receive emails</label></div></div></form></div></div></div></div><div class="pagination"><div class="pagination-item older"><span class="pagination-arrow">&#8592; Previous</span><div class="pagination-link"><a href="https://ruddra.com/perodic-tasks-by-celery-3-1-example/">Perodic Tasks By Celery 3.1 Example</a></div><div class="pagination-image"><img class="lozad" data-src="/content/images/2020/03/celery_hu8e19b0b9d9491490d482ead680fddfe8_1666329_350x0_resize_q100_box.jpg" alt="Perodic Tasks By Celery 3.1 Example"><noscript><img src="/content/images/2020/03/celery_hu8e19b0b9d9491490d482ead680fddfe8_1666329_350x0_resize_q100_box.jpg" alt="Perodic Tasks By Celery 3.1 Example"></noscript></div><p class="pagination-text">This post is deprecated. It is no longer compatible with latest Celery versions. …</p></div><div class="pagination-item newer"><span class="pagination-arrow">Next &#8594;</span><div class="pagination-link"><a href="https://ruddra.com/using-intellijidea-within-an-exisiting-virtualenv/">Using IntellijIdea/Pycharm Within An Exisiting …</a></div><div class="pagination-image"><img class="lozad" data-src="/content/images/2020/05/idea_hu4c38dfb5bb8db097d8791febddee99e5_2458669_350x0_resize_q100_box.jpg" alt="Using IntellijIdea/Pycharm Within An Exisiting Virtualenv"><noscript><img src="/content/images/2020/05/idea_hu4c38dfb5bb8db097d8791febddee99e5_2458669_350x0_resize_q100_box.jpg" alt="Using IntellijIdea/Pycharm Within An Exisiting Virtualenv"></noscript></div><p class="pagination-text">To add a virtual environment to Intellij Idea, You have added Python from …</p></div></div><div class="tiny" id="comment-submitted"><div id="commento" class="commento-root commento-root-font"><div id="comment-submitted-box" style="display:none">Thank you for your comment. It will be published shortly.</div><div id="comment-error" style="display:none">An error occurred when submitting the form, please try again.</div><div id="commento-main-area" class="commento-main-area"><div class="commento-name" id="comment-headline"><b>Share Your Thoughts</b></div><form id="comment-form" method="post" name="comment-form"><input type="hidden" name="options[redirect]" value="https://ruddra.com/implementation-of-forgot-reset-password-feature-in-django/#comment-submitted"> <input type="hidden" name="options[slug]" value="implementation-of-forgot-reset-password-feature-in-django"> <input type="hidden" name="options[parent]" value="implementation-of-forgot-reset-password-feature-in-django"> <input type="hidden" name="options[origin]" value="https://ruddra.com/implementation-of-forgot-reset-password-feature-in-django/"> <input type="hidden" id="comment-parent" name="fields[reply_to]"> <input type="hidden" name="options[redirectError]" value="https://ruddra.com/implementation-of-forgot-reset-password-feature-in-django/#comment-error"> <textarea name="fields[comment]" id="commento-textarea-root" placeholder="Add a comment" required aria-label="Add a comment"></textarea> <button id="commento-submit-button-root" type="submit" class="commento-button commento-submit-button submit-github">Comment With Github</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id="commento-anonymous-checkbox-root" name="options[subscribe]" type="checkbox" value="email"><label for="commento-anonymous-checkbox-root">Notify me of new comments</label></div><a onclick="toggleMarkDownTable()" id="commento-markdown-button-root" class="commento-markdown-button"><b>M↓</b> <span class="commento-markdown">Markdown</span></a><table id="commento-markdown-help-root" class="commento-markdown-help" style="display:none"><tr><td><i>italics</i></td><td>surround text with<code>*asterisks*</code></td></tr><tr><td><b>bold</b></td><td>surround text with<code>**two asterisks**</code></td></tr><tr><td><a href="https://example.com">hyperlink</a></td><td><code>[hyperlink](https://example.com)</code> or just a bare URL</td></tr><tr><td><code>code</code></td><td>surround text with <code>`backticks`</code></td></tr><tr><td><code>code block</code></td><td>surround text with <code>```console.log()```</code></td></tr><tr><td><strike>strikethrough</strike></td><td>surround text with <code>~~two tilde characters~~</code></td></tr><tr><td><blockquote>quote</blockquote></td><td>prefix with <code>></code></td></tr><tr><td>Emoji 😱</td><td><b>:smile:</b>😄 <b>:angry:</b>😠 <b>:disappointed:</b>😞(<a href="https://www.webfx.com/tools/emoji-cheat-sheet/">cheat sheet</a>)</td></tr></table></form></div><input id="_show_comment_input" type="checkbox"><label id="collapse-comment" class="collapse-comment" for="_show_comment_input"><span class="show-text">Show</span><span class="hide-text">Hide</span> responses (21)</label><div id="commento-comment" class="commento-comments" hidden aria-hidden="true"><div id="commento-comment-card-1457414765" style="border-left:2px solid #da6696" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1457414765" class="commento-options"><button id="commento-comment-reply-1457414765" href="#comment-form" onclick='changeValue("fields[reply_to]","1457414765","Uma Maheswara Rao Pinninti")' title="Reply to Uma Maheswara Rao Pinninti" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/639829e54323f2b96046e05489da6696?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="Uma Maheswara Rao Pinninti"><div id="commento-comment-name-1457414765" class="commento-name">Uma Maheswara Rao Pinninti</div><div id="commento-comment-subtitle-1457414765" class="commento-subtitle"><div id="commento-comment-timeago-1457414765" title="Tuesday, March 8, 2016" class="commento-timeago">Tuesday, March 8, 2016</div></div></div><div id="commento-comment-body-1457414765" class="commento-body"><p>Hi, This template throwing the below error. <code>Reverse for 'password_reset_confirm' with arguments '()' and keyword arguments '{u'uidb64': 'Mw', u'token': u'4a1-0432bcab41a9fde28f68'}' not found. 0 pattern(s) tried: []</code> Please respond as soon as possible.. Thank you.</p></div><div><div id="commento-comment-card-1468496400" style="border-left:2px solid #308024" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1468496400" class="commento-options"><button id="commento-comment-reply-1468496400" title="Reply to Arnab Kumar Shil" class="commento-option-button commento-option-reply onhover" style="right:0" href="#comment-form" onclick='changeValue("fields[reply_to]","1457414765","Arnab Kumar Shil")'></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id="commento-comment-name-1468496400" class="commento-name commento-moderator">Arnab Kumar Shil</div><div id="commento-comment-subtitle-1468496400" class="commento-subtitle"><div id="commento-comment-timeago-1468496400" title="Thursday, July 14, 2016" class="commento-timeago">Thursday, July 14, 2016</div></div></div><div id="commento-comment-body-1468496400" class="commento-body"><p>Check this answer, which should solve your problem <a href="http://stackoverflow.com/qu..">http://stackoverflow.com/qu..</a>. 😄</p></div></div></div></div><div id="commento-comment-card-1476925538" style="border-left:2px solid #64f522" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1476925538" class="commento-options"><button id="commento-comment-reply-1476925538" href="#comment-form" onclick='changeValue("fields[reply_to]","1476925538","Ashutosh")' title="Reply to Ashutosh" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/6f64aa66a48cc3feeba23e705d64f522?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="Ashutosh"><div id="commento-comment-name-1476925538" class="commento-name">Ashutosh</div><div id="commento-comment-subtitle-1476925538" class="commento-subtitle"><div id="commento-comment-timeago-1476925538" title="Thursday, October 20, 2016" class="commento-timeago">Thursday, October 20, 2016</div></div></div><div id="commento-comment-body-1476925538" class="commento-body"><p>I can not see the screenshots..</p></div><div><div id="commento-comment-card-1476925593" style="border-left:2px solid #64f522" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1476925593" class="commento-options"><button id="commento-comment-reply-1476925593" title="Reply to Ashutosh" class="commento-option-button commento-option-reply onhover" style="right:0" href="#comment-form" onclick='changeValue("fields[reply_to]","1476925538","Ashutosh")'></button></div><img data-src="https://www.gravatar.com/avatar/6f64aa66a48cc3feeba23e705d64f522?s=70&r=pg&d=identicon" class="lozad commento-avatar-img"><div id="commento-comment-name-1476925593" class="commento-name">Ashutosh</div><div id="commento-comment-subtitle-1476925593" class="commento-subtitle"><div id="commento-comment-timeago-1476925593" title="Thursday, October 20, 2016" class="commento-timeago">Thursday, October 20, 2016</div></div></div><div id="commento-comment-body-1476925593" class="commento-body"><p>also i can not see the template code of other templates</p></div></div><div id="commento-comment-card-1477006754" style="border-left:2px solid #308024" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1477006754" class="commento-options"><button id="commento-comment-reply-1477006754" title="Reply to Ruddra" class="commento-option-button commento-option-reply onhover" style="right:0" href="#comment-form" onclick='changeValue("fields[reply_to]","1476925538","Ruddra")'></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id="commento-comment-name-1477006754" class="commento-name commento-moderator">Ruddra</div><div id="commento-comment-subtitle-1477006754" class="commento-subtitle"><div id="commento-comment-timeago-1477006754" title="Friday, October 21, 2016" class="commento-timeago">Friday, October 21, 2016</div></div></div><div id="commento-comment-body-1477006754" class="commento-body"><p>Thanks for noticing. I have updated the post 😄</p></div></div></div></div><div id="commento-comment-card-1481425696" style="border-left:2px solid #ba6b77" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1481425696" class="commento-options"><button id="commento-comment-reply-1481425696" href="#comment-form" onclick='changeValue("fields[reply_to]","1481425696","Alex")' title="Reply to Alex" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/bc1fe4a4e8a5ad58136a2ba800ba6b77?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="Alex"><div id="commento-comment-name-1481425696" class="commento-name">Alex</div><div id="commento-comment-subtitle-1481425696" class="commento-subtitle"><div id="commento-comment-timeago-1481425696" title="Sunday, December 11, 2016" class="commento-timeago">Sunday, December 11, 2016</div></div></div><div id="commento-comment-body-1481425696" class="commento-body"><p>Thank You! is very useful.</p></div><div></div></div><div id="commento-comment-card-3132342514" style="border-left:2px solid #48c415" class="commento-card"><div class="commento-header"><div id="commento-comment-options-3132342514" class="commento-options"><button id="commento-comment-reply-3132342514" href="#comment-form" onclick='changeValue("fields[reply_to]","3132342514","Aswa")' title="Reply to Aswa" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/44a678c57d295f7603d08cea6c48c415?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="Aswa"><div id="commento-comment-name-3132342514" class="commento-name">Aswa</div><div id="commento-comment-subtitle-3132342514" class="commento-subtitle"><div id="commento-comment-timeago-3132342514" title="Wednesday, February 1, 2017" class="commento-timeago">Wednesday, February 1, 2017</div></div></div><div id="commento-comment-body-3132342514" class="commento-body"><p>Great article, very useful! However, I cannot find <code>django/contrib/admin/templates/registration/password_reset_subject.txt</code></p></div><div></div></div><div id="commento-comment-card-1490178685" style="border-left:2px solid #1a5138" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1490178685" class="commento-options"><button id="commento-comment-reply-1490178685" href="#comment-form" onclick='changeValue("fields[reply_to]","1490178685","sravani")' title="Reply to sravani" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/8b20bfaa1903a3c3babaeba6f31a5138?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="sravani"><div id="commento-comment-name-1490178685" class="commento-name">sravani</div><div id="commento-comment-subtitle-1490178685" class="commento-subtitle"><div id="commento-comment-timeago-1490178685" title="Wednesday, March 22, 2017" class="commento-timeago">Wednesday, March 22, 2017</div></div></div><div id="commento-comment-body-1490178685" class="commento-body"><p>what is the username and password</p></div><div><div id="commento-comment-card-1490752828" style="border-left:2px solid #308024" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1490752828" class="commento-options"><button id="commento-comment-reply-1490752828" title="Reply to Ruddra" class="commento-option-button commento-option-reply onhover" style="right:0" href="#comment-form" onclick='changeValue("fields[reply_to]","1490178685","Ruddra")'></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id="commento-comment-name-1490752828" class="commento-name commento-moderator">Ruddra</div><div id="commento-comment-subtitle-1490752828" class="commento-subtitle"><div id="commento-comment-timeago-1490752828" title="Wednesday, March 29, 2017" class="commento-timeago">Wednesday, March 29, 2017</div></div></div><div id="commento-comment-body-1490752828" class="commento-body"><p>You can create user in your system and use the user&rsquo;s username and password</p></div></div></div></div><div id="commento-comment-card-1514043089" style="border-left:2px solid #49c990" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1514043089" class="commento-options"><button id="commento-comment-reply-1514043089" href="#comment-form" onclick='changeValue("fields[reply_to]","1514043089","Alejandro Hurtado")' title="Reply to Alejandro Hurtado" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/e54db53fbf8fc4b04b0340ac1e49c990?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="Alejandro Hurtado"><div id="commento-comment-name-1514043089" class="commento-name">Alejandro Hurtado</div><div id="commento-comment-subtitle-1514043089" class="commento-subtitle"><div id="commento-comment-timeago-1514043089" title="Saturday, December 23, 2017" class="commento-timeago">Saturday, December 23, 2017</div></div></div><div id="commento-comment-body-1514043089" class="commento-body"><p>and if I want to use my own template? it does not look stylish with django admin, thanks</p></div><div></div></div><div id="commento-comment-card-1522121518" style="border-left:2px solid #1f2c13" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1522121518" class="commento-options"><button id="commento-comment-reply-1522121518" href="#comment-form" onclick='changeValue("fields[reply_to]","1522121518","Prabhash Tiwari")' title="Reply to Prabhash Tiwari" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/bd6ce394193aa91509745250df1f2c13?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="Prabhash Tiwari"><div id="commento-comment-name-1522121518" class="commento-name">Prabhash Tiwari</div><div id="commento-comment-subtitle-1522121518" class="commento-subtitle"><div id="commento-comment-timeago-1522121518" title="Tuesday, March 27, 2018" class="commento-timeago">Tuesday, March 27, 2018</div></div></div><div id="commento-comment-body-1522121518" class="commento-body"><p>TemplateDoesNotExist at <code>/account/reset_password</code> why shows this error..</p></div><div><div id="commento-comment-card-1522150046" style="border-left:2px solid #308024" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1522150046" class="commento-options"><button id="commento-comment-reply-1522150046" title="Reply to Ruddra" class="commento-option-button commento-option-reply onhover" style="right:0" href="#comment-form" onclick='changeValue("fields[reply_to]","1522121518","Ruddra")'></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id="commento-comment-name-1522150046" class="commento-name commento-moderator">Ruddra</div><div id="commento-comment-subtitle-1522150046" class="commento-subtitle"><div id="commento-comment-timeago-1522150046" title="Tuesday, March 27, 2018" class="commento-timeago">Tuesday, March 27, 2018</div></div></div><div id="commento-comment-body-1522150046" class="commento-body"><p>Hi, can you please create an issue on the github repository with the error stacktrace? In that way, I can easily figure out if something is wrong. Also don&rsquo;t forget to mention which django version you are using. Thanks</p></div></div></div></div><div id="commento-comment-card-1526560914" style="border-left:2px solid #570b3c" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1526560914" class="commento-options"><button id="commento-comment-reply-1526560914" href="#comment-form" onclick='changeValue("fields[reply_to]","1526560914","Chinmoy Acharjee")' title="Reply to Chinmoy Acharjee" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/765b241e0be3c65883387f26c4570b3c?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="Chinmoy Acharjee"><div id="commento-comment-name-1526560914" class="commento-name">Chinmoy Acharjee</div><div id="commento-comment-subtitle-1526560914" class="commento-subtitle"><div id="commento-comment-timeago-1526560914" title="Thursday, May 17, 2018" class="commento-timeago">Thursday, May 17, 2018</div></div></div><div id="commento-comment-body-1526560914" class="commento-body"><p>If i want to resend the email with that particular URL then how can i do it?</p></div><div><div id="commento-comment-card-1526591679" style="border-left:2px solid #308024" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1526591679" class="commento-options"><button id="commento-comment-reply-1526591679" title="Reply to Ruddra" class="commento-option-button commento-option-reply onhover" style="right:0" href="#comment-form" onclick='changeValue("fields[reply_to]","1526560914","Ruddra")'></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id="commento-comment-name-1526591679" class="commento-name commento-moderator">Ruddra</div><div id="commento-comment-subtitle-1526591679" class="commento-subtitle"><div id="commento-comment-timeago-1526591679" title="Friday, May 18, 2018" class="commento-timeago">Friday, May 18, 2018</div></div></div><div id="commento-comment-body-1526591679" class="commento-body"><p>You can just use this code: <code># somehow you got email or username and put it in data associated_users= User.objects.filter(Q(email=data)|Q(username=data)) if associated_users.exists(): for user in associated_users: c = { 'email': user.email, 'domain': request.META['HTTP_HOST'], 'site_name': 'your site', 'uid': urlsafe_base64_encode(force_bytes(user.pk)), 'user': user, 'token': default_token_generator.make_token(user), 'protocol': 'http', } subject_template_name='registration/password_reset_subject.txt' # copied from django/contrib/admin/templates/registration/password_reset_subject.txt to templates directory email_template_name='registration/password_reset_email.html' # copied from django/contrib/admin/templates/registration/password_reset_email.html to templates directory subject = loader.render_to_string(subject_template_name, c) # Email subject *must not* contain newlines subject = ''.join(subject.splitlines()) email = loader.render_to_string(email_template_name, c) send_mail(subject, email, DEFAULT_FROM_EMAIL , [user.email], fail_silently=False)</code></p></div></div></div></div><div id="commento-comment-card-1538633903" style="border-left:2px solid #b2ebe4" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1538633903" class="commento-options"><button id="commento-comment-reply-1538633903" href="#comment-form" onclick='changeValue("fields[reply_to]","1538633903","firoj khan")' title="Reply to firoj khan" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/9fc05004f489667982e79c9855b2ebe4?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="firoj khan"><div id="commento-comment-name-1538633903" class="commento-name">firoj khan</div><div id="commento-comment-subtitle-1538633903" class="commento-subtitle"><div id="commento-comment-timeago-1538633903" title="Thursday, October 4, 2018" class="commento-timeago">Thursday, October 4, 2018</div></div></div><div id="commento-comment-body-1538633903" class="commento-body"><p>it giving error like The reset password link is no longer valid. in mail this link is going <code>http://127.0.0.1:8000/user/reset_password_confirm/(%3FPb'YTNlYWQyYWUtMTAyOC00ZjY1LTgwYTMtMWQ3NThiYjJjOTQ3'%5B0-9A-Za-z%5D+)-(%3FP505-9a4d4776744e45518e0e.+)/</code></p></div><div><div id="commento-comment-card-1546599372" style="border-left:2px solid #3794be" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1546599372" class="commento-options"><button id="commento-comment-reply-1546599372" title="Reply to disqus_ZwWOr4FAus" class="commento-option-button commento-option-reply onhover" style="right:0" href="#comment-form" onclick='changeValue("fields[reply_to]","1538633903","disqus_ZwWOr4FAus")'></button></div><img data-src="https://www.gravatar.com/avatar/23cfc552639d3666cf5c1646f13794be?s=70&r=pg&d=identicon" class="lozad commento-avatar-img"><div id="commento-comment-name-1546599372" class="commento-name">disqus_ZwWOr4FAus</div><div id="commento-comment-subtitle-1546599372" class="commento-subtitle"><div id="commento-comment-timeago-1546599372" title="Friday, January 4, 2019" class="commento-timeago">Friday, January 4, 2019</div></div></div><div id="commento-comment-body-1546599372" class="commento-body"><p>disqus_0GqaZnP8Yj important</p></div></div></div></div><div id="commento-comment-card-1557984365" style="border-left:2px solid #8eded2" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1557984365" class="commento-options"><button id="commento-comment-reply-1557984365" href="#comment-form" onclick='changeValue("fields[reply_to]","1557984365","GMRIT-PUSHPITHA")' title="Reply to GMRIT-PUSHPITHA" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/eb0201253a8e794337facc59558eded2?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="GMRIT-PUSHPITHA"><div id="commento-comment-name-1557984365" class="commento-name">GMRIT-PUSHPITHA</div><div id="commento-comment-subtitle-1557984365" class="commento-subtitle"><div id="commento-comment-timeago-1557984365" title="Thursday, May 16, 2019" class="commento-timeago">Thursday, May 16, 2019</div></div></div><div id="commento-comment-body-1557984365" class="commento-body"><p>While i am doing this coding I got server 500 error. It is not showing successful message. for example message.success (&ldquo;email sent please check&rdquo;)</p></div><div></div></div><div id="commento-comment-card-1570576248" style="border-left:2px solid #b0680b" class="commento-card"><div class="commento-header"><div id="commento-comment-options-1570576248" class="commento-options"><button id="commento-comment-reply-1570576248" href="#comment-form" onclick='changeValue("fields[reply_to]","1570576248","ares19896")' title="Reply to ares19896" class="commento-option-button commento-option-reply onhover" style="right:0"></button></div><img data-src="https://www.gravatar.com/avatar/6e0810b2a9c34aff79f1672519b0680b?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt="ares19896"><div id="commento-comment-name-1570576248" class="commento-name">ares19896</div><div id="commento-comment-subtitle-1570576248" class="commento-subtitle"><div id="commento-comment-timeago-1570576248" title="Tuesday, October 8, 2019" class="commento-timeago">Tuesday, October 8, 2019</div></div></div><div id="commento-comment-body-1570576248" class="commento-body"><p>In registration/password_reset_email.html: <code>{{ domain }}{% url 'reset_password_confirm' uidb64=uid token=token %}</code> I want to show in email, this link is &lsquo;Reset Password&rsquo;. Please help me</p></div><div></div></div></div></div></div></div><label for="sidebar-checkbox" class="sidebar-toggle"></label><script src="/js/lozad.min.80e3c4b0adff5b978e50b76cd36723e3a7e7e7fa231b6e44273ad456df1c597e.js" async></script><script src="/js/bundle.min.ec490d08a8bac8b54509b7b06294f9cb71f4599f666f73bee2c128b31dcee6e5.js" defer="defer"></script><script>if("serviceWorker"in navigator){navigator.serviceWorker.register('/sw.js').then(reg=>{reg.onupdatefound=()=>{reg.installing;};});};</script></body></html>