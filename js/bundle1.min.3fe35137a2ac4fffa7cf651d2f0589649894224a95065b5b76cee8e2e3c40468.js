/*! lozad.js - v1.16.0 - 2020-09-06
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.lozad=e()}(this,function(){"use strict";var g="undefined"!=typeof document&&document.documentMode,f={rootMargin:"0px",threshold:0,load:function(t){if("picture"===t.nodeName.toLowerCase()){var e=t.querySelector("img"),r=!1;null===e&&(e=document.createElement("img"),r=!0),g&&t.getAttribute("data-iesrc")&&(e.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(e.alt=t.getAttribute("data-alt")),r&&t.append(e)}if("video"===t.nodeName.toLowerCase()&&!t.getAttribute("data-src")&&t.children){for(var a=t.children,o=void 0,i=0;i<=a.length-1;i++)(o=a[i].getAttribute("data-src"))&&(a[i].src=o);t.load()}t.getAttribute("data-poster")&&(t.poster=t.getAttribute("data-poster")),t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset"));var n=",";if(t.getAttribute("data-background-delimiter")&&(n=t.getAttribute("data-background-delimiter")),t.getAttribute("data-background-image"))t.style.backgroundImage="url('"+t.getAttribute("data-background-image").split(n).join("'),url('")+"')";else if(t.getAttribute("data-background-image-set")){var d=t.getAttribute("data-background-image-set").split(n),u=d[0].substr(0,d[0].indexOf(" "))||d[0];u=-1===u.indexOf("url(")?"url("+u+")":u,1===d.length?t.style.backgroundImage=u:t.setAttribute("style",(t.getAttribute("style")||"")+"background-image: "+u+"; background-image: -webkit-image-set("+d+"); background-image: image-set("+d+")")}t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded:function(){}};function A(t){t.setAttribute("data-loaded",!0)}var m=function(t){return"true"===t.getAttribute("data-loaded")},v=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return t instanceof Element?[t]:t instanceof NodeList?t:e.querySelectorAll(t)};return function(){var r,a,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=Object.assign({},f,t),i=e.root,n=e.rootMargin,d=e.threshold,u=e.load,g=e.loaded,s=void 0;"undefined"!=typeof window&&window.IntersectionObserver&&(s=new IntersectionObserver((r=u,a=g,function(t,e){t.forEach(function(t){(0<t.intersectionRatio||t.isIntersecting)&&(e.unobserve(t.target),m(t.target)||(r(t.target),A(t.target),a(t.target)))})}),{root:i,rootMargin:n,threshold:d}));for(var c,l=v(o,i),b=0;b<l.length;b++)(c=l[b]).getAttribute("data-placeholder-background")&&(c.style.background=c.getAttribute("data-placeholder-background"));return{observe:function(){for(var t=v(o,i),e=0;e<t.length;e++)m(t[e])||(s?s.observe(t[e]):(u(t[e]),A(t[e]),g(t[e])))},triggerLoad:function(t){m(t)||(u(t),A(t),g(t))},observer:s}}});;"use strict";if(!('IntersectionObserver'in window)){var script=document.createElement("script");script.src="/js/intersection-observer.js";document.getElementsByTagName('head')[0].appendChild(script);}
var observer=lozad();observer.observe();;(function(){if(!document.queryCommandSupported("copy")){return}function d(e,f){e.textContent=f;setTimeout(function(){e.textContent="Copy"},1000)}function c(g){var f=window.getSelection();var e=document.createRange();e.selectNodeContents(g);f.removeAllRanges();f.addRange(e);return f}function b(g){var f=document.createElement("button");f.className="highlight-copy-btn";f.textContent="Copy";var e=g.firstElementChild;f.addEventListener("click",function(){try{var h=c(e);document.execCommand("copy");h.removeAllRanges();d(f,"Copied!")}catch(i){console&&console.log(i);d(f,"Failed :'(")}});g.appendChild(f)}var a=document.getElementsByClassName("highlight");Array.prototype.forEach.call(a,b)})();;if(window.location.hash=="#newsletter-submitted"){var $comTarget=document.getElementById('newsletter-submitted-box');$comTarget.style.display='block';var $comTarget=document.getElementById('newsletter-body');$comTarget.style.display='none';}else if(window.location.hash=="#newsletter-error"){var $comTarget=document.getElementById('newsletter-error');$comTarget.style.display='block';try{var $spinner=document.getElementsByClassName('cover-spin');$spinner.style.display='none';}catch(e){}}
function loadLoader(){var elm=document.createElement('div');elm.setAttribute('class','cover-spin')
document.body.appendChild(elm);}
var elm=document.getElementById("commento-form");if(elm){elm.onsubmit=loadLoader;}
function displayComments(){var commento=document.getElementById('commento-comment');if(commento){commento.style.display='block';}}
var elem=document.getElementById('commento');var observer=new IntersectionObserver(function(entries){var entry=entries[0];if(entry.intersectionRatio>0){displayComments();colorComments();}});if(elem){observer.observe(elem);}
var showComment=document.getElementById('show-comment-btn');function showComments(){displayComments();location.hash="#comment-headline";}
if(showComment){showComment.addEventListener('click',showComments);}
function colorComments(){var comments=document.querySelectorAll('[id^="commento-comment-card-"]');comments.forEach(function(comm){console.log(comm);var commId=comm.id.replace('commento-comment-card-','#').substring(0,7);comm.style.borderLeftColor=commId;})};function setData(name,value){try{localStorage.setItem(name,value);}catch(e){value=encodeURIComponent(value)
document.cookie=name+"="+(value||"")+";expires=expires=Fri, 31 Dec 9999 23:59:59 UTC;path=/";}}
function getData(name){try{return localStorage.getItem(name);}catch(e){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return decodeURIComponent(c.substring(nameEQ.length,c.length));}
return null;}}
function eraseData(name){try{return localStorage.removeItem(name);}catch(e){document.cookie=name+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';}};if(window.location.hash=="#comment-submitted"){var $comTarget=document.getElementById('comment-submitted-box');$comTarget.style.display='block';}else if(window.location.hash=="#comment-error"){var $comTarget=document.getElementById('comment-error');$comTarget.style.display='block';try{var $spinner=document.getElementsByClassName('cover-spin');$spinner.style.display='none';}catch(e){}}
function storeForm(){var commentParent=document.getElementById('comment-parent');var comment=document.getElementById('commento-textarea-root');var getEmail=document.getElementById('commento-anonymous-checkbox-root');setData('comment-parent',commentParent.value);setData('comment',comment.value);setData('getemail',getEmail.checked);}
function updateForm(){var commentParentField=document.getElementById('comment-parent');var commentField=document.getElementById('commento-textarea-root');var checkboxField=document.getElementById('commento-anonymous-checkbox-root');var commentParentValue=getData('comment-parent');var commentValue=getData('comment');var emailValue=getData('getemail');var success;if(commentValue){commentParentField.value=commentParentValue;commentField.value=commentValue;if(emailValue==true||emailValue=='true'){checkboxField.checked=true;}else{checkboxField.checked=false;}
success=true;}else{success=false;}
eraseData('comment-parent');eraseData('comment');eraseData('getemail');return success;}
function getCode(){var code;if(!URLSearchParams){var getUrlParams=function getUrlParams(){var result={};var params=(window.location.search.split('?')[1]||'').split('&');for(var param in params){if(params.hasOwnProperty(param)){var paramParts=params[param].split('=');result[paramParts[0]]=decodeURIComponent(paramParts[1]||"");}}
return result;};code=getUrlParams().code;}else{var urlParams=new URLSearchParams(window.location.search);code=urlParams.get('code');}
return code;}
function submitComment(event){var code=getCode();document.getElementById('commento-submit-button-root').disabled=true;if(!code){event.preventDefault();storeForm();var redirect_uri=window.location.href;window.location.href="https://github.com/login/oauth/authorize?scope=user:email&client_id=bc27cd2859301269f316&redirect_uri="+redirect_uri;}else{event.currentTarget.submit();}}
var commentForm=document.getElementById('comment-form')||false
if(commentForm){commentForm.addEventListener('submit',submitComment);};function submitFormWithCode(){var code=getCode();var finalUrl="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/custom/ruddra/ruddra.comments/master/comments/";if(code){var elm=document.createElement('div');elm.setAttribute('class','cover-spin')
document.body.appendChild(elm);var updated=updateForm();if(!updated){window.location.href="#comment-error";return null;}
var form=document.getElementById('comment-form');form.action=finalUrl+code;form.submit();}}
submitFormWithCode();function toggleMarkDownTable(){var x=document.getElementById("commento-markdown-help-root");if(x.style.display==="none"){x.style.display="block";}else{x.style.display="none";}}
function increaseLikeCounter(){var counter=document.getElementById("like-count");var value=parseInt(counter.innerText,10);if(isNaN(value)){setTimeout(function(){increaseLikeCounter();},0);}else{value++;counter.innerText=value;var target_share=document.getElementById("loved-count");var love_share=document.getElementById("love-share");love_share.style.cursor='auto';love_share.removeEventListener('click',loveArticle);target_share.style.textShadow="-0.02ex 0 #222,0.02ex 0 #222";}}
function loveArticle(){if(alreadyLiked()==true){return;}
storeLiked();makePink();submitLike();}
function alreadyLiked(){return isNaN(getData("liked-"+getSlug()));}
function getSlug(){return window.location.pathname.split('/').reverse()[1];}
function createCORSRequest(method,url){var xhr=new XMLHttpRequest();if("withCredentials"in xhr){xhr.open(method,url,true);}else if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();xhr.open(method,url);}else{xhr=null;}
return xhr;}
function makeHttpRequest(retryCount){var slug=getSlug();var dictionary={"options[parent]":slug,"options[slug]":slug,"options[origin]":"https://ruddra.com/likes","fields[email]":window.location.href};var params=[];Object.keys(dictionary).forEach(function(key){var param=key+"="+dictionary[key];params.push(param);});var url="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/github/ruddra/ruddra.likes/master/comments/";var http=createCORSRequest("POST",url);http.setRequestHeader("Content-type","application/x-www-form-urlencoded");http.setRequestHeader("Access-Control-Allow-Origin","*");http.onload=function(){if(this.status===200){increaseLikeCounter();makeRed();}else if(retryCount>0){setTimeout(function(){makeHttpRequest(retryCount--);},1000);}};http.onerror=function(){setTimeout(function(){makeHttpRequest(retryCount--);},1000);};http.send(params.join('&'));}
function submitLike(){var retryCount=5;makeHttpRequest(retryCount);}
function storeLiked(){setData("liked-"+getSlug(),"liked");}
function makeRed(){var target_share=document.getElementById("love-share-sign");target_share.style.fill="#ff0000";}
function makePink(){var target_share=document.getElementById("love-share-sign");target_share.style.fill="#ff8fc7";}
function showLiked(){if(alreadyLiked()==true){makeRed();}}
showLiked();var listener_=document.getElementById("love-share");if(listener_){listener_.addEventListener('click',loveArticle);}
function changeValue(elementName,newValue,name){document.getElementsByName(elementName)[0].value=newValue;var elem=document.getElementById('comment-headline');elem.innerHTML="<b>Reply To: "+name+"</b>";elem.scrollIntoView();};;function addSnackbar(msg,btn1,btn2,id,addBr){var snackBar=document.createElement('div');snackBar.setAttribute('id',id);snackBar.setAttribute('class','show');var textNode=document.createTextNode(msg);snackBar.appendChild(textNode);if(addBr){var br1=document.createElement('br');var br2=document.createElement('br');snackBar.appendChild(br1)
snackBar.appendChild(br2)}
var span=document.createElement('span');span.appendChild(btn1);span.appendChild(btn2);snackBar.appendChild(span);document.body.appendChild(snackBar);}
function showReloadAlert(){var reloadBtn=document.createElement('a');var txt=document.createTextNode("Click here to refresh");reloadBtn.setAttribute('class','clsbtnreload');reloadBtn.appendChild(txt);var reloadTxt=document.createElement('span')
reloadTxt.appendChild(reloadBtn);var txt=document.createTextNode(" the page");reloadTxt.appendChild(txt);reloadBtn.onclick=function(){var alert=document.getElementById('alert');alert.remove()
window.location.reload();};var closeBtn=document.createElement('span');closeBtn.setAttribute('class',"closebtn");closeBtn.innerHTML="&times;";closeBtn.onclick=function(){var alert=document.getElementById('alert');alert.remove()}
addSnackbar("New contents are available. ",reloadTxt,closeBtn,'alert',false);}
function showPrivacy(){setTimeout(function(){var nameEQ="cookieSeen";if(!getData(nameEQ)){var privacyAnch=document.createElement('a');privacyAnch.setAttribute('href','/privacy/');var privacyTextNode=document.createTextNode("More Details");privacyAnch.appendChild(privacyTextNode);privacyAnch.setAttribute('href','/privacy/');var closeAnch=document.createElement('a');closeAnch.onclick=function(){var snackBar=document.getElementById('snackbar');snackBar.remove()}
closeAnch.setAttribute('id','close-privacy');var closeTextNode=document.createTextNode("OK");closeAnch.appendChild(closeTextNode);addSnackbar("Cookies are served on this site to analyze traffic, remember your preferences and optimize your experience.",privacyAnch,closeAnch,'snackbar',true);setData(nameEQ,true)}
window.dataLayer=window.dataLayer||[{"gaPropertyId":"UA-58095062-1"}];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-WQRZ19BYG6');(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='/js/tags.js?id='+i+dl+'&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','G-WQRZ19BYG6');},5000)}
showPrivacy();var currentThemeName="currentTheme";function toggleTheme(){var theme=getData(currentThemeName);if(theme&&theme=='dark'){eraseData(currentThemeName);setData(currentThemeName,'light')}else if(theme&&theme=='light'){eraseData(currentThemeName);setData(currentThemeName,'dark')}else if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches){setData(currentThemeName,'light')}else{setData(currentThemeName,'dark')}}
var currentTheme=getData(currentThemeName);if(currentTheme==null&&(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)){document.body.classList.add("dark-theme");setData(currentThemeName,'dark')}else if(getData(currentThemeName)=='dark'){document.body.classList.add("dark-theme");}else{try{document.body.classList.remove("dark-theme");}catch(e){}
setData(currentThemeName,'light')}
const btn=document.querySelector(".btn-toggle-thm");btn.addEventListener("click",function(){document.body.classList.toggle("dark-theme");toggleTheme();});