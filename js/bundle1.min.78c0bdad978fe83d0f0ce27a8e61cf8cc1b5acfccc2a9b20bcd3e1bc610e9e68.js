/*! lozad.js - v1.15.0 - 2020-05-23
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */
function loadLoader(){var e=document.createElement("div");e.setAttribute("class","cover-spin"),document.body.appendChild(e)}function displayComments(){var e=document.getElementById("commento-comment");e&&(e.style.display="block")}function showComments(){displayComments(),location.hash="#comment-headline"}function setCookie(e,t){document.cookie=e+"="+(t||"")+";expires=expires=Fri, 31 Dec 9999 23:59:59 UTC;path=/"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function eraseCookie(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function storeForm(){var e=document.getElementById("comment-parent"),t=document.getElementById("commento-textarea-root"),o=document.getElementById("commento-anonymous-checkbox-root"),n=encodeURIComponent(e.value),r=encodeURIComponent(t.value),i=encodeURIComponent(o.value);setCookie("comment-parent",n),setCookie("comment",r),setCookie("getemail",i)}function updateForm(){var e,t=document.getElementById("comment-parent"),o=document.getElementById("commento-textarea-root"),n=document.getElementById("commento-anonymous-checkbox-root"),r=decodeURIComponent(getCookie("comment-parent")),i=decodeURIComponent(getCookie("comment")),a=decodeURIComponent(getCookie("getemail"));return i?(t.value=r,o.value=i,n.value=a,e=!0):e=!1,eraseCookie("comment-parent"),eraseCookie("comment"),eraseCookie("getemail"),e}function getCode(){var e;if(URLSearchParams){e=new URLSearchParams(window.location.search).get("code")}else{e=function(){var e={},t=(window.location.search.split("?")[1]||"").split("&");for(var o in t)if(t.hasOwnProperty(o)){var n=t[o].split("=");e[n[0]]=decodeURIComponent(n[1]||"")}return e}().code}return e}function submitComment(e){var t=getCode();if(document.getElementById("commento-submit-button-root").disabled=!0,t)e.currentTarget.submit();else{e.preventDefault(),storeForm();var o=window.location.href;window.location.href="https://github.com/login/oauth/authorize?scope=user:email&client_id=bc27cd2859301269f316&redirect_uri="+o}}function submitFormWithCode(){var e=getCode();if(e){var t=document.createElement("div");t.setAttribute("class","cover-spin"),document.body.appendChild(t);if(!updateForm())return window.location.href="#comment-error",null;var o=document.getElementById("comment-form");o.action="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/custom/ruddra/ruddra.comments/master/comments/"+e,o.submit()}}function toggleMarkDownTable(){var e=document.getElementById("commento-markdown-help-root");"none"===e.style.display?e.style.display="block":e.style.display="none"}function increaseLikeCounter(){var e=document.getElementById("like-count"),t=parseInt(e.innerText,10);if(isNaN(t))setTimeout(function(){increaseLikeCounter()},0);else{t++,e.innerText=t;var o=document.getElementById("loved-count"),n=document.getElementById("love-share");n.style.cursor="auto",n.removeEventListener("click",loveArticle),o.style.textShadow="-0.02ex 0 #222,0.02ex 0 #222",o.style.color="#222"}}function loveArticle(){1!=alreadyLiked()&&(storeLiked(),makePink(),submitLike())}function alreadyLiked(){return isNaN(getCookie("liked-"+getSlug()))}function getSlug(){return window.location.pathname.split("/").reverse()[1]}function createCORSRequest(e,t){var o=new XMLHttpRequest;return"withCredentials"in o?o.open(e,t,!0):"undefined"!=typeof XDomainRequest?(o=new XDomainRequest,o.open(e,t)):o=null,o}function makeHttpRequest(e){var t=getSlug(),o={"options[parent]":t,"options[slug]":t,"options[origin]":"https://ruddra.com/likes","fields[email]":window.location.href},n=[];Object.keys(o).forEach(function(e){var t=e+"="+o[e];n.push(t)});var r=createCORSRequest("POST","https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/github/ruddra/ruddra.likes/master/comments/");r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Access-Control-Allow-Origin","*"),r.onload=function(){200===this.status?(increaseLikeCounter(),makeRed()):e>0&&setTimeout(function(){makeHttpRequest(e--)},1e3)},r.onerror=function(){setTimeout(function(){makeHttpRequest(e--)},1e3)},r.send(n.join("&"))}function submitLike(){makeHttpRequest(5)}function storeLiked(){setCookie("liked-"+getSlug(),"liked")}function makeRed(){document.getElementById("love-share-sign").style.fill="#ff0000"}function makePink(){document.getElementById("love-share-sign").style.fill="#ff8fc7"}function showLiked(){1==alreadyLiked()&&(makeRed(),increaseLikeCounter())}function changeValue(e,t,o){document.getElementsByName(e)[0].value=t;var n=document.getElementById("comment-headline");n.innerHTML="<b>Reply To: "+o+"</b>",n.scrollIntoView()}function addSnackbar(){var e=document.createElement("div"),t=document.createElement("br");e.setAttribute("id","snackbar"),e.setAttribute("class","show");var o=document.createTextNode("Cookies are served on this site to analyze traffic, remember your preferences and optimize your experience.");e.appendChild(o),e.appendChild(t);var n=document.createElement("span");n.setAttribute("class","pull-right");var r=document.createElement("a");r.setAttribute("href","/privacy");var i=document.createTextNode("More Details");r.appendChild(i),r.setAttribute("href","/privacy"),n.appendChild(r);var a=document.createElement("a");a.onclick=function(){e.remove()},a.setAttribute("id","close-privacy");var c=document.createTextNode("OK");a.appendChild(c),n.appendChild(a),e.appendChild(n),document.body.appendChild(e)}function checkCookeExists(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var o=e[t];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf("cookieSeen="))return o.substring("cookieSeen=".length,o.length)}return null}function showPrivacy(){setTimeout(function(){checkCookeExists()||(addSnackbar(),document.cookie="cookieSeen=true; expires=; path=/"),function(e,t,o,n,r,i,a){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,i=t.createElement(o),a=t.getElementsByTagName(o)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(i,a)}(window,document,"script",0,"ga"),ga("create","UA-58095062-1","auto"),ga("send","pageview")},5e3)}if(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.lozad=t()}(this,function(){"use strict";function e(e){e.setAttribute("data-loaded",!0)}var t="undefined"!=typeof document&&document.documentMode,o={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()){var o=document.createElement("img");t&&e.getAttribute("data-iesrc")&&(o.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(o.alt=e.getAttribute("data-alt")),e.append(o)}if("video"===e.nodeName.toLowerCase()&&!e.getAttribute("data-src")&&e.children){for(var n=e.children,r=void 0,i=0;i<=n.length-1;i++)(r=n[i].getAttribute("data-src"))&&(n[i].src=r);e.load()}e.getAttribute("data-poster")&&(e.poster=e.getAttribute("data-poster")),e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset"));var a=",";if(e.getAttribute("data-background-delimiter")&&(a=e.getAttribute("data-background-delimiter")),e.getAttribute("data-background-image"))e.style.backgroundImage="url('"+e.getAttribute("data-background-image").split(a).join("'),url('")+"')";else if(e.getAttribute("data-background-image-set")){var c=e.getAttribute("data-background-image-set").split(a),d=c[0].substr(0,c[0].indexOf(" "))||c[0];d=-1===d.indexOf("url(")?"url("+d+")":d,1===c.length?e.style.backgroundImage=d:e.setAttribute("style",(e.getAttribute("style")||"")+"background-image: "+d+"; background-image: -webkit-image-set("+c+"); background-image: image-set("+c+")")}e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded:function(){}},n=function(e){return"true"===e.getAttribute("data-loaded")};return function(){var t,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=Object.assign({},o,a),d=c.root,s=c.rootMargin,m=c.threshold,l=c.load,u=c.loaded,g=void 0;return"undefined"!=typeof window&&window.IntersectionObserver&&(g=new IntersectionObserver((t=l,r=u,function(o,i){o.forEach(function(o){(0<o.intersectionRatio||o.isIntersecting)&&(i.unobserve(o.target),n(o.target)||(t(o.target),e(o.target),r(o.target)))})}),{root:d,rootMargin:s,threshold:m})),{observe:function(){for(var t=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)}(i,d),o=0;o<t.length;o++)n(t[o])||(g?g.observe(t[o]):(l(t[o]),e(t[o]),u(t[o])))},triggerLoad:function(t){n(t)||(l(t),e(t),u(t))},observer:g}}}),!("IntersectionObserver"in window)){var script=document.createElement("script");script.src="/js/intersection-observer.js",document.getElementsByTagName("head")[0].appendChild(script)}var observer=lozad();if(observer.observe(),function(){function e(e,t){e.textContent=t,setTimeout(function(){e.textContent="Copy"},1e3)}function t(e){var t=window.getSelection(),o=document.createRange();return o.selectNodeContents(e),t.removeAllRanges(),t.addRange(o),t}function o(o){var n=document.createElement("button");n.className="highlight-copy-btn",n.textContent="Copy";var r=o.firstElementChild;n.addEventListener("click",function(){try{var o=t(r);document.execCommand("copy"),o.removeAllRanges(),e(n,"Copied!")}catch(t){console&&console.log(t),e(n,"Failed :'(")}}),o.appendChild(n)}if(document.queryCommandSupported("copy")){var n=document.getElementsByClassName("highlight");Array.prototype.forEach.call(n,o)}}(),"#newsletter-submitted"==window.location.hash){var $comTarget=document.getElementById("newsletter-submitted-box");$comTarget.style.display="block";var $comTarget=document.getElementById("newsletter-body");$comTarget.style.display="none"}else if("#newsletter-error"==window.location.hash){var $comTarget=document.getElementById("newsletter-error");$comTarget.style.display="block"}var elm=document.getElementById("commento-form");elm&&(elm.onsubmit=loadLoader);var elem=document.getElementById("commento"),observer=new IntersectionObserver(function(e){e[0].intersectionRatio>0&&displayComments()});elem&&observer.observe(elem);var showComment=document.getElementById("show-comment-btn");if(showComment&&showComment.addEventListener("click",showComments),"#comment-submitted"==window.location.hash){var $comTarget=document.getElementById("comment-submitted-box");$comTarget.style.display="block"}else if("#comment-error"==window.location.hash){var $comTarget=document.getElementById("comment-error");$comTarget.style.display="block"}document.getElementById("comment-form").addEventListener("submit",submitComment),submitFormWithCode(),showLiked();var listener_=document.getElementById("love-share");listener_&&listener_.addEventListener("click",loveArticle),showPrivacy();