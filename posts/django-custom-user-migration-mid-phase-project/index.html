<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en><head><meta charset=utf-8><meta name=author content="Arnab Kumar Shil"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=theme-color content="#000000"><meta property="fb:app_id" content="668971647169067"><meta name=yandex-verification content="3ccce49727df78e2"><link rel=copyright href=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/#copyright><link rel=article:author href=https://ruddra.com/about><meta name=robots content="index,follow"><meta name=referrer content="unsafe-url"><meta property="og:url" content="https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/"><meta name=keywords content="Django,Migration,Models,Blog"><title>Django: Changing User Model in Mid-Project</title><meta name=twitter:label1 value="Reading time"><meta name=twitter:data1 value="3 Minutes"><meta name=description content="Every now and then I see some questions pop up in StackOverflow with title:
 ValueError: Related model &amp;lsquo;app.User&amp;rsquo; cannot be resolved
 This is a very common issue and pops up when the …"><link rel=preload as=font type=font/woff2 href=/fonts/merriweather-v21-latin-regular.woff2 crossorigin><link rel=preload as=font type=font/woff2 href=/fonts/pt-sans-v11-latin-regular.woff2 crossorigin><link rel=preload as=font type=font/woff2 href=/fonts/pt-sans-v11-latin-700.woff2 crossorigin><link rel=preload as=font type=font/woff2 href=/fonts/merriweather-v21-latin-700.woff2 crossorigin><style>@font-face{font-family:merriweather;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/merriweather-v21-latin-regular.eot);src:local("Merriweather Regular"),local("Merriweather-Regular"),url(/fonts/merriweather-v21-latin-regular.eot?#iefix)format("embedded-opentype"),url(/fonts/merriweather-v21-latin-regular.woff2)format("woff2"),url(/fonts/merriweather-v21-latin-regular.woff)format("woff"),url(/fonts/merriweather-v21-latin-regular.ttf)format("truetype"),url(/fonts/merriweather-v21-latin-regular.svg#Merriweather)format("svg")}@font-face{font-family:pt sans;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/pt-sans-v11-latin-regular.eot);src:local("PT Sans"),local("PTSans-Regular"),url(/fonts/pt-sans-v11-latin-regular.eot?#iefix)format("embedded-opentype"),url(/fonts/pt-sans-v11-latin-regular.woff2)format("woff2"),url(/fonts/pt-sans-v11-latin-regular.woff)format("woff"),url(/fonts/pt-sans-v11-latin-regular.ttf)format("truetype"),url(/fonts/pt-sans-v11-latin-regular.svg#PTSans)format("svg")}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:Merriweather,Georgia,times new roman,serif;font-weight:400;font-size:16px;line-height:1.8}body{color:#222;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a{color:#268bd2;text-decoration:none}a strong{color:inherit}a:hover,a:focus{text-decoration:underline}h1,h2,h3,h4,h5,h6{font-family:pt sans,Helvetica,Arial,sans-serif;margin-bottom:.5rem;line-height:1.25;letter-spacing:-.025rem;color:#303030;font-weight:400}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}h3{margin-top:1.5rem;font-size:1.25rem}h4,h5,h6{margin-top:1rem;font-size:1rem}p{margin-top:0;margin-bottom:1rem}strong{color:#303030}ul,ol,dl{margin-top:0;margin-bottom:1rem}dt{font-weight:700}dd{margin-bottom:.5rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr{font-size:85%;font-weight:700;color:#555;text-transform:uppercase}abbr[title]{cursor:help;border-bottom:1px dotted #e5e5e5}code,pre{font-family:Menlo,Monaco,courier new,monospace}code{padding:.25em .5em;font-size:85%;color:#bf616a;background-color:#f9f9f9;border-radius:3px}pre{display:block;margin-top:0;margin-bottom:1rem;padding:1rem;font-size:.8rem;line-height:1.4;white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word;background-color:#f9f9f9}pre code{padding:0;font-size:100%;color:inherit;background-color:transparent}.highlight{margin-bottom:1rem;border-radius:4px}.highlight pre{margin-bottom:0}.gist .gist-file{font-family:Menlo,Monaco,courier new,monospace}.gist .markdown-body{padding:15px}.gist pre{padding:0;background-color:transparent}.gist .gist-file .gist-data{font-size:.8rem;line-height:1.4}.gist code{padding:0;color:inherit;background-color:transparent;border-radius:0}blockquote{padding:.5rem 1rem;margin:.8rem 0;color:#7a7a7a;border-left:.25rem solid #e5e5e5}blockquote p:last-child{margin-bottom:0}@media(min-width:30em){blockquote{padding-right:5rem;padding-left:1.25rem}}img{display:block;max-width:100%;margin:0 0 1rem;border-radius:5px}table{margin-bottom:1rem;width:100%;border:1px solid #e5e5e5;border-collapse:collapse}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}.lead{font-size:1.25rem;font-weight:300}.message{margin-bottom:1rem;padding:1rem;color:#717171;background-color:#f9f9f9}.container{max-width:38rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.masthead{padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem;background:#202020}.masthead-title{margin-top:0;margin-bottom:0;color:#505050;font-size:20px}.masthead-title a{color:#505050}.masthead-title small{font-size:75%;font-weight:400;color:silver;letter-spacing:0}.page,.post{margin-bottom:4em}.page-title,.post-title,.post-title a{color:#303030}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-.5rem;color:#736d6d;font-family:pt sans}.related{padding-top:2rem;padding-bottom:2rem;border-top:1px solid #eee}.related-posts{padding-left:0;list-style:none}.related-posts h3{margin-top:0}.related-posts li small{font-size:75%;color:#999}.related-posts li a:hover{color:#268bd2;text-decoration:none}.tag-links-a{color:#736d6d}.related-posts li a:hover small{color:inherit}.pagination{overflow:hidden;margin-left:-1rem;margin-right:-1rem;color:#ccc;text-align:center}.pagination-item{display:block;padding:1rem;border:1px solid #eee}.pagination-item:first-child{margin-bottom:-1px}a.pagination-item:hover{background-color:#f5f5f5}#snackbar{font-family:pt sans,Helvetica,Arial,sans-serif;visibility:hidden;min-width:250px;margin:auto;background-color:#333;color:#fff;text-align:center;border-radius:5px;padding:10px;position:fixed;z-index:1000;bottom:30px;font-size:13px;left:50%;transform:translateX(-50%)}.sidebar-checkbox{position:absolute;opacity:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sidebar{position:fixed;top:0;bottom:0;left:-14rem;width:14rem;visibility:hidden;overflow-y:auto;font-family:pt sans,Helvetica,Arial,sans-serif;font-size:.875rem;color:rgba(255,255,255,.6);background-color:#202020;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out}.sidebar-toggle{position:absolute;top:.8rem;left:1rem;display:block;padding:.25rem .75rem;color:#505050;background-color:#fff;border-radius:.25rem;cursor:pointer;line-height:1.5}.sidebar-toggle{position:fixed;top:.8rem;left:1rem;display:block;padding-left:.6rem;padding-right:.6rem;padding-top:.25rem;padding-bottom:.15rem;color:#fff;background-color:#555;border-radius:.25rem;cursor:pointer}.sidebar-toggle:before{display:inline-block;width:1rem;height:.75rem;content:"";background-image:-webkit-linear-gradient(to bottom,#fff,#fff 20%,#555 20%,#555 40%,#fff 40%,#fff 60%,#555 60%,#555 80%,#fff 80%,#fff 100%);background-image:-moz-linear-gradient(to bottom,#fff,#fff 20%,#555 20%,#555 40%,#fff 40%,#fff 60%,#555 60%,#555 80%,#fff 80%,#fff 100%);background-image:-ms-linear-gradient(to bottom,#fff,#fff 20%,#555 20%,#555 40%,#fff 40%,#fff 60%,#555 60%,#555 80%,#fff 80%,#fff 100%);background-image:linear-gradient(to bottom,#fff,#fff 20%,#555 20%,#555 40%,#fff 40%,#fff 60%,#555 60%,#555 80%,#fff 80%,#fff 100%)}.search-form{max-height:41px;display:none;width:108%;margin-bottom:2px;font-weight:200}.masthead-search-form{margin-top:-28px;font-weight:200}.pull-right{float:right}.tftextinput{height:28px;border-radius:2px;font-size:20px;border-style:none;padding-top:4px;padding-bottom:4px;max-width:200px;margin-right:2px;padding-right:29px}.tfbutton{margin:0;padding-right:25px;font-size:14px;outline:none;cursor:pointer;text-align:center;text-decoration:none;margin-top:-10px;margin-left:-37px;background:0 0;border:none}.tfbutton svg{padding-top:4px;margin-bottom:-4px;margin-right:-20px}.tfbutton svg:hover{fill:#6e6f70}.tfbutton::-moz-focus-inner{border:0}input,button,label,textarea{font-family:pt sans,Helvetica,Arial,sans-serif}.wrap,.sidebar,.sidebar-toggle{-webkit-backface-visibility:hidden;-ms-backface-visibility:hidden;backface-visibility:hidden}.post .home-title{font-size:32px}.photo-credit{text-align:center;margin-bottom:3px;margin-top:-10px;color:#736d6d;font-size:12px;font-family:pt sans,Helvetica,Arial,sans-serif}.post p{text-align:justify}.img-container{overflow:hidden;max-height:350px;margin-bottom:20px;display:flex;width:100%}.img-container img,.img-container amp-img{border-radius:0;width:100%;align-self:center}@media(min-width:30em){.pagination{margin:3rem 0}.pagination-item{float:left;width:50%}.pagination-item:first-child{margin-bottom:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination-item:last-child{margin-left:-1px;border-top-right-radius:4px;border-bottom-right-radius:4px}}@media screen and (max-width:48em){.masthead-search-form{display:none}.pull-right{display:none}.sidebar-icons{margin-top:-5%;margin-bottom:-5%}.masthead-title{text-align:center}.masthead-title small{display:inline-block}.img-container{margin-bottom:0}.sidebar-toggle{padding-top:.2rem;padding-bottom:.2rem}.photo-credit{margin-top:0}}</style><link rel=stylesheet href=https://ruddra.com/css/bundle.min.a56e80db1aa2ca800caf11e773dc68caf9031f7d6030249cd6fb7a2cd6658ed1.css media=print onload="this.media='all';this.onload=null;"><link rel=amphtml type=text/html href=https://ruddra.com/amp/posts/django-custom-user-migration-mid-phase-project/><link rel=alternate type=application/rss+xml href=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/index.xml><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon.png><link rel="shortcut icon" href=/favicon.ico><link rel=icon href=https://ruddra.com/logo.png><link rel=alternate type=application/rss+xml title=RSS href=/sitemap.xml><link rel=search href=/opensearch.xml title="Search at Ruddra" type=application/opensearchdescription+xml><meta name=generator content="Hugo 0.70.0"><meta name=twitter:card content="summary_large_image"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="Ruddra.com | Blog by Arnab Kumar Shil"><meta property="article:publisher" content="https://ruddra.com"><meta property="article:section" content="Bulletin"><meta property="article:published_time" content="3016-01-03T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-02T00:00:00.00Z"><meta property="og:updated_time" content="2020-06-02T00:00:00.00Z"><meta property="og:image" content="https://ruddra.com/content/images/2020/04/project.jpg"><meta property="og:image:secure_url" content="https://ruddra.com/content/images/2020/04/project.jpg"><meta name=revised content="Ruddra.com, 07/07/2066"><meta property="og:image:width" content="720"><meta property="og:image:height" content="350"><meta name=twitter:site content="@ruddra"><meta name=twitter:creator content="@ruddra"><meta name=twitter:title content="Django: Changing User Model in Mid-Project"><meta name=twitter:description content="Every now and then I see some questions pop up in StackOverflow with title:
 ValueError: Related model &amp;lsquo;app.User&amp;rsquo; cannot be resolved
 This is a very common issue and pops up when the …"><meta property="og:type" content="Article"><meta property="og:title" content="Django: Changing User Model in Mid-Project"><meta property="og:description" content="Every now and then I see some questions pop up in StackOverflow with title:
 ValueError: Related model &amp;lsquo;app.User&amp;rsquo; cannot be resolved
 This is a very common issue and pops up when the …"><meta name=twitter:image content="https://ruddra.com/content/images/2020/04/project.jpg"><meta name=twitter:image:src content="https://ruddra.com/content/images/2020/04/project.jpg"><meta property="article:tag" content="django"><meta property="article:tag" content="migration"><meta property="article:tag" content="models"><meta property="article:tag" content="ruddra"><script type=application/ld+json>{"@context":"http://schema.org","@type":"NewsArticle","identifier":"django-custom-user-migration-mid-phase-project","headline":"Django: Changing User Model in Mid-Project","keywords":["Django","Migration","Models","Blog"],"url":"https:\/\/ruddra.com\/posts\/django-custom-user-migration-mid-phase-project\/","dateCreated":"2019-01-03T00:00:00.00Z","datePublished":"2019-01-03T00:00:00.00Z","dateModified":"2020-06-02T00:00:00.00Z","articleBody":"Every now and then I see some questions pop up in StackOverflow with title:\n ValueError: Related model \u0026amp;lsquo;app.User\u0026amp;rsquo; cannot be resolved\n This is a very common issue and pops up when the …","mainEntityOfPage":"https:\/\/ruddra.com\/posts\/django-custom-user-migration-mid-phase-project\/","image":{"@type":"ImageObject","url":"https:\/\/ruddra.com\/content\/images\/2020\/04\/project.jpg","height":300,"width":750},"creator":["Arnab Kumar Shil"],"author":{"@type":"Person","name":"Arnab Kumar Shil","url":"https://ruddra.com"},"wordCount":"563","commentCount":"6","copyrightYear":"2019","discussionUrl":"https:\/\/ruddra.com\/posts\/django-custom-user-migration-mid-phase-project\/#comment-headline","isFamilyFriendly":"true","maintainer":{"@type":"Person","name":"Arnab Kumar Shil","url":"https://ruddra.com"},"publisher":{"@type":"Organization","name":"Ruddra.com | Blog by Arnab Kumar Shil","url":"https://ruddra.com","logo":{"@type":"ImageObject","url":"https:\/\/ruddra.com\/logo.png"}},"thumbnailUrl":"https:\/\/ruddra.com\/content\/images\/2020\/04\/project.jpg"}</script></head><body><div id=cover-spin></div><input type=checkbox class=sidebar-checkbox id=sidebar-checkbox><div class=sidebar id=sidebar><div class=sidebar-item><img data-src=/avatar.jpg src="data:image/jpeg;base64,/9j/2wCEABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2MBERISGBUYLxoaL2NCOEJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY//AABEIABQAFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AK2quHuEbGMHq23n5T/hVHTj9qnESPG+MsoLEYGCcVc8XXzSWUMIjRQz5JVjxgf/AF65q1ne2uI5ocb1YHHr7Vmk7GraudimnX+0FbXcDyOR/iKd/Z+o/wDPn+o/xqy7ozZMAJ9QoNN3R/8APuP++K5+Z9jYxtXUPYMGzhWJHPopNZnhaCO5163SVdy/Mce4UkfyrU1T/jxk+rf+gNWf4O/5GK3+jf8AoJrqRhLc78wRDjywcevNHkxf88k/KpH+9SUrILn/2Q==" class=lozad alt=avatar width=175px height=175px><p>Hi! I am Arnab, a full stack developer specializing in <b><a href=/tags/python/>Python</a></b>,
<b><a href=/tags/django/>Django</a></b>, <b><a href=/tags/docker/>Docker</a></b>, <b><a href=/tags/reactjs/>React</a></b>, <b><a href=/tags/openshift/>OpenShift</a></b>.</p><p class=sidebar-icons><a class=icon-side-bar href=https://stackoverflow.com/users/2696165/ruddra target=_blank rel="noopener me" title=stackoverflow><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="10 10 100 100" fill="currentcolor" class="feather"><path d="M84.4 93.8V70.6h7.7v30.9H22.6V70.6h7.7v23.2z"/><path d="M38.8 68.4l37.8 7.9 1.6-7.6-37.8-7.9-1.6 7.6zm5-18 35 16.3 3.2-7-35-16.4-3.2 7.1zm9.7-17.2 29.7 24.7 4.9-5.9-29.7-24.7-4.9 5.9zm19.2-18.3-6.2 4.6 23 31 6.2-4.6-23-31zM38 86h38.6v-7.7H38V86z"/></svg></a><a class=icon-side-bar href=https://facebook.com/ruddra.blog/ target=_blank rel="noopener me" title=facebook><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg></a><a class=icon-side-bar href=https://twitter.com/ruddraarnab target=_blank rel="noopener me" title=twitter><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a class=icon-side-bar href=https://www.linkedin.com/in/ruddraarnab target=_blank rel="noopener me" title=linkedin><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a class=icon-side-bar href=https://github.com/ruddra target=_blank rel="noopener me" title=github><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></p></div><nav class=sidebar-nav><a class=sidebar-nav-item href=/>Home</a>
<a class=sidebar-nav-item href=/about/>About Me</a>
<a class=sidebar-nav-item href=/privacy/>Privacy
Policy</a>
<a class=sidebar-nav-item href=/contact/>Contact
Me</a><form target=_top class="sidebar-nav-item search-form" method=get action=/search><input type=text class=tftextinput name=q size=21 maxlength=120><button type=submit class=tfbutton><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="rgb(155,155,155)"><path d="M9.145 18.29c-5.042.0-9.145-4.102-9.145-9.145S4.103.0 9.145.0s9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321.0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"/></svg></button></form></nav><div class=sidebar-item id=copyright><p>&copy; 2020 All rights reserved &#183; <a href=/posts/index.xml><svg class="rss-feed" xmlns="http://www.w3.org/2000/svg" width="10" height="9" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796.0-3.252-1.454-3.252-3.248s1.456-3.248 3.252-3.248c1.795.001 3.251 1.454 3.251 3.248zM0 8.18v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188H24c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg></a></p></div></div><div id=snackbar>By using our website, you agree to our <a href=/privacy>privacy policy</a> <a id=close-privacy>&#x2715;</a></div><div class=wrap><div class=masthead><div class=container><h3 class=masthead-title><a href=https://ruddra.com/ title=Home style=color:#cfcdcd>Ruddra</a><small style=color:#838383;font-size:1.25rem>.com</small></h3><form target=_top class="masthead-search-form pull-right" method=get action=/search><input type=text class=tftextinput name=q size=21 maxlength=120><button type=submit class=tfbutton><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="rgb(155,155,155)"><path d="M9.145 18.29c-5.042.0-9.145-4.102-9.145-9.145S4.103.0 9.145.0s9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321.0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"/></svg></button></form></div></div><div class=progress-container><div class=progress-bar id=myBar></div></div><div class="container content"><div id=blog-post class=post><h1 class=post-title>Django: Changing User Model in Mid-Project</h1><span class=post-date>January 3, 2019 &#183; 3 Min Read &#183;
6 Comments
&#183; In <a class=tag-links-a href=/tags/django>Django</a>, <a class=tag-links-a href=/tags/migration>Migration</a>, <a class=tag-links-a href=/tags/models>Models</a><br><span class=generic-share><a class=fb-share target=_blank href="https://www.facebook.com/dialog/share?app_id=668971647169067&display=page&href=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f&redirect_uri=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f"><svg id="fb-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zm-3 7h-1.924C13.461 7 13 7.252 13 7.889V9h3l-.238 3H13v8h-3v-8H8V9h2V7.077C10 5.055 11.064 4 13.461 4H16v3z"/></svg></a><a class=tw-share target=_blank href="https://twitter.com/intent/tweet?text=Django%3a%20Changing%20User%20Model%20in%20Mid-Project&url=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f"><svg id="tw-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zm-.139 9.237c.209 4.617-3.234 9.765-9.33 9.765-1.854.0-3.579-.543-5.032-1.475 1.742.205 3.48-.278 4.86-1.359-1.437-.027-2.649-.976-3.066-2.28.515.098 1.021.069 1.482-.056-1.579-.317-2.668-1.739-2.633-3.26.442.246.949.394 1.486.411-1.461-.977-1.875-2.907-1.016-4.383 1.619 1.986 4.038 3.293 6.766 3.43-.479-2.053 1.08-4.03 3.199-4.03.943.0 1.797.398 2.395 1.037.748-.147 1.451-.42 2.086-.796-.246.767-.766 1.41-1.443 1.816.664-.08 1.297-.256 1.885-.517-.439.656-.996 1.234-1.639 1.697z"/></svg></a><a class=ln-share target=_blank href="https://www.linkedin.com/shareArticle/?mini=true&url=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f&title=Django%3a%20Changing%20User%20Model%20in%20Mid-Project&summary=How%20can%20we%20change%20User%20Model%20in%20Mid-Project%20for%20Django.%20Also%20discussion%20about%20a%20common%20error-%20ValueError%3a%20Related%20model%20app.User%20cannot%20be%20resolved.&source="><svg id="ln-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zM8 19H5V8h3v11zm-1.5-12.268c-.966.0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zM20 19h-3v-5.604c0-3.368-4-3.113-4 0V19h-3V8h3v1.765c1.396-2.586 7-2.777 7 2.476V19z"/></svg></a></span></span><div class=img-container><img class=lozad src=data:image/jpeg;base64,/9j/2wCEAFA3PEY8MlBGQUZaVVBfeMiCeG5uePWvuZHI//////////////////////////////////////////////////8BVVpaeGl464KC6//////////////////////////////////////////////////////////////////////////AABEIAA8AFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AHHcrblP4Uudy8/jS9RUZYpkipKF8sHqoo8tf7oo88HsaPOHoaLBc//Z data-srcset="/content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_20x0_resize_q10_box.jpg 400w
        
        ,
        /content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_500x0_resize_q50_box.jpg 500w
        
        ,
        /content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_720x0_resize_q60_box.jpg 720w
               
        ,
        /content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_800x0_resize_q60_box.jpg 800w
        
        ,
        /content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_1200x0_resize_q75_box.jpg 1200w
        
        ,
        /content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_1500x0_resize_q75_box.jpg 1500w" alt="Django: Changing User Model in Mid-Project"><noscript><img src=/content/images/2020/04/project.jpg width=4000 height=3000 alt="Django: Changing User Model in Mid-Project"></noscript></div><div class=photo-credit>Photo by <a href=https://unsplash.com/@ugmonk>Jeff Sheldon</a> on <a href=https://unsplash.com>Unsplash</a></div><div><p>Every now and then I see some questions pop up in StackOverflow with title:</p><blockquote><p>ValueError: Related model &lsquo;app.User&rsquo; cannot be resolved</p></blockquote><p>This is a very common issue and pops up when the user tries to run the migration. So, lets talk more about what is this problem and how can we solve it.<div class=toc><h2 class=toc id=toc>Table of contents <a href=#toc class=hanchor aria-label=Anchor><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>︎</a></h2><nav id=TableOfContents><ul><li><a href=#the-problem>The problem</a></li><li><a href=#why-it-occurs>Why It occurs</a></li><li><a href=#solution-easy-way>Solution: easy way</a></li><li><a href=#solution-hard-way>Solution: hard Way</a></li><li><a href=#solution-alternative-way>Solution: alternative way</a></li><li><a href=#for-future-projects>For future projects</a></li><li><a href=#in-conclusion>In conclusion</a></li></ul></nav></div></p><h2 id=the-problem>The problem<a href=#the-problem class=hanchor aria-label=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>This error occurs when you have been using Django&rsquo;s default User model, and in mid project, you need some changes in <strong>auth.User</strong> model and decided to use <a href=https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#substituting-a-custom-user-model>CustomUser</a>.</p><h2 id=why-it-occurs>Why It occurs<a href=#why-it-occurs class=hanchor aria-label=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>As per <a href=https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#changing-to-a-custom-user-model-mid-project>documentation</a>:</p><blockquote><p>Changing AUTH_USER_MODEL after you’ve created database tables is significantly more difficult since it affects foreign keys and many-to-many relationship.</p></blockquote><p>As <strong>auth.User</strong> is core part of Django, and when you change the tables, it can&rsquo;t work properly. This problem is hard to identify even for myself, because of the error it throws due to migration.</p><h2 id=solution-easy-way>Solution: easy way<a href=#solution-easy-way class=hanchor aria-label=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>The easiest(and cleanest) way is to delete all your migration files from all apps, drop the database. Then create a new database and connect your project to that. Then run <code>python manage.py makemigrations</code> and <code>python manage.py migrate</code> to make changes in DB. Means to make a clean start for the project, data wise.</p><h2 id=solution-hard-way>Solution: hard Way<a href=#solution-hard-way class=hanchor aria-label=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>Dropping the Database is not always possible for us. So there is an another approach to resolve this issue(based on ticket <a href=https://code.djangoproject.com/ticket/25313>#25313</a>):</p><ol><li><p>Create a custom user model identical to <strong>auth.User</strong>, call it <code>User</code> (so many-to-many tables keep the same name) and set <code>db_table='auth_user'</code> (so it uses the same table). Like this:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>AbstractUser</span>

<span class=k>class</span> <span class=nc>User</span><span class=p>(</span><span class=n>AbstractUser</span><span class=p>):</span>
    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
        <span class=n>db_table</span><span class=o>=</span><span class=s1>&#39;auth_user&#39;</span>
</code></pre></div></li><li><p>Throw away all your <em>migrations</em> from all the apps(except for <code>__init__.py</code> file inside the migrations folder).</p></li><li><p>Now update value of <code>AUTH_USER_MODEL</code> in your <strong>settings.py</strong> with <code>myapp.User</code>(Custom User Model) like <code>AUTH_USER_MODEL = 'myapp.User'</code>.</p></li><li><p>Recreate a fresh set of migrations using <code>python manage.py makemigrations</code>.</p></li><li><p>Make a backup of your database.</p></li><li><p>Delete all entries from <code>django_migrations</code> table.</p></li><li><p>Fake-apply the new set of migrations using <code>python manage.py migrate --fake</code>.</p></li><li><p><em>Optional:</em> Set <code>db_table="your_custom_table"</code> or remove it altogether.</p></li><li><p>Make other changes to the custom model, generate migrations, apply them.</p></li></ol><h2 id=solution-alternative-way>Solution: alternative way<a href=#solution-alternative-way class=hanchor aria-label=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>You can take a different approach rather than overriding you <strong>auth.User</strong> model. You can define a new model(lets say <strong>Profile</strong>), and put your relevant fields there. Then, make a <a href=https://docs.djangoproject.com/en/2.1/topics/db/examples/one_to_one/>OneToOne</a> relation with <strong>auth.User</strong> like this:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>Profile</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>user</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>OneToOneField</span><span class=p>(</span><span class=n>User</span><span class=p>)</span>
    <span class=n>some_field</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>,</span> <span class=n>null</span><span class=o>=</span><span class=bp>True</span><span class=p>,</span> <span class=n>blank</span><span class=o>=</span><span class=bp>True</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
</code></pre></div><p>You can use <a href=https://docs.djangoproject.com/en/2.1/ref/signals/#post-save>post_save</a> signals to create a profile automatically every time a User is created.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>django.dispatch</span> <span class=kn>import</span> <span class=n>receiver</span>
<span class=kn>from</span> <span class=nn>django.core.signals</span> <span class=kn>import</span> <span class=n>post_save</span>
<span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>User</span>

<span class=nd>@receiver</span><span class=p>(</span><span class=n>post_save</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=n>User</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>create_user_profile</span><span class=p>(</span><span class=n>sender</span><span class=p>,</span> <span class=n>instance</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>created</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>created</span><span class=p>:</span>
        <span class=n>Profile</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=n>instance</span><span class=p>)</span>
</code></pre></div><p>You can use this easily in python:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
<span class=n>user</span><span class=o>.</span><span class=n>profile</span><span class=o>.</span><span class=n>some_field</span>  <span class=c1># Thus you get value of some field from Profile</span>
<span class=c1># OR</span>
<span class=n>profile</span> <span class=o>=</span> <span class=n>Profile</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
<span class=n>user</span> <span class=o>=</span> <span class=n>profile</span><span class=o>.</span><span class=n>user</span>  <span class=c1># Thus you get auth.User</span>
</code></pre></div><p>Or in template:</p><div class=highlight><pre class=chroma><code class=language-django data-lang=django><span class=cp>{{</span> <span class=nv>user.profile.some_field</span> <span class=cp>}}</span><span class=x>
</span></code></pre></div><p><em>FYI:</em> this process was mentioned in the <a href=https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#extending-the-existing-user-model>documentation</a> as well.</p><h2 id=for-future-projects>For future projects<a href=#for-future-projects class=hanchor aria-label=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>For future projects, you should use your <strong>CustomUser</strong> model from the beginning. It will reduce a lot of hassle when it comes to customizing <strong>User</strong>.</p><h2 id=in-conclusion>In conclusion<a href=#in-conclusion class=hanchor aria-label=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>To Be Honest, this an old problem and there is no good way to resolve it(at least not in Django 2.1). Hopefully in future releases, it will be fixed.</p><p><strong>Last updated</strong>: June 2, 2020</p></div><ul class=side-share><li><span id=love-share><svg id="love-share-sign" fill="#d6d6d6" xmlns="http://www.w3.org/2000/svg" width="24" height="20" viewBox="0 0 24 24"><path d="M12 4.248c-3.148-5.402-12-3.825-12 2.944C0 11.853 5.571 16.619 12 23c6.43-6.381 12-11.147 12-15.808.0-6.792-8.875-8.306-12-2.944z"/></svg><span id=loved-count>x<span id=like-count>0</span></span></span></li><li><a target=_blank href="https://www.facebook.com/dialog/share?app_id=668971647169067&display=page&href=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f&redirect_uri=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f"><svg id="fb-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M9 8H6v4h3v12h5V12h3.642L18 8h-4V6.333C14 5.378 14.192 5 15.115 5H18V0h-3.808C10.596.0 9 1.583 9 4.615V8z"/></svg></a></li><li><a target=_blank href="https://twitter.com/intent/tweet?text=Django%3a%20Changing%20User%20Model%20in%20Mid-Project&url=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f"><svg id="tw-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179.0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142.0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg></a></li><li><a target=_blank href="https://www.linkedin.com/shareArticle/?mini=true&url=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f&title=Django%3a%20Changing%20User%20Model%20in%20Mid-Project&summary=How%20can%20we%20change%20User%20Model%20in%20Mid-Project%20for%20Django.%20Also%20discussion%20about%20a%20common%20error-%20ValueError%3a%20Related%20model%20app.User%20cannot%20be%20resolved.&source="><svg id="ln-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zM5 8H0v16h5V8zm7.982.0H8.014v16h4.969v-8.399c0-4.67 6.029-5.052 6.029.0V24H24V13.869c0-7.88-8.922-7.593-11.018-3.714V8z"/></svg></a></li></ul><div><p class=side-share-mb><span id=love-share-mb><svg id="love-share-sign" fill="#d6d6d6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 4.248c-3.148-5.402-12-3.825-12 2.944C0 11.853 5.571 16.619 12 23c6.43-6.381 12-11.147 12-15.808.0-6.792-8.875-8.306-12-2.944z"/></svg><span id=loved-count>x<span id=like-count>0</span></span></span><br><span class=generic-share><a class=fb-share target=_blank href="https://www.facebook.com/dialog/share?app_id=668971647169067&display=page&href=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f&redirect_uri=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f"><svg id="fb-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zm-3 7h-1.924C13.461 7 13 7.252 13 7.889V9h3l-.238 3H13v8h-3v-8H8V9h2V7.077C10 5.055 11.064 4 13.461 4H16v3z"/></svg></a><a class=tw-share target=_blank href="https://twitter.com/intent/tweet?text=Django%3a%20Changing%20User%20Model%20in%20Mid-Project&url=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f"><svg id="tw-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zm-.139 9.237c.209 4.617-3.234 9.765-9.33 9.765-1.854.0-3.579-.543-5.032-1.475 1.742.205 3.48-.278 4.86-1.359-1.437-.027-2.649-.976-3.066-2.28.515.098 1.021.069 1.482-.056-1.579-.317-2.668-1.739-2.633-3.26.442.246.949.394 1.486.411-1.461-.977-1.875-2.907-1.016-4.383 1.619 1.986 4.038 3.293 6.766 3.43-.479-2.053 1.08-4.03 3.199-4.03.943.0 1.797.398 2.395 1.037.748-.147 1.451-.42 2.086-.796-.246.767-.766 1.41-1.443 1.816.664-.08 1.297-.256 1.885-.517-.439.656-.996 1.234-1.639 1.697z"/></svg></a><a class=ln-share target=_blank href="https://www.linkedin.com/shareArticle/?mini=true&url=https%3a%2f%2fruddra.com%2fposts%2fdjango-custom-user-migration-mid-phase-project%2f&title=Django%3a%20Changing%20User%20Model%20in%20Mid-Project&summary=How%20can%20we%20change%20User%20Model%20in%20Mid-Project%20for%20Django.%20Also%20discussion%20about%20a%20common%20error-%20ValueError%3a%20Related%20model%20app.User%20cannot%20be%20resolved.&source="><svg id="ln-share-sign" fill="#515151" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 0H5C2.239.0.0 2.239.0 5v14c0 2.761 2.239 5 5 5h14c2.762.0 5-2.239 5-5V5c0-2.761-2.238-5-5-5zM8 19H5V8h3v11zm-1.5-12.268c-.966.0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zM20 19h-3v-5.604c0-3.368-4-3.113-4 0V19h-3V8h3v1.765c1.396-2.586 7-2.777 7 2.476V19z"/></svg></a></span></p></div><div class=newsletter-section id=newsletter-submitted><h2 class=newsletter-header>Get Better With Django</h2><div id=commento class="commento-root commento-root-font"><div id=newsletter-error class=commento-error-box style=display:none>An error occurred when submitting the form, please try again.</div><div id=newsletter-submitted-box style=display:none><p class=newsletter-submitted-txt>Thank you for your subscription to our newsletters.<br>You will start receiving emails from next iteration.</p></div><div id=newsletter-body><div class=newsletter-txt>Subscribe to get monthly articles about Django and more.<br>We won't spam you. Unsubscribe at any time.</div><div id=commento-main-area class=commento-main-area><form id=commento-form method=post action=https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/ruddra/ruddra.comments/master/comments><input type=hidden name=options[redirect] value=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/#newsletter-submitted>
<input type=hidden name=options[slug] value=newsletter-subscription>
<input type=hidden name=options[parent] value=newsletter-subscription>
<input type=hidden name=options[origin] value=https://ruddra.com/newsletters/>
<input type=hidden name=options[redirectError] value=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/#newsletter-error><div id=commento-login class=commento-login><input type=email name=fields[email] placeholder="My email address is ..." style="padding-left:10px;width:90%;line-height:2;border:1px solid rgba(50,50,93,.1)" required></div><div style=width:95.8%><button id=commento-submit-button-root-newsletter type=submit class="commento-button commento-submit-button">Subscribe</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id=commento-checkbox-root name=options[subscribe] type=checkbox value=email required><label for=commento-checkbox-root>I agree to receive
emails</label></div></div></form></div></div></div></div><div class=pagination><div class="pagination-item older"><span class=pagination-arrow>&#8592; Previous</span><div class=pagination-link><a href=https://ruddra.com/posts/tdd-drf-factory-boy-faker/>Testing for Django Rest Framework with Factory Boy and …</a></div><div class=pagination-image><img class=lozad data-src=/content/images/2020/05/factory_hu547a583bfe9e5ef602935a98eb5500c7_1967375_350x0_resize_q75_box.jpg alt="Testing for Django Rest Framework with Factory Boy and Faker"><noscript><img src=/content/images/2020/05/factory_hu547a583bfe9e5ef602935a98eb5500c7_1967375_350x0_resize_q75_box.jpg alt="Testing for Django Rest Framework with Factory Boy and Faker"></noscript></div><p class=pagination-text>“I&rsquo;m not a great programmer; I&rsquo;m just a good programmer with great habits.” ― …</p></div><div class="pagination-item newer"><span class=pagination-arrow>Next &#8594;</span><div class=pagination-link><a href=https://ruddra.com/posts/django-model-linked-list/>Django: Ordering by Linked List for Model Objects</a></div><div class=pagination-image><img class=lozad data-src=/content/images/2020/05/linkedlist_hub40e6269c16f4bfa7382018a4afc79f5_760070_350x0_resize_q75_box.jpg alt="Django: Ordering by Linked List for Model Objects"><noscript><img src=/content/images/2020/05/linkedlist_hub40e6269c16f4bfa7382018a4afc79f5_760070_350x0_resize_q75_box.jpg alt="Django: Ordering by Linked List for Model Objects"></noscript></div><p class=pagination-text>Linked list is a data structure where each object has points to next. In django, linked …</p></div></div><div class=tiny id=comment-submitted><div id=commento class="commento-root commento-root-font"><div id=comment-submitted-box style=display:none><h3>Thank you for your comment. It will be published in few minutes.</h3><br></div><div id=comment-error style=display:none><h3>An error occurred when submitting the form, please try again.</h3><br></div><div id=commento-mod-tools class=commento-mod-tools style=display:none><button id=commento-mod-tools-lock-button>Lock Thread</button></div><div id=commento-main-area class=commento-main-area><form id=comment-form method=post name=comment-form onsubmit=submitComment(event)><input type=hidden name=options[redirect] value=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/#comment-submitted>
<input type=hidden name=options[slug] value=django-custom-user-mid-project>
<input type=hidden name=options[parent] value=django-custom-user-mid-project>
<input type=hidden name=options[origin] value=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/>
<input type=hidden id=comment-parent name=fields[reply_to]>
<input type=hidden name=options[redirectError] value=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/#comment-error><div id=commento-logged-container class=commento-logged-container><div class=commento-name id=comment-headline><b>Share Your Thoughts</b></div></div><div class=commento-logout></div></div><div id=commento-textarea-super-container-root class=commento-button-margin><div id=commento-textarea-container-root class=commento-textarea-container><textarea name=fields[comment] id=commento-textarea-root placeholder="Add a comment" required></textarea></div><button id=commento-submit-button-root type=submit class="commento-button commento-submit-button submit-github">Comment With Github</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id=commento-anonymous-checkbox-root name=options[subscribe] type=checkbox value=email><label for=commento-anonymous-checkbox-root>Notify me of new comments</label></div><a onclick=toggleMarkDownTable() id=commento-markdown-button-root class=commento-markdown-button><b>M
↓</b> &nbsp; <span class=commento-markdown>Markdown</span></a><table id=commento-markdown-help-root class=commento-markdown-help style=display:none><tr><td><i>italics</i></td><td>surround text with<code>*asterisks*</code></td></tr><tr><td><b>bold</b></td><td>surround text with<code>**two asterisks**</code></td></tr><tr><td><a href=https://example.com>hyperlink</a></td><td><code>[hyperlink](https://example.com)</code> or just a bare URL</td></tr><tr><td><code>code</code></td><td>surround text with
<code>`backticks`</code></td></tr><tr><td><code>code block</code></td><td>surround text with
<code>```console.log()```</code></td></tr><tr><td><strike>strikethrough</strike></td><td>surround text with
<code>~~two tilde characters~~</code></td></tr><tr><td><blockquote>quote</blockquote></td><td>prefix with
<code>></code></td></tr><tr><td>Emoji 😱</td><td><b>:smile:</b>😄 <b>:angry:</b>😠
<b>:disappointed:</b>😞
etc.(<a href=https://www.webfx.com/tools/emoji-cheat-sheet/>emoji cheat
sheet</a>)</td></tr></table></div><p id=commneto-renderer-msg></p></form><div id=commento-comments-area class=commento-comments><div id=commento-comment-card-1548007200 style="border-left:2px solid #d9e0d7" class=commento-card><div class=commento-header><div id=commento-comment-options-1548007200 class=commento-options><button id=commento-comment-reply-1548007200 href=#comment-form onclick="changeValue('fields[reply_to]','1548007200','David')" title="Reply to David" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img data-src="https://www.gravatar.com/avatar/61c6f1a7784a65ddb8f8f3df4ed9e0d7?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt=David><div id=commento-comment-name-1548007200 class=commento-name>David</div><div id=commento-comment-subtitle-1548007200 class=commento-subtitle><div id=commento-comment-timeago-1548007200 title="Monday, January 21, 2019" class=commento-timeago>Monday, January 21, 2019</div></div></div><div id=commento-comment-contents-1548007200><div id=commento-comment-body-1548007200 class=commento-body><div class=commento-comment-text id=commento-comment-text-1548007200><p>Thanks i was been struggling with this for some months, maybe you should be more specific with the number 1 of the HardWay of how to create an identical auth.User i just get the code from AbstractUser i just test on my development enviroment and works fine.</p></div></div></div><div><div id=commento-comment-card-1548097200 style="border-left:2px solid #308024" class=commento-card><div class=commento-header><div id=commento-comment-options-1548097200 class=commento-options><button id=commento-comment-reply-1548097200 title="Reply to Arnab Kumar Shil" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick="changeValue('fields[reply_to]','1548007200','Arnab Kumar Shil')"></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id=commento-comment-name-1548097200 class="commento-name commento-moderator">Arnab Kumar Shil</div><div id=commento-comment-subtitle-1548097200 class=commento-subtitle><div id=commento-comment-timeago-1548097200 title="Tuesday, January 22, 2019" class=commento-timeago>Tuesday, January 22, 2019</div></div></div><div id=commento-comment-contents-1548097200><div id=commento-comment-body-1548097200 class=commento-body><div class=commento-comment-text id=commento-comment-text-1548097200><p>Okay, I will update the post accordingly.</p></div></div></div></div></div><script>function changeValue(elementName,newValue,name){document.getElementsByName(elementName)[0].value=newValue;document.getElementById('comment-headline').innerHTML="<b>Reply To: "+name+"</b>";window.location.hash="#comment-form";};</script></div><div id=commento-comment-card-1565546400 style="border-left:2px solid #bfb5d7" class=commento-card><div class=commento-header><div id=commento-comment-options-1565546400 class=commento-options><button id=commento-comment-reply-1565546400 href=#comment-form onclick="changeValue('fields[reply_to]','1565546400','JR177')" title="Reply to JR177" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img data-src="https://www.gravatar.com/avatar/caca0257c8924b75cddf052290bfb5d7?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt=JR177><div id=commento-comment-name-1565546400 class=commento-name>JR177</div><div id=commento-comment-subtitle-1565546400 class=commento-subtitle><div id=commento-comment-timeago-1565546400 title="Monday, August 12, 2019" class=commento-timeago>Monday, August 12, 2019</div></div></div><div id=commento-comment-contents-1565546400><div id=commento-comment-body-1565546400 class=commento-body><div class=commento-comment-text id=commento-comment-text-1565546400><p>Hi Ruddra,
I&rsquo;m struggling with this exact problem. Might you be able to help? <a href=https://stackoverflow.com/questions/57453469/trying-to-extend-base-user-model-mid-project-and-getting-unique-constraint-error>https://stackoverflow.com/questions/57453469/trying-to-extend-base-user-model-mid-project-and-getting-unique-constraint-error</a>.</p></div></div></div><div><div id=commento-comment-card-1565553600 style="border-left:2px solid #bfb5d7" class=commento-card><div class=commento-header><div id=commento-comment-options-1565553600 class=commento-options><button id=commento-comment-reply-1565553600 title="Reply to JR177" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick="changeValue('fields[reply_to]','1565546400','JR177')"></button></div><img data-src="https://www.gravatar.com/avatar/caca0257c8924b75cddf052290bfb5d7?s=70&r=pg&d=identicon" class="lozad commento-avatar-img"><div id=commento-comment-name-1565553600 class=commento-name>JR177</div><div id=commento-comment-subtitle-1565553600 class=commento-subtitle><div id=commento-comment-timeago-1565553600 title="Monday, August 12, 2019" class=commento-timeago>Monday, August 12, 2019</div></div></div><div id=commento-comment-contents-1565553600><div id=commento-comment-body-1565553600 class=commento-body><div class=commento-comment-text id=commento-comment-text-1565553600><p>I&rsquo;m unsure how to design the &lsquo;views&rsquo; for this solution. My current view saves the form inputs to the default User model and cannot get it to save to the new model. I also hit this &lsquo;uniqueconstraint&rsquo; problem.</p></div></div></div></div></div><script>function changeValue(elementName,newValue,name){document.getElementsByName(elementName)[0].value=newValue;document.getElementById('comment-headline').innerHTML="<b>Reply To: "+name+"</b>";window.location.hash="#comment-form";};</script></div><div id=commento-comment-card-d4615ef0-47e7-11ea-a62f-c13976200e4a style="border-left:2px solid #5d2490" class=commento-card><div class=commento-header><div id=commento-comment-options-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-options><button id=commento-comment-reply-d4615ef0-47e7-11ea-a62f-c13976200e4a href=#comment-form onclick="changeValue('fields[reply_to]','d4615ef0-47e7-11ea-a62f-c13976200e4a','Gurubux')" title="Reply to Gurubux" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img data-src="https://www.gravatar.com/avatar/d8a900c6a877ceb86524ac83675d2490?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt=Gurubux><div id=commento-comment-name-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-name>Gurubux</div><div id=commento-comment-subtitle-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-subtitle><div id=commento-comment-timeago-d4615ef0-47e7-11ea-a62f-c13976200e4a title="Wednesday, February 5, 2020" class=commento-timeago>Wednesday, February 5, 2020</div></div></div><div id=commento-comment-contents-d4615ef0-47e7-11ea-a62f-c13976200e4a><div id=commento-comment-body-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-body><div class=commento-comment-text id=commento-comment-text-d4615ef0-47e7-11ea-a62f-c13976200e4a><p>Thank you for this post. My query was that if we drop all the default tables created by Django&rsquo;s makemigration command, will it affect the execution of the API catastrophically or can be managed with those tables. The reason is, those tables are considered to be Junk data. Kindly guide.</p></div></div></div><div><div id=commento-comment-card-f4f47c80-490c-11ea-88e7-339f19dd92a9 style="border-left:2px solid #308024" class=commento-card><div class=commento-header><div id=commento-comment-options-f4f47c80-490c-11ea-88e7-339f19dd92a9 class=commento-options><button id=commento-comment-reply-f4f47c80-490c-11ea-88e7-339f19dd92a9 title="Reply to Ruddra" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick="changeValue('fields[reply_to]','d4615ef0-47e7-11ea-a62f-c13976200e4a','Ruddra')"></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id=commento-comment-name-f4f47c80-490c-11ea-88e7-339f19dd92a9 class="commento-name commento-moderator">Ruddra</div><div id=commento-comment-subtitle-f4f47c80-490c-11ea-88e7-339f19dd92a9 class=commento-subtitle><div id=commento-comment-timeago-f4f47c80-490c-11ea-88e7-339f19dd92a9 title="Thursday, February 6, 2020" class=commento-timeago>Thursday, February 6, 2020</div></div></div><div id=commento-comment-contents-f4f47c80-490c-11ea-88e7-339f19dd92a9><div id=commento-comment-body-f4f47c80-490c-11ea-88e7-339f19dd92a9 class=commento-body><div class=commento-comment-text id=commento-comment-text-f4f47c80-490c-11ea-88e7-339f19dd92a9><p>It shouldn&rsquo;t affect if you are following <a href=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/#hard-way>this procedure</a>. But before doing anything, please make a backup of your database.</p></div></div></div></div></div><script>function changeValue(elementName,newValue,name){document.getElementsByName(elementName)[0].value=newValue;document.getElementById('comment-headline').innerHTML="<b>Reply To: "+name+"</b>";window.location.hash="#comment-form";};</script></div></div></div></div></div></div></div><label for=sidebar-checkbox class=sidebar-toggle></label><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-58095062-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src="https://polyfill.io/v3/polyfill.min.js?flags=gated&features=Object.assign%2CIntersectionObserver%2CURLSearchParams" defer></script><script src=https://ruddra.com/js/bundle.min.f18baf9d789e7c85f4755dafa41f860fb978a960506bc873e35affd1d7a7d5fe.js defer></script></body></html>