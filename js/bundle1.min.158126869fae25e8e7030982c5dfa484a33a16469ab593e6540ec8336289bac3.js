/*! lozad.js - v1.16.0 - 2020-09-06
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */var script,observer,$comTarget,$spinner,elm,elem,showComment,listener_,currentThemeName,currentTheme;if(!function(b,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):b.lozad=a()}(this,function(){"use strict";var d="undefined"!=typeof document&&document.documentMode,e={rootMargin:"0px",threshold:0,load:function(a){var e,j,g,i,f,h,b,c;if("picture"===a.nodeName.toLowerCase()&&(e=a.querySelector("img"),j=!1,null===e&&(e=document.createElement("img"),j=!0),d&&a.getAttribute("data-iesrc")&&(e.src=a.getAttribute("data-iesrc")),a.getAttribute("data-alt")&&(e.alt=a.getAttribute("data-alt")),j&&a.append(e)),"video"===a.nodeName.toLowerCase()&&!a.getAttribute("data-src")&&a.children){for(g=a.children,i=void 0,f=0;f<=g.length-1;f++)(i=g[f].getAttribute("data-src"))&&(g[f].src=i);a.load()}a.getAttribute("data-poster")&&(a.poster=a.getAttribute("data-poster")),a.getAttribute("data-src")&&(a.src=a.getAttribute("data-src")),a.getAttribute("data-srcset")&&a.setAttribute("srcset",a.getAttribute("data-srcset")),h=",",(a.getAttribute("data-background-delimiter")&&(h=a.getAttribute("data-background-delimiter")),a.getAttribute("data-background-image"))?a.style.backgroundImage="url('"+a.getAttribute("data-background-image").split(h).join("'),url('")+"')":a.getAttribute("data-background-image-set")&&(b=a.getAttribute("data-background-image-set").split(h),c=b[0].substr(0,b[0].indexOf(" "))||b[0],c=-1===c.indexOf("url(")?"url("+c+")":c,1===b.length?a.style.backgroundImage=c:a.setAttribute("style",(a.getAttribute("style")||"")+"background-image: "+c+"; background-image: -webkit-image-set("+b+"); background-image: image-set("+b+")")),a.getAttribute("data-toggle-class")&&a.classList.toggle(a.getAttribute("data-toggle-class"))},loaded:function(){}},b,c;function a(a){a.setAttribute("data-loaded",!0)}return b=function(a){return"true"===a.getAttribute("data-loaded")},c=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return a instanceof Element?[a]:a instanceof NodeList?a:b.querySelectorAll(a)},function(){var l,o,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=Object.assign({},e,q),j=d.root,p=d.rootMargin,r=d.threshold,i=d.load,h=d.loaded,f=void 0,k,m,g;"undefined"!=typeof window&&window.IntersectionObserver&&(f=new IntersectionObserver((l=i,o=h,function(c,d){c.forEach(function(c){(0<c.intersectionRatio||c.isIntersecting)&&(d.unobserve(c.target),b(c.target)||(l(c.target),a(c.target),o(c.target)))})}),{root:j,rootMargin:p,threshold:r}));for(k,m=c(n,j),g=0;g<m.length;g++)(k=m[g]).getAttribute("data-placeholder-background")&&(k.style.background=k.getAttribute("data-placeholder-background"));return{observe:function(){for(var e=c(n,j),d=0;d<e.length;d++)b(e[d])||(f?f.observe(e[d]):(i(e[d]),a(e[d]),h(e[d])))},triggerLoad:function(c){b(c)||(i(c),a(c),h(c))},observer:f}}}),"use strict",'IntersectionObserver'in window||(script=document.createElement("script"),script.src="/js/intersection-observer.js",document.getElementsByTagName('head')[0].appendChild(script)),observer=lozad(),observer.observe(),function(){if(!document.queryCommandSupported("copy"))return;function a(a,b){a.textContent=b,setTimeout(function(){a.textContent="Copy"},1e3)}function b(c){var a=window.getSelection(),b=document.createRange();return b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b),a}function c(d){var c=document.createElement("button"),e;c.className="highlight-copy-btn",c.textContent="Copy",e=d.firstElementChild,c.addEventListener("click",function(){try{var d=b(e);document.execCommand("copy"),d.removeAllRanges(),a(c,"Copied!")}catch(b){console&&console.log(b),a(c,"Failed :'(")}}),d.appendChild(c)}var d=document.getElementsByClassName("highlight");Array.prototype.forEach.call(d,c)}(),window.location.hash=="#newsletter-submitted")$comTarget=document.getElementById('newsletter-submitted-box'),$comTarget.style.display='block',$comTarget=document.getElementById('newsletter-body'),$comTarget.style.display='none';else if(window.location.hash=="#newsletter-error"){$comTarget=document.getElementById('newsletter-error'),$comTarget.style.display='block';try{$spinner=document.getElementsByClassName('cover-spin'),$spinner.style.display='none'}catch(a){}}function loadLoader(){var a=document.createElement('div');a.setAttribute('class','cover-spin'),document.body.appendChild(a)}elm=document.getElementById("commento-form"),elm&&(elm.onsubmit=loadLoader);function displayComments(){var a=document.getElementById('commento-comment');a&&(a.style.display='block')}elem=document.getElementById('commento'),observer=new IntersectionObserver(function(a){var b=a[0];b.intersectionRatio>0&&(displayComments(),colorComments())}),elem&&observer.observe(elem),showComment=document.getElementById('show-comment-btn');function showComments(){displayComments(),location.hash="#comment-headline"}showComment&&showComment.addEventListener('click',showComments);function colorComments(){var a=document.querySelectorAll('[id^="commento-comment-card-"]');a.forEach(function(a){console.log(a);var b=a.id.replace('commento-comment-card-','#').substring(0,7);a.style.borderColor=b})}function setData(b,a){try{localStorage.setItem(b,a)}catch(c){a=encodeURIComponent(a),document.cookie=b+"="+(a||"")+";expires=expires=Fri, 31 Dec 9999 23:59:59 UTC;path=/"}}function getData(e){var c,d,b,a;try{return localStorage.getItem(e)}catch(f){c=e+"=",d=document.cookie.split(';');for(b=0;b<d.length;b++){for(a=d[b];a.charAt(0)==' ';)a=a.substring(1,a.length);if(a.indexOf(c)==0)return decodeURIComponent(a.substring(c.length,a.length))}return null}}function eraseData(a){try{return localStorage.removeItem(a)}catch(b){document.cookie=a+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;'}}if(window.location.hash=="#comment-submitted")$comTarget=document.getElementById('comment-submitted-box'),$comTarget.style.display='block';else if(window.location.hash=="#comment-error"){$comTarget=document.getElementById('comment-error'),$comTarget.style.display='block';try{$spinner=document.getElementsByClassName('cover-spin'),$spinner.style.display='none'}catch(a){}}function storeForm(){var a=document.getElementById('comment-parent'),b=document.getElementById('commento-textarea-root'),c=document.getElementById('commento-anonymous-checkbox-root');setData('comment-parent',a.value),setData('comment',b.value),setData('getemail',c.checked)}function updateForm(){var g=document.getElementById('comment-parent'),e=document.getElementById('commento-textarea-root'),b=document.getElementById('commento-anonymous-checkbox-root'),f=getData('comment-parent'),c=getData('comment'),d=getData('getemail'),a;return c?(g.value=f,e.value=c,d==!0||d=='true'?b.checked=!0:b.checked=!1,a=!0):a=!1,eraseData('comment-parent'),eraseData('comment'),eraseData('getemail'),a}function getCode(){var a,b,c;return URLSearchParams?(c=new URLSearchParams(window.location.search),a=c.get('code')):(b=function(){var b={},a=(window.location.search.split('?')[1]||'').split('&'),c,d;for(c in a)a.hasOwnProperty(c)&&(d=a[c].split('='),b[d[0]]=decodeURIComponent(d[1]||""));return b},a=b().code),a}function submitComment(a){var b=getCode(),c;document.getElementById('commento-submit-button-root').disabled=!0,b?a.currentTarget.submit():(a.preventDefault(),storeForm(),c=window.location.href,window.location.href="https://github.com/login/oauth/authorize?scope=user:email&client_id=bc27cd2859301269f316&redirect_uri="+c)}document.getElementById('comment-form').addEventListener('submit',submitComment);function submitFormWithCode(){var a=getCode(),d="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/custom/ruddra/ruddra.comments/master/comments/",b,e,c;if(a){if(b=document.createElement('div'),b.setAttribute('class','cover-spin'),document.body.appendChild(b),e=updateForm(),!e)return window.location.href="#comment-error",null;c=document.getElementById('comment-form'),c.action=d+a,c.submit()}}submitFormWithCode();function toggleMarkDownTable(){var a=document.getElementById("commento-markdown-help-root");a.style.display==="none"?a.style.display="block":a.style.display="none"}function increaseLikeCounter(){var b=document.getElementById("like-count"),a=parseInt(b.innerText,10),d,c;isNaN(a)?setTimeout(function(){increaseLikeCounter()},0):(a++,b.innerText=a,d=document.getElementById("loved-count"),c=document.getElementById("love-share"),c.style.cursor='auto',c.removeEventListener('click',loveArticle),d.style.textShadow="-0.02ex 0 #222,0.02ex 0 #222")}function loveArticle(){if(alreadyLiked()==!0)return;storeLiked(),makePink(),submitLike()}function alreadyLiked(){return isNaN(getData("liked-"+getSlug()))}function getSlug(){return window.location.pathname.split('/').reverse()[1]}function createCORSRequest(b,c){var a=new XMLHttpRequest;return"withCredentials"in a?a.open(b,c,!0):typeof XDomainRequest!="undefined"?(a=new XDomainRequest,a.open(b,c)):a=null,a}function makeHttpRequest(b){var c=getSlug(),d={"options[parent]":c,"options[slug]":c,"options[origin]":"https://ruddra.com/likes","fields[email]":window.location.href},e=[],f,a;Object.keys(d).forEach(function(a){var b=a+"="+d[a];e.push(b)}),f="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/github/ruddra/ruddra.likes/master/comments/",a=createCORSRequest("POST",f),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.setRequestHeader("Access-Control-Allow-Origin","*"),a.onload=function(){this.status===200?(increaseLikeCounter(),makeRed()):b>0&&setTimeout(function(){makeHttpRequest(b--)},1e3)},a.onerror=function(){setTimeout(function(){makeHttpRequest(b--)},1e3)},a.send(e.join('&'))}function submitLike(){var a=5;makeHttpRequest(a)}function storeLiked(){setData("liked-"+getSlug(),"liked")}function makeRed(){var a=document.getElementById("love-share-sign");a.style.fill="#ff0000"}function makePink(){var a=document.getElementById("love-share-sign");a.style.fill="#ff8fc7"}function showLiked(){alreadyLiked()==!0&&makeRed()}showLiked(),listener_=document.getElementById("love-share"),listener_&&listener_.addEventListener('click',loveArticle);function changeValue(b,c,d){document.getElementsByName(b)[0].value=c;var a=document.getElementById('comment-headline');a.innerHTML="<b>Reply To: "+d+"</b>",a.scrollIntoView()}function addSnackbar(c,d,e,j,f){var a=document.createElement('div'),g,h,i,b;a.setAttribute('id',j),a.setAttribute('class','show'),g=document.createTextNode(c),a.appendChild(g),f&&(h=document.createElement('br'),i=document.createElement('br'),a.appendChild(h),a.appendChild(i)),b=document.createElement('span'),b.appendChild(d),b.appendChild(e),a.appendChild(b),document.body.appendChild(a)}function showReloadAlert(){var a=document.createElement('a'),c=document.createTextNode("Click here to refresh"),d,b;a.setAttribute('class','clsbtnreload'),a.appendChild(c),d=document.createElement('span'),d.appendChild(a),c=document.createTextNode(" the page"),d.appendChild(c),a.onclick=function(){var a=document.getElementById('alert');a.remove(),window.location.reload()},b=document.createElement('span'),b.setAttribute('class',"closebtn"),b.innerHTML="&times;",b.onclick=function(){var a=document.getElementById('alert');a.remove()},addSnackbar("New contents are available. ",d,b,'alert',!1)}function showPrivacy(){setTimeout(function(){var c="cookieSeen",a,e,b,f;getData(c)||(a=document.createElement('a'),a.setAttribute('href','/privacy/'),e=document.createTextNode("More Details"),a.appendChild(e),a.setAttribute('href','/privacy/'),b=document.createElement('a'),b.onclick=function(){var a=document.getElementById('snackbar');a.remove()},b.setAttribute('id','close-privacy'),f=document.createTextNode("OK"),b.appendChild(f),addSnackbar("Cookies are served on this site to analyze traffic, remember your preferences and optimize your experience.",a,b,'snackbar',!0),setData(c,!0)),window.dataLayer=window.dataLayer||[{gaPropertyId:"UA-58095062-1"}];function d(){dataLayer.push(arguments)}d('js',new Date),d('config','UA-58095062-1'),function(b,d,e,a,g){b[a]=b[a]||[],b[a].push({'gtm.start':(new Date).getTime(),event:'gtm.js'});var f=d.getElementsByTagName(e)[0],c=d.createElement(e),h=a!='dataLayer'?'&l='+a:'';c.async=!0,c.src='/js/tags.js?id='+g+h+'&gtm_cookies_win=x',f.parentNode.insertBefore(c,f)}(window,document,'script','dataLayer','UA-58095062-1')},5e3)}showPrivacy(),currentThemeName="currentTheme";function toggleTheme(){var a=getData(currentThemeName);a&&a=='dark'?(eraseData(currentThemeName),setData(currentThemeName,'light')):a&&a=='light'?(eraseData(currentThemeName),setData(currentThemeName,'dark')):window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches?setData(currentThemeName,'light'):setData(currentThemeName,'dark')}if(currentTheme=getData(currentThemeName),currentTheme==null&&window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add("dark-theme"),setData(currentThemeName,'dark');else if(getData(currentThemeName)=='dark')document.body.classList.add("dark-theme");else{try{document.body.classList.remove("dark-theme")}catch(a){}setData(currentThemeName,'light')}const btn=document.querySelector(".btn-toggle-thm");btn.addEventListener("click",function(){document.body.classList.toggle("dark-theme"),toggleTheme()})