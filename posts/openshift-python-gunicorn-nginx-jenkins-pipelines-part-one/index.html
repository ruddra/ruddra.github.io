<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=yandex-verification content="3ccce49727df78e2"><title>Deploy A Python App to OpenShift: Planning and Preparations</title><meta name=description content="Deploying a Python application to OpenShift is fairly easy. Write a Dockerfile and run oc new-app Dockerfile, but if you want implement a full fledged modern CI CD using Jenkins and OpenShift, you need to do little more than that. So let us dive into it."><link rel=preload href=/fonts/pt-serif-400-i-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-i-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-i-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-i-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-i-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-i-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-i-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-latin.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-i-latin.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-i-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-i-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-i-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-i-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-latin-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-i-latin.woff2 as=font><link rel=preload href=/fonts/pt-sans-700-i-latin.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-i-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-sans-400-cyrillic.woff2 as=font><link rel=preload href=/fonts/pt-serif-700-i-cyrillic-ext.woff2 as=font><link rel=preload href=/fonts/pt-serif-400-cyrillic.woff2 as=font><link rel=stylesheet href=https://ruddra.com/css/bundle.min.753bcace10040253d8f1a756a2b8597ca1ea1b7811c113766aeb1c28c7a60e10.css integrity="sha256-dTvKzhAEAlPY8adWorhZfKHqG3gRwRN2auscKMemDhA=" async><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon.png><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/rss+xml title=RSS href=/sitemap.xml><meta name=generator content="Hugo 0.64.0"><meta name=twitter:card content="summary_large_image"><meta name=robots content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="Ruddra.com | Blog by Arnab Kumar Shil"><meta property="article:publisher" content="https://ruddra.com"><meta property="article:section" content="Bulletin"><meta property="article:published_time" content="2018-08-11T00:00:00.00Z"><meta property="article:modified_time" content="2020-03-06T00:00:00.00Z"><meta property="og:updated_time" content="2020-03-06T00:00:00.00Z"><meta property="og:image" content="https://ruddra.com/content/images/2019/02/openshift-jenkins-python-nginx.jpg"><meta property="og:image:secure_url" content="https://ruddra.com/content/images/2019/02/openshift-jenkins-python-nginx.jpg"><meta property="og:image:width" content="720"><meta property="og:image:height" content="350"><meta name=twitter:title content="Deploy A Python App to OpenShift: Planning and Preparations"><meta name=twitter:description content="Deploying a Python application to OpenShift is fairly easy. Write a Dockerfile and run oc new-app Dockerfile, but if you want implement a full fledged modern CI CD using Jenkins and OpenShift, you need to do little more than that. So let us dive into it."><meta property="og:type" content="article"><meta property="og:title" content="Deploy A Python App to OpenShift: Planning and Preparations"><meta property="og:description" content="Deploying a Python application to OpenShift is fairly easy. Write a Dockerfile and run oc new-app Dockerfile, but if you want implement a full fledged modern CI CD using Jenkins and OpenShift, you need to do little more than that. So let us dive into it."><meta name=twitter:image content="https://ruddra.com/content/images/2019/02/openshift-jenkins-python-nginx.jpg"><meta property="og:image" content="https://ruddra.com/content/images/2019/02/openshift-jenkins-python-nginx.jpg"><meta property="article:tag" content="openshift"><meta property="article:tag" content="jenkins"><meta property="article:tag" content="pipeline"><meta property="article:tag" content="ci/cd"><meta property="article:tag" content="ruddra"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","mainEntityOfPage":"https:\/\/ruddra.com\/posts\/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one\/","identifier":"https:\/\/ruddra.com\/posts\/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one\/","author":{"@type":"Person","name":"Arnab Kumar Shil","url":"https:\/\/ruddra.com/info/about/"},"logo":"https:\/\/ruddra.com\/favicon-32x32.png","name":"Deploy A Python App to OpenShift: Planning and Preparations","headline":"Deploy A Python App to OpenShift: Planning and Preparations","description":"Deploying a Python application to OpenShift is fairly easy. Write a Dockerfile and run oc new-app Dockerfile, but if you want implement a full fledged modern CI CD using Jenkins and OpenShift, you need to do little more than that. So let us dive into it.","inLanguage":"en-US","creator":["Arnab Kumar Shil"],"accountablePerson":"Arnab Kumar Shil","copyrightHolder":"Arnab Kumar Shil","copyrightYear":"2018","dateCreated":"2018-08-11T00:00:00.00Z","datePublished":"2018-08-11T00:00:00.00Z","dateModified":"2020-03-06T00:00:00.00Z","url":"https:\/\/ruddra.com\/posts\/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one\/","wordCount":"1138","publisher":{"@type":"Organization","name":"Ruddra.com | Blog by Arnab Kumar Shil","url":"https:\/\/ruddra.com","logo":"https:\/\/ruddra.com\/avatar.png"},"image":["https:\/\/ruddra.com\/content\/images\/2019\/02\/openshift-jenkins-python-nginx.jpg"],"keywords":["Tag:OpenShift","Tag:Jenkins","Tag:Pipeline","Tag:CI\/CD","Elevated:true","Tag:Blog"]}</script></head><body><input type=checkbox class=sidebar-checkbox id=sidebar-checkbox><div class=sidebar id=sidebar><div class=sidebar-item><img src=/avatar.jpg><p>Hi! I am Arnab, a full stack developer specializing in <b><a href=/tags/python/>Python</a></b>,
<b><a href=/tags/django/>Django</a></b>, <b><a href=/tags/docker/>Docker</a></b>, <b><a href=/tags/reactjs/>React</a></b>, <b><a href=/tags/openshift/>OpenShift</a></b>.</p><p class=sidebar-icons><a class=icon-side-bar href=https://stackoverflow.com/users/2696165/ruddra target=_blank rel="noopener me" title=stackoverflow><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="10 10 100 100" fill="currentcolor" class="feather"><path d="M84.4 93.8V70.6h7.7v30.9H22.6V70.6h7.7v23.2z"/><path d="M38.8 68.4l37.8 7.9 1.6-7.6-37.8-7.9-1.6 7.6zm5-18 35 16.3 3.2-7-35-16.4-3.2 7.1zm9.7-17.2 29.7 24.7 4.9-5.9-29.7-24.7-4.9 5.9zm19.2-18.3-6.2 4.6 23 31 6.2-4.6-23-31zM38 86h38.6v-7.7H38V86z"/></svg></a><a class=icon-side-bar href=https://github.com/ruddra target=_blank rel="noopener me" title=github><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a class=icon-side-bar href=https://www.linkedin.com/in/ruddraarnab target=_blank rel="noopener me" title=linkedin><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a class=icon-side-bar href=https://medium.com/@ruddra target=_blank rel="noopener me" title=medium><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/><g class="currentLayer"><title>Layer 1</title><path d="M2.846 6.887c.03-.295-.083-.586-.303-.784l-2.24-2.7v-.403h6.958l5.378 11.795 4.728-11.795h6.633v.403l-1.916 1.837c-.165.126-.247.333-.213.538v13.498c-.034.204.048.411.213.537l1.871 1.837v.403h-9.412v-.403l1.939-1.882c.19-.19.19-.246.19-.537v-10.91l-5.389 13.688h-.728l-6.275-13.688v9.174c-.052.385.076.774.347 1.052l2.521 3.058v.404h-7.148v-.404l2.521-3.058c.27-.279.39-.67.325-1.052v-10.608z" id="svg_1" class="selected" opacity="1" fill="#fff" fill-opacity="1"/></g></svg></a><a class=icon-side-bar href=/posts/index.xml target=_blank rel="noopener me" title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></div><nav class=sidebar-nav><a class=sidebar-nav-item href=/>Home</a>
<a class=sidebar-nav-item href=/info/about/>About
Me</a>
<a class=sidebar-nav-item href=/info/privacy/>Privacy Policy</a><form class="sidebar-nav-item search-form" method=get action=/search><input type=text class=tftextinput name=q size=21 maxlength=120><button type=submit class=tfbutton><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="rgb(155,155,155)"><path d="M9.145 18.29c-5.042.0-9.145-4.102-9.145-9.145S4.103.0 9.145.0s9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321.0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"/></svg></button></form></nav><div class=sidebar-item><p>&copy; 2020. All rights reserved.</p></div></div><div id=snackbar>By using our website, you agree to our <a href=/privacy>privacy policy</a> <a id=close-privacy>&#x2715;</a></div><div class=wrap><div class=masthead><div class=container><h3 class=masthead-title><a href=/ title=Home style=color:#cfcdcd>Ruddra</a><small style=color:#838383;font-size:1.25rem>.com</small></h3><form class="masthead-search-form pull-right" method=get action=/search><input type=text class=tftextinput name=q size=21 maxlength=120><button type=submit class=tfbutton><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="rgb(155,155,155)"><path d="M9.145 18.29c-5.042.0-9.145-4.102-9.145-9.145S4.103.0 9.145.0s9.145 4.103 9.145 9.145-4.102 9.145-9.145 9.145zm0-15.167c-3.321.0-6.022 2.702-6.022 6.022s2.702 6.022 6.022 6.022 6.023-2.702 6.023-6.022-2.702-6.022-6.023-6.022zm9.263 12.443c-.817 1.176-1.852 2.188-3.046 2.981l5.452 5.453 3.014-3.013-5.42-5.421z"/></svg></button></form></div></div><div class=progress-container><div class=progress-bar id=myBar></div></div><div class="container content"><div class=post><h1 class=post-title>Deploy A Python App to OpenShift: Planning and Preparations</h1><span class=post-date>Aug 11, 2018 &#183; 6 min read &#183;
3 comments</span><div class=img-container><img class=img-center src=https://ruddra.com/content/images/2019/02/openshift-jenkins-python-nginx.jpg alt="Deploy A Python App to OpenShift: Planning and Preparations"></div><p>Deploying a Python application to OpenShift is fairly easy. Write a <strong>Dockerfile</strong> and run <code>oc new-app /path/to/Dockerfile</code>, that&rsquo;s it!! But if you want implement a full fledged modern CI/CD using Jenkins and openshift, you need to do little more than that. So let&rsquo;s dive into it.</p><p>We will explain about the whole process in three articles:</p><ol><li><a href=https://ruddra.com/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one>Part One</a>: We will explain the deployment structure and preparations.</li><li><a href=https://ruddra.com/openshift-python-gunicorn-nginx-jenkins-pipelines-part-two>Part Two</a>: We will write the Jenkins Pipeline.</li><li><a href=https://ruddra.com/openshift-python-gunicorn-nginx-jenkins-pipelines-part-three>Part Three</a>: Deploy using Jenkins Pipeline to OpenShift and Webhook implementation.</li></ol><p>In this article, we will explain the deployment structure and required preparations for this deployment.<div class=toc><h2 class=toc>Table of contents</h2><nav id=TableOfContents><ul><li><a href=#deployment-structure>Deployment structure</a></li><li><a href=#preparations>Preparations</a><ul><li><a href=#a-python-application>A &lsquo;Python&rsquo; application</a></li><li><a href=#preparing-nginx>Preparing NGINX</a></li><li><a href=#writing-dockerfile>Writing &lsquo;Dockerfile&rsquo;</a></li><li><a href=#preparing-git-repository>Preparing git repository</a></li><li><a href=#preparing-openshiftminishift>Preparing OpenShift/Minishift</a></li><li><a href=#preparing-jenkins>Preparing jenkins</a></li></ul></li><li><a href=#in-conclusion>In conclusion</a></li></ul></nav></div><div></p><h2 id=deployment-structure>Deployment structure<a href=#deployment-structure class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>In this deployment, our python program will be running inside a container. That program will be served through a Gunicorn server. We will reverse proxy this server from NGINX, running in the same container. The following diagram shows our application structure:
<img src=/content/images/2018/08/Screen-Shot-2018-08-12-at-3.32.20-PM.jpg alt=Screen-Shot-2018-08-12-at-3.32.20-PM></p><p>The OpenShift Cluster will have three project spaces, CI/CD, DEV and STAGE. CI/CD will contain the Jenkins file, running pipelines inside it. DEV and STAGE projects will have applications running inside them. Next diagram will show what we intend to do in this CI/CD project:
<img src=/content/images/2018/08/Screen-Shot-2018-08-12-at-3.28.36-PM.jpg alt=Screen-Shot-2018-08-12-at-3.28.36-PM></p><h2 id=preparations>Preparations<a href=#preparations class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>For implementing this CI/CD project, we need to prepare few things beforehand. Let us go through them one by one.</p><h3 id=a-python-application>A &lsquo;Python&rsquo; application<a href=#a-python-application class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p><em>NB: if you have a python application, which runs through gunicorn and has tests runable through nosetests(or any xml test result exporter) then please skip this section.</em></p><h4 id=writing-a-python-application>Writing a python application<a href=#writing-a-python-application class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h4><p>For this demo purpose, we will use a small Flask application, which exposes a simple REST api. We will be using the code below:</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>jsonify</span>

<span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

<span class=n>tasks</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>{</span>
        <span class=sa></span><span class=s1>&#39;</span><span class=s1>id</span><span class=s1>&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
        <span class=sa></span><span class=s1>&#39;</span><span class=s1>title</span><span class=s1>&#39;</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>OpenShift Jenkins Pipeline Python/Nginx Implementation</span><span class=s1>&#39;</span><span class=p>,</span>
        <span class=sa></span><span class=s1>&#39;</span><span class=s1>description</span><span class=s1>&#39;</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>Find the implementation at https://github.com/ruddra/openshift-python-nginx</span><span class=s1>&#39;</span>
    <span class=p>}</span><span class=p>,</span>
    <span class=p>{</span>
        <span class=sa></span><span class=s1>&#39;</span><span class=s1>id</span><span class=s1>&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
        <span class=sa></span><span class=s1>&#39;</span><span class=s1>title</span><span class=s1>&#39;</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>OpenShift Jenkins Pipeline Django Implementation</span><span class=s1>&#39;</span><span class=p>,</span>
        <span class=sa></span><span class=s1>&#39;</span><span class=s1>description</span><span class=s1>&#39;</span><span class=p>:</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>Find the implementation at https://github.com/ruddra/openshift-django</span><span class=s1>&#39;</span>
    <span class=p>}</span>
<span class=p>]</span>

<span class=nd>@app.route</span><span class=p>(</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>/</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>GET</span><span class=s1>&#39;</span><span class=p>]</span><span class=p>)</span>
<span class=k>def</span> <span class=nf>get_tasks</span><span class=p>(</span><span class=p>)</span><span class=p>:</span>
    <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=p>{</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>tasks</span><span class=s1>&#39;</span><span class=p>:</span> <span class=n>tasks</span><span class=p>}</span><span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=sa></span><span class=s1>&#39;</span><span class=s1>__main__</span><span class=s1>&#39;</span><span class=p>:</span>
    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=sa></span><span class=s1>&#39;</span><span class=s1>0.0.0.0</span><span class=s1>&#39;</span><span class=p>)</span>
</code></pre></div><p>First we should create a empty Project directory. Inside that, we will put another folder named <strong>app</strong>, which will contain the python application. Save the above flask application as <code>flask_app.py</code>. We need to install flask using <em>pip install flask</em> as well.</p><h4 id=adding-gunicorn>Adding gunicorn<a href=#adding-gunicorn class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h4><p>We can run this application using <code>python flask_app.py</code>, but its not safe to use a development server in production. So we will use <code>gunicorn</code> to run our application. Let&rsquo;s install that using <code>pip install gunicorn</code>, then write a <em>wsgi.py</em> inside the <strong>app</strong> directory.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>flask_app</span> <span class=kn>import</span> <span class=n>app</span> <span class=k>as</span> <span class=n>application</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=sa></span><span class=s2>&#34;</span><span class=s2>__main__</span><span class=s2>&#34;</span><span class=p>:</span>
    <span class=n>application</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=p>)</span>
</code></pre></div><p>If we run <code>gunicorn --bind 0.0.0.0:5000 wsgi</code>, we should be able to see our project up and running in <a href=0.0.0.0:5000>0.0.0.0:5000</a>. The output should look like this:
<img src=/content/images/2018/08/Screen-Shot-2018-08-11-at-9.22.20-PM.jpg alt=Screen-Shot-2018-08-11-at-9.22.20-PM></p><h4 id=writing-tests>Writing tests<a href=#writing-tests class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h4><p>Writing tests are important, and we are going to store test results in Jenkins. For this purpose, let&rsquo;s create some tests inside <strong>app</strong> directory.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>unittest</span>

<span class=k>class</span> <span class=nc>MyTestClass</span><span class=p>(</span><span class=n>unittest</span><span class=o>.</span><span class=n>TestCase</span><span class=p>)</span><span class=p>:</span>
  <span class=nd>@classmethod</span>
  <span class=k>def</span> <span class=nf>setUpClass</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span><span class=p>:</span>
      <span class=k>pass</span>

  <span class=nd>@classmethod</span>
  <span class=k>def</span> <span class=nf>tearDownClass</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span><span class=p>:</span>
      <span class=k>pass</span>

  <span class=k>def</span> <span class=nf>setUp</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=p>:</span>
      <span class=k>pass</span>

  <span class=k>def</span> <span class=nf>tearDown</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=p>:</span>
      <span class=k>pass</span>

  <span class=k>def</span> <span class=nf>test_dummy_one</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=p>:</span>
      <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>

  <span class=k>def</span> <span class=nf>test_dummy_two</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=p>:</span>
      <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=bp>True</span><span class=p>,</span> <span class=bp>True</span><span class=p>)</span>
</code></pre></div><p>For running the tests, we are going to use <code>nosetests</code>, so let&rsquo;s install that using <em>pip install nose</em>. We can run tests using <code>nosetests --with-xunit</code>, it will generate a xml file which will contain the test results.</p><p>Our preparation is complete for the python application. Now let&rsquo;s store our requirements using <code>pip freeze > requirements.pip</code>.</p><h3 id=preparing-nginx>Preparing NGINX<a href=#preparing-nginx class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>In this step, we will write a NGINX configuration file which will proxy pass the gunicorn server.</p><div class=highlight><pre class=chroma><code class=language-nginx data-lang=nginx><span class=k>upstream</span> <span class=s>web</span> <span class=p>{</span>
  <span class=kn>ip_hash</span><span class=p>;</span>
  <span class=kn>server</span> <span class=n>0.0.0.0</span><span class=p>:</span><span class=mi>5000</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>server</span> <span class=p>{</span>
    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
        <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
        <span class=kn>proxy_set_header</span> <span class=s>X-Real-IP</span> <span class=nv>$remote_addr</span><span class=p>;</span>
        <span class=kn>proxy_pass</span> <span class=s>http://web/</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=kn>listen</span> <span class=mi>8081</span><span class=p>;</span>
    <span class=kn>server_name</span> <span class=s>_</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div><p>In here, the NGINX will listen to 8081 port. It will proxy pass gunicorn at location &ldquo;/". Let&rsquo;s save the above code in <strong>default.conf</strong> file and store in <em>config/nginx</em> directory of the project.</p><h3 id=writing-dockerfile>Writing &lsquo;Dockerfile&rsquo;<a href=#writing-dockerfile class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>This is the most important preparation step of our project. For this demo purpose, we will be using a alpine based nginx Dockerfile.</p><div class=highlight><pre class=chroma><code class=language-docker data-lang=docker><span class=k>FROM</span><span class=s> nginx:mainline-alpine</span><span class=err>
</span><span class=err></span><span class=err>
</span><span class=err></span><span class=c># --- Python Installation ---</span><span class=err>
</span><span class=err></span><span class=k>RUN</span> apk add --no-cache python3 <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>    python3 -m ensurepip <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>    rm -r /usr/lib/python*/ensurepip <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>    pip3 install --upgrade pip setuptools <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>    <span class=k>if</span> <span class=o>[</span> ! -e /usr/bin/pip <span class=o>]</span><span class=p>;</span> <span class=k>then</span> ln -s pip3 /usr/bin/pip <span class=p>;</span> <span class=k>fi</span> <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>    <span class=k>if</span> <span class=o>[</span><span class=o>[</span> ! -e /usr/bin/python <span class=o>]</span><span class=o>]</span><span class=p>;</span> <span class=k>then</span> ln -sf /usr/bin/python3 /usr/bin/python<span class=p>;</span> <span class=k>fi</span> <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>    rm -r /root/.cache<span class=err>
</span><span class=err></span><span class=err>
</span><span class=err></span><span class=c># --- Work Directory ---</span><span class=err>
</span><span class=err></span><span class=k>WORKDIR</span><span class=s> /usr/src/app</span><span class=err>
</span><span class=err></span><span class=err>
</span><span class=err></span><span class=c># --- Python Setup ---</span><span class=err>
</span><span class=err></span><span class=k>ADD</span> . .<span class=err>
</span><span class=err></span><span class=k>RUN</span> pip install -r app/requirements.pip<span class=err>
</span><span class=err></span><span class=err>
</span><span class=err></span><span class=c># --- Nginx Setup ---</span><span class=err>
</span><span class=err></span><span class=k>COPY</span> config/nginx/default.conf /etc/nginx/conf.d/<span class=err>
</span><span class=err></span><span class=k>RUN</span> chmod g+rwx /var/cache/nginx /var/run /var/log/nginx<span class=err>
</span><span class=err></span><span class=k>RUN</span> chgrp -R root /var/cache/nginx<span class=err>
</span><span class=err></span><span class=k>RUN</span> sed -i.bak <span class=s1>&#39;s/^user/#user/&#39;</span> /etc/nginx/nginx.conf<span class=err>
</span><span class=err></span><span class=k>RUN</span> addgroup nginx root<span class=err>
</span><span class=err></span><span class=err>
</span><span class=err></span><span class=c># --- Expose and CMD ---</span><span class=err>
</span><span class=err></span><span class=k>EXPOSE</span><span class=s> 8081</span><span class=err>
</span><span class=err></span><span class=k>CMD</span> gunicorn --bind 0.0.0.0:5000 wsgi --chdir /usr/src/app/app <span class=p>&amp;</span> nginx -g <span class=s2>&#34;daemon off;&#34;</span><span class=err>
</span></code></pre></div><p>Let&rsquo;s store this Dockerfile in root directory of Project.
In <code>Python Setup</code> section, we are using a minimal python setup with pip enabled. For our demo purpose, this is just enough. If your project has more dependencies, then install them using <code>apk add python3-dev ...</code> etc.
In <code>NGINX Setup</code> section, we have add the nginx <strong>default.conf</strong> file to <strong>/etc/nginx/conf.d/</strong>.
In <code>Expose and CMD</code> section, we have exposed 8081 port and we will be running this command when the docker is running: <code>gunicorn --bind 0.0.0.0:5000 wsgi --chdir /usr/src/app/app & nginx -g "daemon off;"</code></p><p>So far, the project directories should be looking like this:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=p>|</span> - Project
<span class=p>|</span> -- app
<span class=p>|</span> <span class=p>|</span>-- flask_app.py
<span class=p>|</span> <span class=p>|</span>-- wsgi.py
<span class=p>|</span> <span class=p>|</span>-- requirements.pip
<span class=p>|</span> -- config
<span class=p>|</span> <span class=p>|</span>-- nginx
<span class=p>|</span> <span class=o>||</span>-- default.conf
<span class=p>|</span> - Dockerfile
</code></pre></div><p>If you want to run this <strong>Dockerfile</strong> in project root directory, you can do this like:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>docker build -t flask-nginx .
docker run -p 8081:8081 flask-nginx
</code></pre></div><p>You can access the application in browser through <a href=localhost:8081>localhost:8081</a></p><h3 id=preparing-git-repository>Preparing git repository<a href=#preparing-git-repository class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>Let&rsquo;s create a repository at your github/bitbucket account. Then push this code to that repository.</p><h3 id=preparing-openshiftminishift>Preparing OpenShift/Minishift<a href=#preparing-openshiftminishift class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>I would recommend using minishif for this demo purpose. I am not sure if this app will run in free RedHat&rsquo;s openshift cloud services. If you own a private OpenShift Server, that is fine too. For using minishift, please follow this <a href=https://docs.okd.io/latest/minishift/getting-started/installing.html>guideline</a>.</p><h3 id=preparing-jenkins>Preparing jenkins<a href=#preparing-jenkins class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h3><p>Once your openshift/minishift is ready, let&rsquo;s log into that system using:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>oc login --server<span class=o>=</span>server_name --username<span class=o>=</span>your_username --password<span class=o>=</span>your_password
</code></pre></div><p>Now, we need to create three project spaces, <strong>cicd</strong>, <strong>dev</strong>, <strong>stage</strong> for this demo purpose.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>oc new-project dev   --display-name<span class=o>=</span><span class=s2>&#34;Dev&#34;</span>
oc new-project stage --display-name<span class=o>=</span><span class=s2>&#34;Stage&#34;</span>
oc new-project cicd --display-name<span class=o>=</span><span class=s2>&#34;CI/CD&#34;</span>
</code></pre></div><p>Very good. Now we are going to use project <strong>cicd</strong> and install Jenkins there:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>oc project cicd
oc new-app jenkins-persistent
</code></pre></div><p>Let&rsquo;s expose jenkin&rsquo;s url using:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>oc expose svc/jenkins-persistant
</code></pre></div><p>FYI: You can do this step using OpenShift UI as well.
<img src=/content/images/2018/08/Screenshot.jpg alt=Screenshot></p><p>Now, we need to give jenkins permission to make changes in <strong>dev</strong> and <strong>stage</strong>. Let&rsquo;s do that using:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>oc policy add-role-to-user edit system:serviceaccount:cicd:jenkins -n dev
oc policy add-role-to-user edit system:serviceaccount:cicd:jenkins -n stage
</code></pre></div><h2 id=in-conclusion>In conclusion<a href=#in-conclusion class=hanchor arialabel=Anchor> <svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>&#xFE0E;</a></h2><p>Our preparation is completed. Let&rsquo;s continue with Jenkins pipeline in <a href=https://ruddra.com/openshift-python-gunicorn-nginx-jenkins-pipelines-part-two>next article</a>.</p><p>If you have any questions regarding this, feel free to comment. Thanks for reading.</p><p>Cheers!!</p></div><br><p><a class=tag-class href=/tags/openshift>OpenShift</a> <a class=tag-class href=/tags/jenkins>Jenkins</a> <a class=tag-class href=/tags/pipeline>Pipeline</a> <a class=tag-class href=/tags/ci/cd>CI/CD</a></p><div class=newsletter-section><h2>Get Better With OpenShift</h2><div id=commento class="commento-root commento-root-font"><div id=newsletter-error class=commento-error-box style=display:none>An error occurred when submitting the form, please try again.</div><div id=newsletter-submitted style=display:none><b>Thank you for your subscription to newsletters.<br>You will start recieving emails from next iteration.</b><br><br></div><div id=newsletter-body><div>Subscribe to get monthly articles about OpenShift and more.<br>We won't spam you. Unsubscribe at any time.</div><br><div id=commento-main-area class=commento-main-area><form id=comment-form method=post action=https://ruddra-comments.herokuapp.com/v2/entry/ruddra/ruddra.comments/master/comments><input type=hidden name=options[redirect] value=https://ruddra.com/posts/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one/#newsletter-submitted>
<input type=hidden name=options[slug] value=newsletter-subscription>
<input type=hidden name=options[parent] value=newsletter-subscription>
<input type=hidden name=options[origin] value=https://ruddra.com/newsletters/>
<input type=hidden name=options[redirectError] value=https://ruddra.com/posts/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one/#newsletter-error><div id=commento-login class=commento-login><input type=email name=fields[email] placeholder="Your email address" style="padding-left:10px;width:90%;line-height:2;border:1px solid rgba(50,50,93,.1)" required></div><div style=width:95.8%><button id=commento-submit-button-root type=submit class="commento-button commento-submit-button">Subscribe</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id=commento-checkbox-root name=options[subscribe] type=checkbox value=email required><label for=commento-checkbox-root>I agree to receive
emails</label></div></div></form></div></div></div></div><script>if(window.location.hash=="#newsletter-submitted"){var $comTarget=document.getElementById('newsletter-submitted');$comTarget.style.display='block';var $comTarget=document.getElementById('newsletter-body');$comTarget.style.display='none';}else if(window.location.hash=="#newsletter-error"){var $comTarget=document.getElementById('newsletter-error');$comTarget.style.display='block';}</script><div class=pagination><div class="pagination-item older"><span class=pagination-arrow>&#8592; Previous</span><div class=pagination-link><a href=https://ruddra.com/posts/django-openshift-pipeline/>Deploy Django to OpenShift Using Jenkins Pipeline(CI/CD)</a></div><div class=pagination-image><img src=https://ruddra.com/content/images/2020/04/cargo.jpg alt="Deploy Django to OpenShift Using Jenkins Pipeline(CI/CD)"></div><p class=pagination-text>Using Jenkins pipeline, you can easily automate your deployments in openshift. In this post, we are going to use this …</p></div><div class="pagination-item newer"><span class=pagination-arrow>Next &#8594;</span><div class=pagination-link><a href=https://ruddra.com/posts/openshift-python-gunicorn-nginx-jenkins-pipelines-part-two/>Writing Jenkins Pipeline For OpenShift Deployment</a></div><div class=pagination-image><img src=https://ruddra.com/content/images/2019/02/openshift-jenkins-python-nginx.jpg alt="Writing Jenkins Pipeline For OpenShift Deployment"></div><p class=pagination-text>Pipeline is a set of instructions, which will be executed as per given sequence and produce a output. Jenkins Pipeline …</p></div></div><div class=tiny><div id=commento class="commento-root commento-root-font"><div id=comment-submitted style=display:none><h3><i>Thank you for your comment. It will be published once approved.</i></h3><br></div><div id=comment-error class=commento-error-box style=display:none>An error occurred when submitting the form, please try again.</div><div id=commento-mod-tools class=commento-mod-tools style=display:none><button id=commento-mod-tools-lock-button>Lock Thread</button></div><div id=commento-main-area class=commento-main-area><form id=comment-form method=post action=https://ruddra-comments.herokuapp.com/v2/entry/ruddra/ruddra.comments/master/comments><input type=hidden name=options[redirect] value=https://ruddra.com/posts/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one/#comment-submitted>
<input type=hidden name=options[slug] value=openshift-python-gunicorn-nginx-jenkins-pipelines-part-one>
<input type=hidden name=options[parent] value=openshift-python-gunicorn-nginx-jenkins-pipelines-part-one>
<input type=hidden name=options[origin] value=https://ruddra.com/posts/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one/>
<input type=hidden id=comment-parent name=fields[reply_to]>
<input type=hidden name=options[redirectError] value=https://ruddra.com/posts/openshift-python-gunicorn-nginx-jenkins-pipelines-part-one/#comment-error><div id=commento-logged-container class=commento-logged-container><div class=commento-name id=comment-headline><b>Share Your Thoughts</b></div></div><div class=commento-logout></div></div><div id=commento-login class=commento-login><input type=txt name=fields[name] placeholder=Name style="padding-left:10px;width:100%;line-height:2;border:1px solid rgba(50,50,93,.1);margin-bottom:5px;border-radius:2px" required>
<input type=email name=fields[email] placeholder="Email(will not be shared publicly)" style="padding-left:10px;width:100%;line-height:2;border:1px solid rgba(50,50,93,.1);border-radius:2px" required></div><div id=commento-textarea-super-container-root class=commento-button-margin><div id=commento-textarea-container-root class=commento-textarea-container><textarea name=fields[comment] id=commento-textarea-root placeholder="Add a comment" onchange=renderCommentInMD(this.value) onkeyup=this.onchange(); onpaste=this.onchange(); oninput=this.onchange(); required></textarea></div><button id=commento-submit-button-root type=submit class="commento-button commento-submit-button">Add
Comment</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id=commento-anonymous-checkbox-root name=options[subscribe] type=checkbox value=email><label for=commento-anonymous-checkbox-root>Notify me of new comments</label></div><a id=commento-markdown-button-root class=commento-markdown-button><b>M ↓</b> &nbsp; Markdown</a></div><p id=commneto-renderer-msg></p></form><div id=commento-comments-area class=commento-comments><div id=commento-comment-card-77657f90-1fdf-11ea-bc32-ef9e3995ab90 style="border-left:2px solid #80c3df" class=commento-card><div class=commento-header><div id=commento-comment-options-77657f90-1fdf-11ea-bc32-ef9e3995ab90 class=commento-options><button id=commento-comment-reply-77657f90-1fdf-11ea-bc32-ef9e3995ab90 href=#comment-form onclick="changeValue('fields[reply_to]','77657f90-1fdf-11ea-bc32-ef9e3995ab90','Bhaktawr')" title="Reply to Bhaktawr" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img src="https://www.gravatar.com/avatar/604b20bcd8c267ff419475f99880c3df?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-77657f90-1fdf-11ea-bc32-ef9e3995ab90 class=commento-name>Bhaktawr</div><div id=commento-comment-subtitle-77657f90-1fdf-11ea-bc32-ef9e3995ab90 class=commento-subtitle><div id=commento-comment-timeago-77657f90-1fdf-11ea-bc32-ef9e3995ab90 title="Monday, Dec 16, 2019" class=commento-timeago>Monday, Dec 16, 2019</div></div></div><div id=commento-comment-contents-77657f90-1fdf-11ea-bc32-ef9e3995ab90><div id=commento-comment-body-77657f90-1fdf-11ea-bc32-ef9e3995ab90 class=commento-body><div id=commento-comment-text-77657f90-1fdf-11ea-bc32-ef9e3995ab90><p>as gunicorn will run in master worker setup, where have you defined the no. of workers ?</p></div></div></div><div><div id=commento-comment-card-00be3c80-2019-11ea-9209-3963309fdf4f style="border-left:2px solid #308024" class=commento-card><div class=commento-header><div id=commento-comment-options-00be3c80-2019-11ea-9209-3963309fdf4f class=commento-options><button id=commento-comment-reply-00be3c80-2019-11ea-9209-3963309fdf4f title="Reply to Ruddra" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick="changeValue('fields[reply_to]','77657f90-1fdf-11ea-bc32-ef9e3995ab90','Ruddra')"></button></div><img src="https://www.gravatar.com/avatar/32eeb1c619ba12f413b8f94d9d308024?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-00be3c80-2019-11ea-9209-3963309fdf4f class="commento-name commento-moderator">Ruddra</div><div id=commento-comment-subtitle-00be3c80-2019-11ea-9209-3963309fdf4f class=commento-subtitle><div id=commento-comment-timeago-00be3c80-2019-11ea-9209-3963309fdf4f title="Monday, Dec 16, 2019" class=commento-timeago>Monday, Dec 16, 2019</div></div></div><div id=commento-comment-contents-00be3c80-2019-11ea-9209-3963309fdf4f><div id=commento-comment-body-00be3c80-2019-11ea-9209-3963309fdf4f class=commento-body><div id=commento-comment-text-00be3c80-2019-11ea-9209-3963309fdf4f><p><p>I usually put it with CMD. Like this:</p><pre><code>gunicorn --bind 0.0.0.0:5000 wsgi --chdir /usr/src/app/app  --workers 3
</code></pre></p></div></div></div></div></div><script>function changeValue(elementName,newValue,name){document.getElementsByName(elementName)[0].value=newValue;document.getElementById('comment-headline').innerHTML="<b>Reply To: "+name+"</b>";window.location.hash="#comment-form";};</script></div><div id=commento-comment-card-776c8470-1fdf-11ea-bc32-ef9e3995ab90 style="border-left:2px solid #80c3df" class=commento-card><div class=commento-header><div id=commento-comment-options-776c8470-1fdf-11ea-bc32-ef9e3995ab90 class=commento-options><button id=commento-comment-reply-776c8470-1fdf-11ea-bc32-ef9e3995ab90 href=#comment-form onclick="changeValue('fields[reply_to]','776c8470-1fdf-11ea-bc32-ef9e3995ab90','Bhaktawr')" title="Reply to Bhaktawr" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img src="https://www.gravatar.com/avatar/604b20bcd8c267ff419475f99880c3df?s=70&r=pg&d=identicon" class=commento-avatar-img><div id=commento-comment-name-776c8470-1fdf-11ea-bc32-ef9e3995ab90 class=commento-name>Bhaktawr</div><div id=commento-comment-subtitle-776c8470-1fdf-11ea-bc32-ef9e3995ab90 class=commento-subtitle><div id=commento-comment-timeago-776c8470-1fdf-11ea-bc32-ef9e3995ab90 title="Monday, Dec 16, 2019" class=commento-timeago>Monday, Dec 16, 2019</div></div></div><div id=commento-comment-contents-776c8470-1fdf-11ea-bc32-ef9e3995ab90><div id=commento-comment-body-776c8470-1fdf-11ea-bc32-ef9e3995ab90 class=commento-body><div id=commento-comment-text-776c8470-1fdf-11ea-bc32-ef9e3995ab90><p>as gunicorn will run in master worker setup, where have you defined the no. of workers ?</p></div></div></div><div></div><script>function changeValue(elementName,newValue,name){document.getElementsByName(elementName)[0].value=newValue;document.getElementById('comment-headline').innerHTML="<b>Reply To: "+name+"</b>";window.location.hash="#comment-form";};</script></div></div></div></div><script>if(window.location.hash=="#comment-submitted"){var $comTarget=document.getElementById('comment-submitted');$comTarget.style.display='block';}else if(window.location.hash=="#comment-error"){var $comTarget=document.getElementById('comment-error');$comTarget.style.display='block';}
function renderCommentInMD(inputVal){var converter=new showdown.Converter();document.getElementById('commneto-renderer-msg').innerHTML=`<h2 class="commneto-renderer-msg-header" style="color:rgb(128, 9, 9); font-weight:800;font-size:20px">&nbspPreview:</h2>`+converter.makeHtml(inputVal);document.getElementById('commento-textarea-root').innerHTML=inputVal}
window.onscroll=function(){scrollProgressFunc()};function scrollProgressFunc(){var elmnt=document.getElementsByClassName("post");var winScroll=elmnt.scrollTop||document.documentElement.scrollTop;var height=document.documentElement.scrollHeight-document.documentElement.clientHeight;var scrolled=(winScroll/height)*100;document.getElementById("myBar").style.width=scrolled+"%";}</script></div></div><script src=https://ruddra.com/js/bundle.min.js async></script></div></div><label for=sidebar-checkbox class=sidebar-toggle></label><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-58095062-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body><script>function showPrivacy(){if(localStorage.getItem("cookieSeen")!="shown"){var x=document.getElementById("snackbar");x.className="show";localStorage.setItem("cookieSeen","shown")}}
showPrivacy();function closePrivacy(){var fadeTarget=document.getElementById("snackbar");var fadeEffect=setInterval(function(){if(!fadeTarget.style.opacity){fadeTarget.style.opacity=1;}
if(fadeTarget.style.opacity>0){fadeTarget.style.opacity-=0.1;}else{clearInterval(fadeEffect);}},50);}
document.getElementById("close-privacy").addEventListener('click',closePrivacy);</script></html>