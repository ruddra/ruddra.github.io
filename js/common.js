function setCookie(e,t){document.cookie=e+"="+(t||"")+";expires=expires=Fri, 31 Dec 9999 23:59:59 UTC;path=/"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function eraseCookie(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function storeForm(){var e=document.getElementById("comment-parent"),t=document.getElementById("commento-textarea-root"),o=document.getElementById("commento-anonymous-checkbox-root"),n=e.value,r=t.value,i=o.value;setCookie("comment-parent",n),setCookie("comment",r),setCookie("getemail",i)}function updateForm(){var e,t=document.getElementById("comment-parent"),o=document.getElementById("commento-textarea-root"),n=document.getElementById("commento-anonymous-checkbox-root"),r=getCookie("comment-parent"),i=getCookie("comment"),a=getCookie("getemail");return i?(t.value=r,o.value=i,n.value=a,e=!0):e=!1,eraseCookie("comment-parent"),eraseCookie("comment"),eraseCookie("getemail"),e}function getCode(){var e;if(URLSearchParams){e=new URLSearchParams(window.location.search).get("code")}else{e=function(){var e={},t=(window.location.search.split("?")[1]||"").split("&");for(var o in t)if(t.hasOwnProperty(o)){var n=t[o].split("=");e[n[0]]=decodeURIComponent(n[1]||"")}return e}().code}return e}function submitComment(e){var t=getCode(),o=document.getElementById("commento-textarea-root"),n=document.getElementById("commento-submit-button-root");if(o.style.disabled=!0,n.style.disabled=!0,t)e.currentTarget.submit();else{e.preventDefault(),storeForm();var r=window.location.href;window.location.href="https://github.com/login/oauth/authorize?scope=user:email&client_id=bc27cd2859301269f316&redirect_uri="+r}}function submitFormWithCode(){var e=getCode();if(e){document.getElementById("cover-spin").style.display="block";if(!updateForm())return window.location.href="#comment-error",null;var t=document.getElementById("comment-form");t.action="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/custom/ruddra/ruddra.comments/master/comments/"+e,t.submit()}}function toggleMarkDownTable(){var e=document.getElementById("commento-markdown-help-root");"none"===e.style.display?e.style.display="block":e.style.display="none"}function increaseLikeCounter(){for(var e=document.querySelectorAll(".like-count"),t=0;t<e.length;t++){var o=e[t],n=parseInt(o.innerText,10);n=isNaN(n)?0:n,n++,o.innerText=n}for(var r=document.querySelectorAll(".loved-count"),t=0;t<r.length;t++)r[t].style.color="#2c4fff",r[t].style.textShadow="-0.02ex 0 #222,0.02ex 0 #222"}function loveArticle(){1!=alreadyLiked()&&(storeLiked(),makePink(),submitLike())}function alreadyLiked(){return isNaN(getCookie("liked-"+getSlug()))}function getSlug(){return window.location.pathname.split("/").reverse()[1]}function createCORSRequest(e,t){var o=new XMLHttpRequest;return"withCredentials"in o?o.open(e,t,!0):"undefined"!=typeof XDomainRequest?(o=new XDomainRequest,o.open(e,t)):o=null,o}function makeHttpRequest(e){var t=getSlug(),o={"options[parent]":t,"options[slug]":t,"options[origin]":"https://ruddra.com/likes","fields[email]":window.location.href},n=[];Object.keys(o).forEach(function(e){var t=e+"="+o[e];n.push(t)});var r=createCORSRequest("POST","https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/github/ruddra/ruddra.likes/master/comments/");r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Access-Control-Allow-Origin","*"),r.onload=function(){200===this.status?(increaseLikeCounter(),makeRed()):e>0&&setTimeout(function(){makeHttpRequest(e--)},1e3)},r.onerror=function(){setTimeout(function(){makeHttpRequest(e--)},1e3)},r.send(n.join("&"))}function submitLike(){makeHttpRequest(5)}function storeLiked(){setCookie("liked-"+getSlug(),"liked")}function makeRed(){for(var e=document.querySelectorAll(".love-share-sign"),t=0;t<e.length;t++)e[t].style.fill="red"}function makePink(){for(var e=document.querySelectorAll(".love-share-sign"),t=0;t<e.length;t++)e[t].style.fill="#ff8fc7"}function showLiked(){1==alreadyLiked()&&(makeRed(),increaseLikeCounter())}if("#comment-submitted"==window.location.hash){var $comTarget=document.getElementById("comment-submitted-box");$comTarget.style.display="block"}else if("#comment-error"==window.location.hash){var $comTarget=document.getElementById("comment-error");$comTarget.style.display="block"}submitFormWithCode(),showLiked();var listener_=document.getElementById("love-share"),listener_mb=document.getElementById("love-share-mb");listener_&&listener_.addEventListener("click",loveArticle),listener_mb&&listener_mb.addEventListener("click",loveArticle);