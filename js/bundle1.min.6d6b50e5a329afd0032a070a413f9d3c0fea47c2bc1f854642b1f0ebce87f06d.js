/*! lozad.js - v1.15.0 - 2020-05-23
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */
function loadLoader(){var e=document.createElement("div");e.setAttribute("class","cover-spin"),document.body.appendChild(e)}function displayComments(){var e=document.getElementById("commento-comment");e&&(e.style.display="block")}function showComments(){displayComments(),location.hash="#comment-headline"}function setData(e,t){try{localStorage.setItem(e,t)}catch(n){t=encodeURIComponent(t),document.cookie=e+"="+(t||"")+";expires=expires=Fri, 31 Dec 9999 23:59:59 UTC;path=/"}}function getData(e){try{return localStorage.getItem(e)}catch(r){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return decodeURIComponent(a.substring(t.length,a.length))}return null}}function eraseData(e){try{return localStorage.removeItem(e)}catch(t){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}}function storeForm(){var e=document.getElementById("comment-parent"),t=document.getElementById("commento-textarea-root"),n=document.getElementById("commento-anonymous-checkbox-root");setData("comment-parent",e.value),setData("comment",t.value),setData("getemail",n.checked)}function updateForm(){var e,t=document.getElementById("comment-parent"),n=document.getElementById("commento-textarea-root"),o=document.getElementById("commento-anonymous-checkbox-root"),a=getData("comment-parent"),r=getData("comment"),i=getData("getemail");return r?(t.value=a,n.value=r,o.checked=i||"true"==i,e=!0):e=!1,eraseData("comment-parent"),eraseData("comment"),eraseData("getemail"),e}function getCode(){var e;if(URLSearchParams){e=new URLSearchParams(window.location.search).get("code")}else{e=function(){var e={},t=(window.location.search.split("?")[1]||"").split("&");for(var n in t)if(t.hasOwnProperty(n)){var o=t[n].split("=");e[o[0]]=decodeURIComponent(o[1]||"")}return e}().code}return e}function submitComment(e){var t=getCode();if(document.getElementById("commento-submit-button-root").disabled=!0,t)e.currentTarget.submit();else{e.preventDefault(),storeForm();var n=window.location.href;window.location.href="https://github.com/login/oauth/authorize?scope=user:email&client_id=bc27cd2859301269f316&redirect_uri="+n}}function submitFormWithCode(){var e=getCode();if(e){var t=document.createElement("div");t.setAttribute("class","cover-spin"),document.body.appendChild(t);if(!updateForm())return window.location.href="#comment-error",null;var n=document.getElementById("comment-form");n.action="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/custom/ruddra/ruddra.comments/master/comments/"+e,n.submit()}}function toggleMarkDownTable(){var e=document.getElementById("commento-markdown-help-root");"none"===e.style.display?e.style.display="block":e.style.display="none"}function increaseLikeCounter(){var e=document.getElementById("like-count"),t=parseInt(e.innerText,10);if(isNaN(t))setTimeout(function(){increaseLikeCounter()},0);else{t++,e.innerText=t;var n=document.getElementById("loved-count"),o=document.getElementById("love-share");o.style.cursor="auto",o.removeEventListener("click",loveArticle),n.style.textShadow="-0.02ex 0 #222,0.02ex 0 #222"}}function loveArticle(){1!=alreadyLiked()&&(storeLiked(),makePink(),submitLike())}function alreadyLiked(){return isNaN(getData("liked-"+getSlug()))}function getSlug(){return window.location.pathname.split("/").reverse()[1]}function createCORSRequest(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n}function makeHttpRequest(e){var t=getSlug(),n={"options[parent]":t,"options[slug]":t,"options[origin]":"https://ruddra.com/likes","fields[email]":window.location.href},o=[];Object.keys(n).forEach(function(e){var t=e+"="+n[e];o.push(t)});var a=createCORSRequest("POST","https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/github/ruddra/ruddra.likes/master/comments/");a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.setRequestHeader("Access-Control-Allow-Origin","*"),a.onload=function(){200===this.status?(increaseLikeCounter(),makeRed()):e>0&&setTimeout(function(){makeHttpRequest(e--)},1e3)},a.onerror=function(){setTimeout(function(){makeHttpRequest(e--)},1e3)},a.send(o.join("&"))}function submitLike(){makeHttpRequest(5)}function storeLiked(){setData("liked-"+getSlug(),"liked")}function makeRed(){document.getElementById("love-share-sign").style.fill="#ff0000"}function makePink(){document.getElementById("love-share-sign").style.fill="#ff8fc7"}function showLiked(){1==alreadyLiked()&&(makeRed(),increaseLikeCounter())}function changeValue(e,t,n){document.getElementsByName(e)[0].value=t;var o=document.getElementById("comment-headline");o.innerHTML="<b>Reply To: "+n+"</b>",o.scrollIntoView()}function addSnackbar(){var e=document.createElement("div"),t=document.createElement("br");e.setAttribute("id","snackbar"),e.setAttribute("class","show");var n=document.createTextNode("Cookies are served on this site to analyze traffic, remember your preferences and optimize your experience.");e.appendChild(n),e.appendChild(t);var o=document.createElement("span"),a=document.createElement("a");a.setAttribute("href","/privacy");var r=document.createTextNode("More Details");a.appendChild(r),a.setAttribute("href","/privacy"),o.appendChild(a);var i=document.createElement("a");i.onclick=function(){e.remove()},i.setAttribute("id","close-privacy");var c=document.createTextNode("OK");i.appendChild(c),o.appendChild(i),e.appendChild(o),document.body.appendChild(e)}function showPrivacy(){setTimeout(function(){function e(){dataLayer.push(arguments)}getData("cookieSeen")||(addSnackbar(),setData("cookieSeen",!0)),window.dataLayer=window.dataLayer||[{gaPropertyId:"UA-58095062-1"}],e("js",new Date),e("config","UA-58095062-1"),function(e,t,n,o,a){e[o]=e[o]||[],e[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=t.getElementsByTagName(n)[0],i=t.createElement(n);i.async=!0,i.src="https://www.googletagmanager.com/gtag/js?id=UA-58095062-1&gtm_cookies_win=x",r.parentNode.insertBefore(i,r)}(window,document,"script","dataLayer")},5e3)}function toggleTheme(){var e=getData(currentThemeName);e&&"dark"==e?(eraseData(currentThemeName),setData(currentThemeName,"light")):e&&"light"==e?(eraseData(currentThemeName),setData(currentThemeName,"dark")):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?setData(currentThemeName,"light"):setData(currentThemeName,"dark")}if(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.lozad=t()}(this,function(){"use strict";function e(e){e.setAttribute("data-loaded",!0)}var t="undefined"!=typeof document&&document.documentMode,n={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()){var n=document.createElement("img");t&&e.getAttribute("data-iesrc")&&(n.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(n.alt=e.getAttribute("data-alt")),e.append(n)}if("video"===e.nodeName.toLowerCase()&&!e.getAttribute("data-src")&&e.children){for(var o=e.children,a=void 0,r=0;r<=o.length-1;r++)(a=o[r].getAttribute("data-src"))&&(o[r].src=a);e.load()}e.getAttribute("data-poster")&&(e.poster=e.getAttribute("data-poster")),e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset"));var i=",";if(e.getAttribute("data-background-delimiter")&&(i=e.getAttribute("data-background-delimiter")),e.getAttribute("data-background-image"))e.style.backgroundImage="url('"+e.getAttribute("data-background-image").split(i).join("'),url('")+"')";else if(e.getAttribute("data-background-image-set")){var c=e.getAttribute("data-background-image-set").split(i),d=c[0].substr(0,c[0].indexOf(" "))||c[0];d=-1===d.indexOf("url(")?"url("+d+")":d,1===c.length?e.style.backgroundImage=d:e.setAttribute("style",(e.getAttribute("style")||"")+"background-image: "+d+"; background-image: -webkit-image-set("+c+"); background-image: image-set("+c+")")}e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded:function(){}},o=function(e){return"true"===e.getAttribute("data-loaded")};return function(){var t,a,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=Object.assign({},n,i),d=c.root,m=c.rootMargin,s=c.threshold,l=c.load,u=c.loaded,g=void 0;return"undefined"!=typeof window&&window.IntersectionObserver&&(g=new IntersectionObserver((t=l,a=u,function(n,r){n.forEach(function(n){(0<n.intersectionRatio||n.isIntersecting)&&(r.unobserve(n.target),o(n.target)||(t(n.target),e(n.target),a(n.target)))})}),{root:d,rootMargin:m,threshold:s})),{observe:function(){for(var t=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)}(r,d),n=0;n<t.length;n++)o(t[n])||(g?g.observe(t[n]):(l(t[n]),e(t[n]),u(t[n])))},triggerLoad:function(t){o(t)||(l(t),e(t),u(t))},observer:g}}}),!("IntersectionObserver"in window)){var script=document.createElement("script");script.src="/js/intersection-observer.js",document.getElementsByTagName("head")[0].appendChild(script)}var observer=lozad();if(observer.observe(),function(){function e(e,t){e.textContent=t,setTimeout(function(){e.textContent="Copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o=document.createElement("button");o.className="highlight-copy-btn",o.textContent="Copy";var a=n.firstElementChild;o.addEventListener("click",function(){try{var n=t(a);document.execCommand("copy"),n.removeAllRanges(),e(o,"Copied!")}catch(t){console&&console.log(t),e(o,"Failed :'(")}}),n.appendChild(o)}if(document.queryCommandSupported("copy")){var o=document.getElementsByClassName("highlight");Array.prototype.forEach.call(o,n)}}(),"#newsletter-submitted"==window.location.hash){var $comTarget=document.getElementById("newsletter-submitted-box");$comTarget.style.display="block";var $comTarget=document.getElementById("newsletter-body");$comTarget.style.display="none"}else if("#newsletter-error"==window.location.hash){var $comTarget=document.getElementById("newsletter-error");$comTarget.style.display="block"}var elm=document.getElementById("commento-form");elm&&(elm.onsubmit=loadLoader);var elem=document.getElementById("commento"),observer=new IntersectionObserver(function(e){e[0].intersectionRatio>0&&displayComments()});elem&&observer.observe(elem);var showComment=document.getElementById("show-comment-btn");if(showComment&&showComment.addEventListener("click",showComments),"#comment-submitted"==window.location.hash){var $comTarget=document.getElementById("comment-submitted-box");$comTarget.style.display="block"}else if("#comment-error"==window.location.hash){var $comTarget=document.getElementById("comment-error");$comTarget.style.display="block"}document.getElementById("comment-form").addEventListener("submit",submitComment),submitFormWithCode(),showLiked();var listener_=document.getElementById("love-share");listener_&&listener_.addEventListener("click",loveArticle),showPrivacy();var currentThemeName="currentTheme";if("light"!=getData(currentThemeName)&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)document.body.classList.add("dark-theme"),setData(currentThemeName,"dark");else if("dark"!=getData(currentThemeName)&&window.matchMedia&&!window.matchMedia("(prefers-color-scheme: dark)").matches){try{document.body.classList.remove("dark-theme")}catch(e){}setData(currentThemeName,"light")}const btn=document.querySelector(".btn-toggle-thm");btn.addEventListener("click",function(){document.body.classList.toggle("dark-theme"),toggleTheme()});