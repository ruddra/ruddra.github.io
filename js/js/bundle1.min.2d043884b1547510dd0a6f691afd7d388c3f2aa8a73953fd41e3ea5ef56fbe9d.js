/*! lozad.js - v1.16.0 - 2020-09-06
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2020 Apoorv Saxena; Licensed MIT */
function loadLoader(){var e=document.createElement("div");e.setAttribute("class","cover-spin"),document.body.appendChild(e)}function displayComments(){var e=document.getElementById("commento-comment");e&&(e.style.display="block")}function showComments(){displayComments(),location.hash="#comment-headline"}function colorComments(){document.querySelectorAll('[id^="commento-comment-card-"]').forEach(function(e){console.log(e);var t=e.id.replace("commento-comment-card-","#").substring(0,7);e.style.borderColor=t})}function setData(e,t){try{localStorage.setItem(e,t)}catch(n){t=encodeURIComponent(t),document.cookie=e+"="+(t||"")+";expires=expires=Fri, 31 Dec 9999 23:59:59 UTC;path=/"}}function getData(e){try{return localStorage.getItem(e)}catch(a){for(var t,n=e+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(t=o[r];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(n))return decodeURIComponent(t.substring(n.length,t.length))}return null}}function eraseData(e){try{return localStorage.removeItem(e)}catch(t){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}}function storeForm(){var e=document.getElementById("comment-parent"),t=document.getElementById("commento-textarea-root"),n=document.getElementById("commento-anonymous-checkbox-root");setData("comment-parent",e.value),setData("comment",t.value),setData("getemail",n.checked)}function updateForm(){var e,t=document.getElementById("comment-parent"),n=document.getElementById("commento-textarea-root"),o=document.getElementById("commento-anonymous-checkbox-root"),r=getData("comment-parent"),a=getData("comment"),c=getData("getemail");return a?(t.value=r,n.value=a,o.checked=1==c||"true"==c,e=!0):e=!1,eraseData("comment-parent"),eraseData("comment"),eraseData("getemail"),e}function getCode(){if(URLSearchParams)t=new URLSearchParams(window.location.search),e=t.get("code");else{var e,t;e=function(){var e,t,n={},o=(window.location.search.split("?")[1]||"").split("&");for(t in o)o.hasOwnProperty(t)&&(e=o[t].split("="),n[e[0]]=decodeURIComponent(e[1]||""));return n}().code}return e}function submitComment(e){var t,n=getCode();document.getElementById("commento-submit-button-root").disabled=!0,n?e.currentTarget.submit():(e.preventDefault(),storeForm(),t=window.location.href,window.location.href="https://github.com/login/oauth/authorize?scope=user:email&client_id=bc27cd2859301269f316&redirect_uri="+t)}function submitFormWithCode(){var e,t,n=getCode();if(n){if(e=document.createElement("div"),e.setAttribute("class","cover-spin"),document.body.appendChild(e),!updateForm())return window.location.href="#comment-error",null;t=document.getElementById("comment-form"),t.action="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/custom/ruddra/ruddra.comments/master/comments/"+n,t.submit()}}function toggleMarkDownTable(){var e=document.getElementById("commento-markdown-help-root");"none"===e.style.display?e.style.display="block":e.style.display="none"}function increaseLikeCounter(){var e,t,n=document.getElementById("like-count"),o=parseInt(n.innerText,10);isNaN(o)?setTimeout(function(){increaseLikeCounter()},0):(o++,n.innerText=o,t=document.getElementById("loved-count"),e=document.getElementById("love-share"),e.style.cursor="auto",e.removeEventListener("click",loveArticle),t.style.textShadow="-0.02ex 0 #222,0.02ex 0 #222")}function loveArticle(){1!=alreadyLiked()&&(storeLiked(),makePink(),submitLike())}function alreadyLiked(){return isNaN(getData("liked-"+getSlug()))}function getSlug(){return window.location.pathname.split("/").reverse()[1]}function createCORSRequest(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n}function makeHttpRequest(e){var t,n,o=getSlug(),r={"options[parent]":o,"options[slug]":o,"options[origin]":"https://ruddra.com/likes","fields[email]":window.location.href},a=[];Object.keys(r).forEach(function(e){var t=e+"="+r[e];a.push(t)}),n="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/github/ruddra/ruddra.likes/master/comments/",t=createCORSRequest("POST",n),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.setRequestHeader("Access-Control-Allow-Origin","*"),t.onload=function(){200===this.status?(increaseLikeCounter(),makeRed()):e>0&&setTimeout(function(){makeHttpRequest(e--)},1e3)},t.onerror=function(){setTimeout(function(){makeHttpRequest(e--)},1e3)},t.send(a.join("&"))}function submitLike(){makeHttpRequest(5)}function storeLiked(){setData("liked-"+getSlug(),"liked")}function makeRed(){document.getElementById("love-share-sign").style.fill="#ff0000"}function makePink(){document.getElementById("love-share-sign").style.fill="#ff8fc7"}function showLiked(){1==alreadyLiked()&&makeRed()}function changeValue(e,t,n){document.getElementsByName(e)[0].value=t;var o=document.getElementById("comment-headline");o.innerHTML="<b>Reply To: "+n+"</b>",o.scrollIntoView()}function addSnackbar(e,t,n,o,r){var a,c,i,d,m=document.createElement("div");m.setAttribute("id",o),m.setAttribute("class","show"),c=document.createTextNode(e),m.appendChild(c),r&&(i=document.createElement("br"),d=document.createElement("br"),m.appendChild(i),m.appendChild(d)),a=document.createElement("span"),a.appendChild(t),a.appendChild(n),m.appendChild(a),document.body.appendChild(m)}function showReloadAlert(){var e,t,n=document.createElement("a"),o=document.createTextNode("Click here to refresh");n.setAttribute("class","clsbtnreload"),n.appendChild(o),t=document.createElement("span"),t.appendChild(n),o=document.createTextNode(" the page"),t.appendChild(o),n.onclick=function(){document.getElementById("alert").remove(),window.location.reload()},e=document.createElement("span"),e.setAttribute("class","closebtn"),e.innerHTML="&times;",e.onclick=function(){document.getElementById("alert").remove()},addSnackbar("New contents are available. ",t,e,"alert",!1)}function showPrivacy(){setTimeout(function(){function e(){dataLayer.push(arguments)}var t,n,o,r,a="cookieSeen";getData(a)||(t=document.createElement("a"),t.setAttribute("href","/privacy/"),o=document.createTextNode("More Details"),t.appendChild(o),t.setAttribute("href","/privacy/"),n=document.createElement("a"),n.onclick=function(){document.getElementById("snackbar").remove()},n.setAttribute("id","close-privacy"),r=document.createTextNode("OK"),n.appendChild(r),addSnackbar("Cookies are served on this site to analyze traffic, remember your preferences and optimize your experience.",t,n,"snackbar",!0),setData(a,!0)),window.dataLayer=window.dataLayer||[{gaPropertyId:"UA-58095062-1"}],e("js",new Date),e("config","UA-58095062-1"),function(e,t,n,o,r){e[o]=e[o]||[],e[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],c=t.createElement(n);c.async=!0,c.src="/js/tags.js?id=UA-58095062-1&gtm_cookies_win=x",a.parentNode.insertBefore(c,a)}(window,document,"script","dataLayer")},5e3)}function toggleTheme(){var e=getData(currentThemeName);e&&"dark"==e?(eraseData(currentThemeName),setData(currentThemeName,"light")):e&&"light"==e?(eraseData(currentThemeName),setData(currentThemeName,"dark")):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?setData(currentThemeName,"light"):setData(currentThemeName,"dark")}if(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.lozad=t()}(this,function(){"use strict";function e(e){e.setAttribute("data-loaded",!0)}var t,n,o="undefined"!=typeof document&&document.documentMode,r={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()&&(r=e.querySelector("img"),c=!1,null===r&&(r=document.createElement("img"),c=!0),o&&e.getAttribute("data-iesrc")&&(r.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(r.alt=e.getAttribute("data-alt")),c&&e.append(r)),"video"===e.nodeName.toLowerCase()&&!e.getAttribute("data-src")&&e.children){for(var t,n,r,a,c,i=e.children,d=void 0,m=0;m<=i.length-1;m++)(d=i[m].getAttribute("data-src"))&&(i[m].src=d);e.load()}e.getAttribute("data-poster")&&(e.poster=e.getAttribute("data-poster")),e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),a=",",e.getAttribute("data-background-delimiter")&&(a=e.getAttribute("data-background-delimiter")),e.getAttribute("data-background-image")?e.style.backgroundImage="url('"+e.getAttribute("data-background-image").split(a).join("'),url('")+"')":e.getAttribute("data-background-image-set")&&(t=e.getAttribute("data-background-image-set").split(a),n=t[0].substr(0,t[0].indexOf(" "))||t[0],n=-1===n.indexOf("url(")?"url("+n+")":n,1===t.length?e.style.backgroundImage=n:e.setAttribute("style",(e.getAttribute("style")||"")+"background-image: "+n+"; background-image: -webkit-image-set("+t+"); background-image: image-set("+t+")")),e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded:function(){}};return t=function(e){return"true"===e.getAttribute("data-loaded")},n=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)},function(){var o,a,c,i,d,m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=Object.assign({},r,s),u=l.root,g=l.rootMargin,h=l.threshold,p=l.load,f=l.loaded,b=void 0;for("undefined"!=typeof window&&window.IntersectionObserver&&(b=new IntersectionObserver((i=p,d=f,function(n,o){n.forEach(function(n){(0<n.intersectionRatio||n.isIntersecting)&&(o.unobserve(n.target),t(n.target)||(i(n.target),e(n.target),d(n.target)))})}),{root:u,rootMargin:g,threshold:h})),a=n(m,u),o=0;o<a.length;o++)(c=a[o]).getAttribute("data-placeholder-background")&&(c.style.background=c.getAttribute("data-placeholder-background"));return{observe:function(){for(var o=n(m,u),r=0;r<o.length;r++)t(o[r])||(b?b.observe(o[r]):(p(o[r]),e(o[r]),f(o[r])))},triggerLoad:function(n){t(n)||(p(n),e(n),f(n))},observer:b}}}),!("IntersectionObserver"in window)){var script=document.createElement("script"),observer,$comTarget,$spinner,elm,elem,showComment,listener_,currentThemeName,currentTheme;script.src="/js/intersection-observer.js",document.getElementsByTagName("head")[0].appendChild(script)}if(observer=lozad(),observer.observe(),function(){function e(e,t){e.textContent=t,setTimeout(function(){e.textContent="Copy"},1e3)}function t(e){var t=window.getSelection(),n=document.createRange();return n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n),t}function n(n){var o,r=document.createElement("button");r.className="highlight-copy-btn",r.textContent="Copy",o=n.firstElementChild,r.addEventListener("click",function(){try{var n=t(o);document.execCommand("copy"),n.removeAllRanges(),e(r,"Copied!")}catch(t){console&&console.log(t),e(r,"Failed :'(")}}),n.appendChild(r)}if(document.queryCommandSupported("copy")){var o=document.getElementsByClassName("highlight");Array.prototype.forEach.call(o,n)}}(),"#newsletter-submitted"==window.location.hash)$comTarget=document.getElementById("newsletter-submitted-box"),$comTarget.style.display="block",$comTarget=document.getElementById("newsletter-body"),$comTarget.style.display="none";else if("#newsletter-error"==window.location.hash){$comTarget=document.getElementById("newsletter-error"),$comTarget.style.display="block";try{$spinner=document.getElementsByClassName("cover-spin"),$spinner.style.display="none"}catch(e){}}if((elm=document.getElementById("commento-form"))&&(elm.onsubmit=loadLoader),elem=document.getElementById("commento"),observer=new IntersectionObserver(function(e){e[0].intersectionRatio>0&&(displayComments(),colorComments())}),elem&&observer.observe(elem),showComment=document.getElementById("show-comment-btn"),showComment&&showComment.addEventListener("click",showComments),"#comment-submitted"==window.location.hash)$comTarget=document.getElementById("comment-submitted-box"),$comTarget.style.display="block";else if("#comment-error"==window.location.hash){$comTarget=document.getElementById("comment-error"),$comTarget.style.display="block";try{$spinner=document.getElementsByClassName("cover-spin"),$spinner.style.display="none"}catch(e){}}if(document.getElementById("comment-form").addEventListener("submit",submitComment),submitFormWithCode(),showLiked(),(listener_=document.getElementById("love-share"))&&listener_.addEventListener("click",loveArticle),showPrivacy(),currentThemeName="currentTheme",null==(currentTheme=getData(currentThemeName))&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)document.body.classList.add("dark-theme"),setData(currentThemeName,"dark");else if("dark"==getData(currentThemeName))document.body.classList.add("dark-theme");else{try{document.body.classList.remove("dark-theme")}catch(e){}setData(currentThemeName,"light")}const btn=document.querySelector(".btn-toggle-thm");btn.addEventListener("click",function(){document.body.classList.toggle("dark-theme"),toggleTheme()});