<!doctype html><html lang=en><meta http-equiv=x-ua-compatible content="IE=edge"><meta charset=utf-8><meta name=author content="Arnab Kumar Shil"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#000000><meta property=fb:app_id content=668971647169067><link rel=manifest href=/manifest.json crossorigin=use-credentials><meta name=yandex-verification content=3ccce49727df78e2><link rel=copyright href=https://ruddra.com/django-custom-user-migration-mid-phase-project/#copyright><link rel=article:author href=https://ruddra.com/about/ ><meta name=robots content=index,follow><meta name=referrer content=unsafe-url><meta property=og:url content=https://ruddra.com/django-custom-user-migration-mid-phase-project/ ><meta name=keywords content=Django,Migration,Models,Blog><title>Django: Changing User Model in Mid-Project</title><meta name=description content="Cure to 'ValueError: Related model 'app.User' cannot be resolved'.
"><meta name=twitter:label1 value="Reading time"><meta name=twitter:data1 value="3 Minutes"><style type=text/css>*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-family:-apple-system,BlinkMacSystemFont,segoe ui adjusted,segoe ui,liberation sans,sans-serif;font-weight:400;font-size:16px;line-height:1.8}body,html{overflow-x:hidden}h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;line-height:1.25;letter-spacing:-.025rem;color:#303030;font-weight:400}h1{font-size:2rem;margin-bottom:.5em}h2{margin-top:1rem;font-size:1.75rem}a{text-decoration:none;padding:2px}p{margin-top:0;margin-bottom:1.25rem;font-size:20px;line-height:1.5}li{font-size:20px;line-height:1.5}body,html{margin:0;padding:0;scroll-behavior:smooth;overflow:auto;scrollbar-width:thin;scrollbar-color:#a4a4a4 transparent}body{color:#515151;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a{color:#246db1}strong{color:#303030}blockquote{padding:.5rem 1rem;margin:.8rem 0;color:#5e5e5e;border-left:4px solid #d2d2d2;letter-spacing:.5px;line-height:1.5;border-radius:.1rem;background-color:#f6f6f6}.icon-side-bar{color:#000;padding-left:1%;padding-right:1%}b,strong{text-shadow:.0001px 0 0 currentColor}body.dark-theme{background-color:#37383e;color:#eee}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-button{background-color:#666}::-webkit-scrollbar-thumb{background-color:#a4a4a4;border-radius:3px}body.dark-theme .highlight .chroma::-webkit-scrollbar-track,body.dark-theme::-webkit-scrollbar-track{background-color:transparent}body.dark-theme .highlight .chroma::-webkit-scrollbar-track-piece,body.dark-theme::-webkit-scrollbar-track-piece{background-color:transparent}body.dark-theme .highlight .chroma::-webkit-scrollbar-corner,body.dark-theme::-webkit-scrollbar{background-color:transparent}body.dark-theme .highlight .chroma::-webkit-resizer,body.dark-theme::-webkit-scrollbar{background-color:transparent}body.dark-theme a{color:#05ec8c}body.dark-theme .topbar a{color:#cfcdcd}.tag-links-a{color:#000}.container{padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.masthead{border-bottom:1px solid #eee;padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem;background:#202020}.masthead .container{max-width:50rem}.masthead-title{margin-top:0;margin-bottom:0;color:#505050;font-size:20px;letter-spacing:-.025rem;line-height:1.25}.homepage-title a,.masthead-title a{color:#505050;padding:0}.masthead-title small{font-size:75%;font-weight:400;color:silver;letter-spacing:0}h3{font-weight:400;margin-top:1.5rem;font-size:1.5rem}h4,h5,h6{margin-top:1rem;font-size:1.25rem}body .container{max-width:44.5rem}.img-container{max-height:350px;margin-bottom:20px;overflow:hidden}.content{min-height:74vh}.photo-credit{text-align:center;margin-bottom:3px;margin-top:-10px}.page-title,.post-title,.post-title a{color:#303030}.home-posts{margin-bottom:-20px;margin-top:20px;position:relative;padding:10px}.post .home-posts .img-container{max-height:135px;margin-bottom:20px;display:flex;overflow:hidden}.home-posts .tags{position:absolute;top:1.2rem;right:1rem}.post-date{display:block;margin-top:-.5rem;margin-bottom:.5rem;color:#736d6d;font-size:18px}#snackbar{display:none}#nav-check{display:none}.hamburger{display:none;margin-right:0;float:right;margin-top:-26px;cursor:pointer}.topbar{position:relative;margin-right:0;list-style:none;float:right;top:-27px}.topbar li{float:left;margin-left:1rem;color:#cfcdcd;font-size:19px;letter-spacing:-.4px}.masthead .homepage-title .home-title,.masthead .masthead-title .home-title{color:#cfcdcd}.masthead .homepage-title .home-title-small,.masthead .masthead-title .home-title-small{color:#8c8585;font-size:20px;letter-spacing:-.25px}.homepage-title{margin:0;font-size:20px;line-height:1.25;letter-spacing:-.025rem;font-weight:400}.content .headline-description{margin-top:1rem;margin-bottom:1rem;color:#4f4f4f;font-size:20px;text-align:left;line-height:1.25}.caution{border-left:4px solid #f88888}#copyright{text-align:center;padding-top:1rem;padding-bottom:1rem}.pagination{overflow:hidden;margin-left:-1rem;margin-right:-1rem;color:#ccc;text-align:center}.pagination-item{display:block;padding:1rem;border:1px solid #eee;min-height:350px}.post blockquote p{text-align:left}.pagination-item:first-child{margin-bottom:-1px}.pagination{overflow:hidden;margin-left:-1rem;margin-right:-1rem;text-align:center;color:#222}.pagination-item{display:block;padding:1rem;border:1px solid #eee}.pagination-item:first-child{margin-bottom:-1px}.side-share{position:relative;margin-left:0;padding-inline-start:0;list-style:none;float:left;margin-bottom:0}.side-share li{float:left;margin-right:.5rem}.side-share .tags{float:right;padding-top:1.5px}.newsletter-section{text-align:center;border-style:solid;border-width:1px;border-color:#bebbbb;border-radius:3px}.pagination-item{font-size:16px;padding:.5rem 1rem 1rem}.miscellaneous{margin-bottom:6rem;margin-top:2.3rem}.highlight-copy-btn{position:absolute;top:8px;right:8px;border:0;border-radius:4px;padding:1px;font-size:.7rem;line-height:1.8;color:#fff;opacity:.5;min-width:55px;text-align:center;visibility:hidden}#_toc{display:none}input+.collapse+nav{display:none}code,pre{font-family:Menlo,Monaco,courier new,monospace}code{padding:.25em .5em;font-size:85%;background-color:#f0f0f0;border-radius:3px}pre{display:block;margin-top:0;margin-bottom:1rem;padding:1rem;font-size:.8rem;line-height:1.4;white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word;background-color:#f0f0f0}pre code{padding:0;font-size:16px;color:inherit;background-color:transparent}.pagination a,.pagination span{padding:5px;text-decoration:none;font-size:18px}.commento-root textarea{display:inline-block;white-space:pre-wrap;padding:8px;outline:0;overflow:auto;min-height:130px;width:100%}img{display:block;max-width:100%;margin:0 0 1rem;border-radius:5px;margin-left:auto;margin-right:auto}.img-container{overflow:hidden;display:flex;width:100%}.img-container amp-img,.img-container img{border-radius:0;width:100%;align-self:center;height:auto}.post .home-posts .img-container{overflow:hidden;display:flex;width:100%}.page-img-container{overflow:hidden;margin-bottom:20px;display:flex;max-width:100%}.page-img-container amp-img,.page-img-container img{border-radius:0;width:100%;align-self:center;height:auto}.pagination-image{padding-top:5px;border-radius:0;overflow:hidden;height:150px;display:flex}iframe{padding-top:1rem;padding-bottom:2rem}.pagination-image amp-img,.pagination-image img{border-radius:0;width:100%;align-self:center}amp-img img{object-fit:contain}.commento-root .commento-avatar-img{width:38px;height:38px;border-radius:50%;display:flex;justify-content:center;align-items:center;float:left;margin-right:10px}.home-posts .headline-description{font-size:18px}#svg-scholar{margin-bottom:-2px}@media only screen and (min-width:30em){.container{max-width:28rem}.pagination-item{float:left;width:50%}.pagination-item:first-child{margin-bottom:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination-item:last-child{margin-left:-1px;border-top-right-radius:4px;border-bottom-right-radius:4px}blockquote{padding-left:1.25rem}.pagination{margin:3rem 0}.commento-comments{margin-top:2rem}}@media only screen and (min-width:38em){.container{max-width:32rem}}@media only screen and (min-width:56em){.container{max-width:42rem}.pagination-item{min-height:350px}}@media screen and (max-width:56em){body{line-height:1.5}.commento-markdown{display:none}.loved-count{font-size:8px}.comment-count{font-size:8px}}@media screen and (max-width:48em){#alert{min-width:65%}.homepage-title,.masthead-title{text-align:center}.side-share .tags{position:absolute;margin-top:2.5rem;margin-bottom:4rem}.side-share .tags .tag-links-a{float:none;margin-right:2px;margin-left:0}.miscellaneous{margin-bottom:8rem}.img-container{margin-bottom:0}.photo-credit{margin-top:0}.hamburger{display:block}.topbar{background-color:#222;margin-top:42px;margin-left:-100%;margin-right:-40px;padding-left:0;padding-right:0;max-width:120px;border-top:1px solid #f1f1f1;display:none;z-index:100}.topbar li{display:block;width:100%;transition:all .3s ease-in;overflow-y:hidden;top:50px;left:0;padding-top:5px;padding-bottom:5px;padding-right:0;padding-left:0}#nav-check:checked+.hamburger+.topbar{display:block}#nav-check:checked+label svg path:first-child{display:none}#nav-check:checked+label svg path:last-child{display:block}#nav-check+label svg path:first-child{display:block}#nav-check+label svg path:last-child{display:none}.masthead-title small{display:inline-block}}@media screen and (max-width:30em){.commento-comments{margin-top:6rem}.commento-markdown-button{display:none}.post .home-title{font-size:32px}.pagination .older{margin-top:20px}.comment-newsletters .subscribe-to-nl{display:none}.commento-logged-container{margin-top:10px}.photo-credit{margin-top:-8px}.pagination-item{min-height:296px;font-size:16px;padding:.5rem 1rem}.pagination-item:last-child{margin-bottom:20px}}@media screen and (max-width:15em){.masthead-title small{display:none}.photo-credit{margin-top:-5px}.commento-logged-container{margin-bottom:10px}#comment-submitted-box{padding-top:40px;margin-bottom:-10px}.pagination-item{min-height:305px}}</style><link rel=preload href=/js/bundle1.min.50943f987172202a5fba99ea27e2ff6f50f99d57ddacd10757b00e2a553ef780.js as=script><link rel=preload href=/css/bundle.min.css as=style><link rel=stylesheet href=/css/bundle.min.css media=print onload='this.media="all",this.onload=null'><noscript><link rel=stylesheet href=/css/bundle.min.css></noscript><link rel=amphtml type=text/html href=https://ruddra.com/amp/django-custom-user-migration-mid-phase-project/ ><link rel=apple-touch-icon sizes=144x144 href=/apple-touch-icon.png><link rel="shortcut icon" href=/favicon.ico><link rel=icon href=https://ruddra.com/logo.png><link rel=alternate type=application/rss+xml title=RSS href=/sitemap.xml><link rel=search href=/opensearch.xml title="Search at Ruddra" type=application/opensearchdescription+xml><meta name=generator content="Hugo 0.94.1"><meta name=twitter:card content=summary_large_image><meta property=og:locale content=en_US><meta property=og:site_name content="Coding Blog by Arnab Kumar Shil"><meta property=article:publisher content=https://ruddra.com><meta property=article:section content=Bulletin><meta property=article:published_time content=2019-01-03T00:00:00.00Z><meta property=article:modified_time content=2022-09-12T00:00:00.00Z><meta property=og:updated_time content=2022-09-12T00:00:00.00Z><meta property=og:image content=https://ruddra.com/content/images/2020/04/project.jpg><meta property=og:image:secure_url content=https://ruddra.com/content/images/2020/04/project.jpg><meta name=revised content="Ruddra.com, 04/07/12096"><meta property=og:image:width content=720><meta property=og:image:height content=350><meta name=twitter:site content=@ruddra><meta name=twitter:creator content=@ruddra><meta name=twitter:title content="Django: Changing User Model in Mid-Project"><meta name=twitter:description content="Cure to 'ValueError: Related model 'app.User' cannot be resolved'.
"><meta property=og:type content=Article><meta property=og:title content="Django: Changing User Model in Mid-Project"><meta property=og:description content="Cure to 'ValueError: Related model 'app.User' cannot be resolved'.
"><meta name=twitter:image content=https://ruddra.com/content/images/2020/04/project.jpg><meta name=twitter:image:src content=https://ruddra.com/content/images/2020/04/project.jpg><meta property=article:tag content=django><meta property=article:tag content=migration><meta property=article:tag content=models><meta property=article:tag content=ruddra><script type=application/ld+json>{"@context":"http://schema.org","@type":"NewsArticle","identifier":"django-custom-user-migration-mid-phase-project","headline":"Django: Changing User Model in Mid-Project","keywords":["Django","Migration","Models","Blog"],"url":"https:\/\/ruddra.com\/django-custom-user-migration-mid-phase-project\/","dateCreated":"2019-01-03T00:00:00.00Z","datePublished":"2019-01-03T00:00:00.00Z","dateModified":"2022-09-12T00:00:00.00Z","articleBody":"\u003cp class=\"headline-description\"\u003eCure to 'ValueError: Related model 'app.User' cannot be resolved'.\n\u003c/p\u003e","mainEntityOfPage":"https:\/\/ruddra.com\/django-custom-user-migration-mid-phase-project\/","image":{"@type":"ImageObject","url":"https:\/\/ruddra.com\/content\/images\/2020\/04\/project.jpg","height":300,"width":750},"creator":["Arnab Kumar Shil"],"author":{"@type":"Person","name":"Arnab Kumar Shil","url":"https://ruddra.com"},"wordCount":"564","commentCount":"6","copyrightYear":"2019","discussionUrl":"https:\/\/ruddra.com\/django-custom-user-migration-mid-phase-project\/#comment-headline","isFamilyFriendly":"true","maintainer":{"@type":"Person","name":"Arnab Kumar Shil","url":"https://ruddra.com"},"publisher":{"@type":"Organization","name":"Coding Blog by Arnab Kumar Shil","url":"https://ruddra.com","logo":{"@type":"ImageObject","url":"https:\/\/ruddra.com\/logo.png"}},"thumbnailUrl":"https:\/\/ruddra.com\/content\/images\/2020\/04\/project.jpg"}</script><header class=masthead><div class=container><h3 class=masthead-title><a href=https://ruddra.com/ title=Home class=home-title>Ruddra</a><small class=home-title-small>.com</small></h3><nav><input type=checkbox id=nav-check> <label class=hamburger for=nav-check><svg xmlns=http://www.w3.org/2000/svg width=24 height=24 fill=#f1f1f1><path d="M24 19H0v-1h24v1zm0-6H0v-1h24v1zm0-6H0V6h24v1z"/><path d="M12 11.293 22.293 1l.707.707L12.707 12 23 22.293l-.707.707L12 12.707 1.707 23 1 22.293 11.293 12 1 1.707 1.707 1 12 11.293z"/></svg></label><ul class=topbar><li><a href=/about/ >About</a><li><a href=/contact/ >Contact</a><li><a aria-label=search href=/search/ ><svg xmlns=http://www.w3.org/2000/svg width=20 height=18 viewBox="0 0 24 24"><path d="M23.8 21.6l-6.2-6.2c1.2-1.6 1.9-3.6 1.9-5.7.0-5.4-4.4-9.7-9.7-9.7-5.4.0-9.7 4.4-9.7 9.7.0 5.4 4.4 9.7 9.7 9.7 2 0 3.9-.6 5.5-1.7l6.2 6.2 2.4-2.4zM2.8 9.7c0-3.8 3.1-6.9 6.9-6.9s6.9 3.1 6.9 6.9-3.1 6.9-6.9 6.9c-3.8.0-6.9-3.1-6.9-6.9z"/></svg></a><li class=btn-toggle-thm><svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 24 24"><path d="M22.088 13.126 24 12l-1.912-1.126c-1.021-.602-1.372-1.91-.788-2.942L22.393 6l-2.22-.02c-1.185-.01-2.143-.968-2.153-2.153L18 1.608l-1.932 1.093c-1.031.583-2.34.233-2.941-.788l-1.127-1.913-1.127 1.913c-.602 1.021-1.91 1.372-2.941.788l-1.932-1.093-.02 2.219c-.01 1.185-.968 2.143-2.153 2.153l-2.22.02 1.093 1.932c.584 1.032.233 2.34-.788 2.942l-1.912 1.126 1.912 1.126c1.021.602 1.372 1.91.788 2.942l-1.093 1.932 2.22.02c1.185.01 2.143.968 2.153 2.153l.02 2.219 1.932-1.093c1.031-.583 2.34-.233 2.941.788L12 24l1.127-1.913c.602-1.021 1.91-1.372 2.941-.788L18 22.392l.02-2.219c.011-1.185.969-2.143 2.153-2.153l2.22-.02-1.093-1.932c-.584-1.031-.234-2.34.788-2.942zM11.971 20c-4.411.0-8-3.589-8-8s3.588-8 8-8 8 3.589 8 8-3.589 8-8 8zM12 8c2.206.0 4 1.794 4 4s-1.794 4-4 4V8zm0-2c-3.313.0-6 2.687-6 6s2.687 6 6 6 6-2.687 6-6-2.687-6-6-6z"/></svg></ul></nav></div></header><div class=container><section class=content><article id=blog-post class=post><h1 class=post-title><a href=https://ruddra.com/django-custom-user-migration-mid-phase-project/ >Django: Changing User Model in Mid-Project</a></h1><span class=post-date>Jan 03, 2019 &#183; 3 Min Read &#183; 0 Like &#183; 6 Comments</span><div class=img-container><img class=lozad width=4000 height=3000 src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 4e3 3e3%22/%3E" data-src=data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%204000%203000%22%3E%3C%2Fsvg%3E data-srcset="/content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_220x0_resize_q75_lanczos.jpg 220w,/content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_440x0_resize_q75_lanczos.jpg 440w,/content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_500x0_resize_q75_lanczos.jpg 500w,/content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_600x0_resize_q75_lanczos.jpg 600w,/content/images/2020/04/project_hu51e609900a35aef0b76b5ffd28b70948_2709018_640x0_resize_q75_lanczos.jpg 640w" alt="Django: Changing User Model in Mid-Project" data-sizes=440w><noscript><img src=/content/images/2020/04/project.jpg width=4000 height=3000 alt="Django: Changing User Model in Mid-Project"></noscript></div><div class=photo-credit>Photo by <a href=https://unsplash.com/@ugmonk>Jeff Sheldon</a> on <a href=https://unsplash.com>Unsplash</a></div><div><p>Every now and then I see some questions pop up in Stack Overflow with title:<blockquote><p>ValueError: Related model &lsquo;app.User&rsquo; cannot be resolved</blockquote><p>This is a very common issue and pops up when the user tries to run the migration. So, lets talk more about what is this problem and how can we solve it.<div class=toc><input id=_toc type=checkbox name=_toc><label class=collapse for=_toc>Table of contents&nbsp;<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 24 24" fill=none stroke=currentcolor stroke-width=2 stroke-linecap=round stroke-linejoin=round class="feather feather-chevron-down"><polyline class=chevron-down points="6 10 14 18 22 10"/><polyline class=chevron-up points="22 18 14 10 6 18"/></svg></label><nav id=TableOfContents><ul><li><a href=#the-problem>The problem</a><li><a href=#why-it-occurs>Why It occurs</a><li><a href=#solution-easy-way>Solution: easy way</a><li><a href=#solution-hard-way>Solution: hard Way</a><li><a href=#solution-alternative-way>Solution: alternative way</a><li><a href=#for-future-projects>For future projects</a><li><a href=#in-conclusion>In conclusion</a></ul></nav></div><p><h2 id=the-problem>The problem<a href=#the-problem class=hanchor aria-label=Anchor><svg class="octicon octicon-link" viewBox="0 0 16 16" width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>This error occurs when you have been using Django&rsquo;s default User model, and in mid project, you need some changes in <strong>auth.User</strong> model and decided to use <a href=https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#substituting-a-custom-user-model><strong>CustomUser</strong></a>.<h2 id=why-it-occurs>Why It occurs<a href=#why-it-occurs class=hanchor aria-label=Anchor><svg class="octicon octicon-link" viewBox="0 0 16 16" width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>As per <a href=https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#changing-to-a-custom-user-model-mid-project>django documentation</a>:<blockquote><p>Changing AUTH_USER_MODEL after you‚Äôve created database tables is significantly more difficult since it affects foreign keys and many-to-many relationship.</blockquote><p>As <strong>auth.User</strong> is core part of Django, and when you change the tables, it can&rsquo;t work properly. This problem is hard to identify even for myself, because of the error it throws due to migration.<h2 id=solution-easy-way>Solution: easy way<a href=#solution-easy-way class=hanchor aria-label=Anchor><svg class="octicon octicon-link" viewBox="0 0 16 16" width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>The easiest(and cleanest) way is to delete all your migration files from all apps, drop the database. Then create a new database and connect your project to that. Then run <code>python manage.py makemigrations</code> and <code>python manage.py migrate</code> to make changes in DB. Means to make a clean start for the project, data wise.<h2 id=solution-hard-way>Solution: hard Way<a href=#solution-hard-way class=hanchor aria-label=Anchor><svg class="octicon octicon-link" viewBox="0 0 16 16" width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>Dropping the Database is not always possible for us. So there is an another approach to resolve this issue(based on ticket <a href=https://code.djangoproject.com/ticket/25313>#25313</a>):<ol><li><p>Create a custom user model identical to <strong>auth.User</strong>, call it <code>User</code> (so many-to-many tables keep the same name) and set <code>db_table='auth_user'</code> (so it uses the same table). Like this:<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>AbstractUser</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>User</span><span class=p>(</span><span class=n>AbstractUser</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>db_table</span><span class=o>=</span><span class=s1>&#39;auth_user&#39;</span>
</span></span></code></pre></div><li><p>Throw away all your <em>migrations</em> from all the apps(except for <code>__init__.py</code> file inside the migrations folder).<li><p>Now update value of <code>AUTH_USER_MODEL</code> in your <strong>settings.py</strong> with <code>myapp.User</code>(Custom User Model) like <code>AUTH_USER_MODEL = 'myapp.User'</code>.<li><p>Recreate a fresh set of migrations using <code>python manage.py makemigrations</code>.<li><p>Make a backup of your database.<li><p>Delete all entries from <code>django_migrations</code> table.<li><p>Fake-apply the new set of migrations using <code>python manage.py migrate --fake</code>.<li><p><em>Optional:</em> Set <code>db_table="your_custom_table"</code> or remove it altogether.<li><p>Make other changes to the custom model, generate migrations, apply them.</ol><h2 id=solution-alternative-way>Solution: alternative way<a href=#solution-alternative-way class=hanchor aria-label=Anchor><svg class="octicon octicon-link" viewBox="0 0 16 16" width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>You can take a different approach rather than overriding you <strong>auth.User</strong> model. You can define a new model(lets say <strong>Profile</strong>), and put your relevant fields there. Then, make a <a href=https://docs.djangoproject.com/en/2.1/topics/db/examples/one_to_one/ ><code>OneToOne</code></a> relation with <strong>auth.User</strong> like this:<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Profile</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>OneToOneField</span><span class=p>(</span><span class=n>User</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>some_field</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>,</span> <span class=n>null</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>blank</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span></span></code></pre></div><p>You can use <a href=https://docs.djangoproject.com/en/2.1/ref/signals/#post-save>post_save</a> signals to create a profile automatically every time a User is created.<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.dispatch</span> <span class=kn>import</span> <span class=n>receiver</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.core.signals</span> <span class=kn>import</span> <span class=n>post_save</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.contrib.auth.models</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@receiver</span><span class=p>(</span><span class=n>post_save</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=n>User</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_user_profile</span><span class=p>(</span><span class=n>sender</span><span class=p>,</span> <span class=n>instance</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>created</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>created</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>Profile</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=n>instance</span><span class=p>)</span>
</span></span></code></pre></div><p>You can use this easily in python:<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>user</span><span class=o>.</span><span class=n>profile</span><span class=o>.</span><span class=n>some_field</span>  <span class=c1># Thus you get value of some field from Profile</span>
</span></span><span class=line><span class=cl><span class=c1># OR</span>
</span></span><span class=line><span class=cl><span class=n>profile</span> <span class=o>=</span> <span class=n>Profile</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>user</span> <span class=o>=</span> <span class=n>profile</span><span class=o>.</span><span class=n>user</span>  <span class=c1># Thus you get auth.User</span>
</span></span></code></pre></div><p>Or in template:<div class=highlight><pre tabindex=0 class=chroma><code class=language-django data-lang=django><span class=line><span class=cl><span class=cp>{{</span> <span class=nv>user.profile.some_field</span> <span class=cp>}}</span><span class=x>
</span></span></span></code></pre></div><p><em>FYI:</em> this process was mentioned in the <a href=https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#extending-the-existing-user-model>django documentation</a> as well.<h2 id=for-future-projects>For future projects<a href=#for-future-projects class=hanchor aria-label=Anchor><svg class="octicon octicon-link" viewBox="0 0 16 16" width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>For future projects, you should use your <strong>CustomUser</strong> model from the beginning. It will reduce a lot of hassle when it comes to customizing <strong>User</strong>.<h2 id=in-conclusion>In conclusion<a href=#in-conclusion class=hanchor aria-label=Anchor><svg class="octicon octicon-link" viewBox="0 0 16 16" width=16 height=16 aria-hidden=true><path fill-rule=evenodd d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>To Be Honest, this an old problem and there is no good way to resolve it(at least not in Django 2.1). Hopefully in future releases, it will be fixed.<p>--<p>If you like this article, you can <a href=https://ko-fi.com/ruddra>buy me a coffee</a>. Thanks!<p><strong>Last updated</strong>: Sep 12, 2022</div></article></section><hr><section class=miscellaneous><ul class=side-share><li class=like-comment><span id=love-share><svg xmlns=http://www.w3.org/2000/svg id=love-share-sign class=love-share-sign width=24 height=24 viewBox="0 0 24 24" fill=#d0d0d0><path d="M12 4.2C8.9-1.2.0.4.0 7.1c0 4.7 5.6 9.4 12 15.8 6.4-6.4 12-11.1 12-15.8.0-6.8-8.9-8.3-12-2.9z"/></svg><span id=loved-count class=loved-count>x<span id=like-count>0</span></span></span><li class=like-comment><svg xmlns=http://www.w3.org/2000/svg id=show-comment-btn class=comment-sign width=24 height=24 viewBox="0 0 24 24" fill=#d0d0d0><path d="M24 10.2C24 5.1 18.6 1 12 1S0 5.1.0 10.2s5.4 9.2 12.1 9.2c-.4 2-2.8 3.3-4.5 3.7C17.7 22.2 24 16.6 24 10.3z"/></svg><span id=loved-count class=comment-count>x<span id=comment-counter>6<span></span></span></span></li><input type=checkbox id=_show_social_share><li class=share-button><label id=show-hide-share class=collapse-share for=_show_social_share><svg class=share-sign xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24" fill=#d0d0d0><path d="M5 7c2.761.0 5 2.239 5 5s-2.239 5-5 5-5-2.239-5-5 2.239-5 5-5zm11.122 12.065c-.073.301-.122.611-.122.935.0 2.209 1.791 4 4 4s4-1.791 4-4-1.791-4-4-4c-1.165.0-2.204.506-2.935 1.301l-5.488-2.927c-.23.636-.549 1.229-.943 1.764l5.488 2.927zM24 4c0-2.209-1.791-4-4-4s-4 1.791-4 4c0 .324.049.634.122.935l-5.488 2.927c.395.535.713 1.127.943 1.764l5.488-2.927C17.796 7.494 18.835 8 20 8c2.209.0 4-1.791 4-4z"/></svg><svg fill=#d0d0d0 xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"><path d="M5 9c1.654.0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-2c-2.762.0-5 2.239-5 5s2.238 5 5 5 5-2.239 5-5-2.238-5-5-5zm15 9c-1.165.0-2.204.506-2.935 1.301l-5.488-2.927c-.23.636-.549 1.229-.944 1.764l5.488 2.927c-.072.301-.121.611-.121.935.0 2.209 1.791 4 4 4s4-1.791 4-4-1.791-4-4-4zm0 6c-1.103.0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zm0-22c-2.209.0-4 1.791-4 4 0 .324.049.634.121.935l-5.488 2.927c.395.536.713 1.128.944 1.764l5.488-2.927C17.796 7.494 18.835 8 20 8c2.209.0 4-1.791 4-4s-1.791-4-4-4zm0 6c-1.103.0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"/></svg></label><li class=social-share><a target=_blank aria-label=FB rel=noreferrer href="https://www.facebook.com/dialog/share?app_id=668971647169067&display=page&href=https%3a%2f%2fruddra.com%2fdjango-custom-user-migration-mid-phase-project%2f&redirect_uri=https%3a%2f%2fruddra.com%2fdjango-custom-user-migration-mid-phase-project%2f"><svg class=fb-share-sign fill=#d0d0d0 xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"><path d="M9 8H6v4h3v12h5V12h3.642L18 8h-4V6.333C14 5.378 14.192 5 15.115 5H18V0h-3.808C10.596.0 9 1.583 9 4.615V8z"/></svg></a><li class=social-share><a aria-label=Twitter target=_blank rel=noreferrer href="https://twitter.com/intent/tweet?text=Django%3a%20Changing%20User%20Model%20in%20Mid-Project&url=https%3a%2f%2fruddra.com%2fdjango-custom-user-migration-mid-phase-project%2f"><svg class=tw-share-sign fill=#d0d0d0 xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179.0-5.515 2.966-4.797 6.045C7.728 8.088 4.1 6.128 1.671 3.149c-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142.0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg></a><li class=social-share><a aria-label=LN target=_blank rel=noreferrer href="https://www.linkedin.com/shareArticle/?mini=true&url=https%3a%2f%2fruddra.com%2fdjango-custom-user-migration-mid-phase-project%2f&title=Django%3a%20Changing%20User%20Model%20in%20Mid-Project&summary=Cure%20to%20%27ValueError%3a%20Related%20model%20%27app.User%27%20cannot%20be%20resolved%27.&source="><svg xmlns=http://www.w3.org/2000/svg class=ln-share-sign width=24 height=24 viewBox="0 0 24 24" fill=#d0d0d0><path d="M5 3.5C5 4.9 3.9 6 2.5 6S0 4.9.0 3.5C0 2.1 1.1 1 2.5 1S5 2.1 5 3.5zM5 8H0v16h5V8zm8 0H8v16h5v-8.4c0-4.7 6-5.1 6 0V24h5V13.9c0-7.9-8.9-7.6-11-3.7V8z"/></svg></a></ul><div class=tags><a class=tag-links-a href=/tags/django/ >Django</a> <a class=tag-links-a href=/tags/migration/ >Migration</a> <a class=tag-links-a href=/tags/models/ >Models</a></div></section><section class=newsletter-section id=newsletter-submitted><h2 class=newsletter-header>Get Better With Django</h2><div id=commento-newsletter class="commento-root commento-root-font"><div id=newsletter-error class=commento-error-box style=display:none>An error occurred when submitting the form, please try again.</div><div id=newsletter-submitted-box style=display:none><p class=newsletter-submitted-txt>Thank you for subscribing to newsletters.<br>You will start receiving emails from next iteration.</div><div id=newsletter-body><div class=newsletter-txt>Subscribe to get monthly articles about Django and more.<br>I won't spam you. Unsubscribe at any time.</div><div id=commento-main-area-newsletter class=commento-main-area><form id=commento-form method=post action=https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/ruddra/ruddra.comments/master/comments/ ><input type=hidden name=options[redirect] value=https://ruddra.com/django-custom-user-migration-mid-phase-project/#newsletter-submitted> <input type=hidden name=options[slug] value=newsletter-subscription> <input type=hidden name=options[parent] value=newsletter-subscription> <input type=hidden name=options[origin] value=https://ruddra.com/newsletters/ > <input type=hidden name=options[redirectError] value=https://ruddra.com/django-custom-user-migration-mid-phase-project/#newsletter-error><div id=commento-login class=commento-login><label id=email-newsletter><input aria-label="Enter your email address" type=email name=fields[email] placeholder="Enter your email address" class=newsletter-email-input required></label></div><div style=width:95.8%><button id=commento-submit-button-root-newsletter type=submit class="commento-button commento-submit-button">Subscribe</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id=commento-checkbox-root name=options[subscribe] type=checkbox value=email required><label for=commento-checkbox-root>I agree to receive emails</label></div></div></form></div></div></div></section><section class=pagination><div class="pagination-item older"><span class=pagination-arrow>&#8592; Previous</span><div class=pagination-link><a href=https://ruddra.com/tdd-drf-factory-boy-faker/ >Testing for Django Rest Framework with Factory Boy and ‚Ä¶</a></div><div class=pagination-image><img class=lozad width=350 height=234 data-src=/content/images/2020/05/factory_hu547a583bfe9e5ef602935a98eb5500c7_1967375_350x0_resize_q75_lanczos.jpg alt="Testing for Django Rest Framework with Factory Boy and Faker"><noscript><img src=/content/images/2020/05/factory_hu547a583bfe9e5ef602935a98eb5500c7_1967375_350x0_resize_q75_lanczos.jpg alt="Testing for Django Rest Framework with Factory Boy and Faker"></noscript></div><p class=pagination-text>‚ÄúI&amp;rsquo;m not a great programmer; I&amp;rsquo;m just a good programmer with great habits.‚Äù ‚Äï Kent Beck ‚Ä¶</div><div class="pagination-item newer"><span class=pagination-arrow>Next &#8594;</span><div class=pagination-link><a href=https://ruddra.com/django-model-linked-list/ >Django: Ordering by Linked List for Model Objects</a></div><div class=pagination-image><img width=350 height=234 class=lozad data-src=/content/images/2020/05/linkedlist_hub40e6269c16f4bfa7382018a4afc79f5_760070_350x0_resize_q75_lanczos.jpg alt="Django: Ordering by Linked List for Model Objects"><noscript><img src=/content/images/2020/05/linkedlist_hub40e6269c16f4bfa7382018a4afc79f5_760070_350x0_resize_q75_lanczos.jpg alt="Django: Ordering by Linked List for Model Objects"></noscript></div><p class=pagination-text>Implement a simple Linked List data structure in Django using One To One relationship.</div></section><section class=tiny id=comment-submitted><div id=commento class="commento-root commento-root-font"><div id=comment-submitted-box style=display:none>Thank you for your comment. It will be published shortly.</div><div id=comment-error style=display:none>An error occurred when submitting the form, please try again.</div><div id=commento-main-area class=commento-main-area><div class=commento-name id=comment-headline><b>Share Your Thoughts</b></div><form id=comment-form method=post name=comment-form><input type=hidden name=options[redirect] value=https://ruddra.com/django-custom-user-migration-mid-phase-project/#comment-submitted> <input type=hidden name=options[slug] value=django-custom-user-mid-project> <input type=hidden name=options[parent] value=django-custom-user-mid-project> <input type=hidden name=options[origin] value=https://ruddra.com/django-custom-user-migration-mid-phase-project/ > <input type=hidden id=comment-parent name=fields[reply_to]> <input type=hidden name=options[redirectError] value=https://ruddra.com/django-custom-user-migration-mid-phase-project/#comment-error> <textarea name=fields[comment] id=commento-textarea-root placeholder="Add a comment" required aria-label="Add a comment"></textarea> <button id=commento-submit-button-root type=submit class="commento-button commento-submit-button submit-github">Comment With Github</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id=commento-anonymous-checkbox-root name=options[subscribe] type=checkbox value=email><label for=commento-anonymous-checkbox-root>Notify me of new comments</label></div><a onclick=toggleMarkDownTable() id=commento-markdown-button-root class=commento-markdown-button><b>M‚Üì</b> <span class=commento-markdown>Markdown</span></a><table id=commento-markdown-help-root class=commento-markdown-help style=display:none><tr><td><i>italics</i><td>surround text with<code>*asterisks*</code><tr><td><b>bold</b><td>surround text with<code>**two asterisks**</code><tr><td><a href=https://example.com>hyperlink</a><td><code>[hyperlink](https://example.com)</code> or just a bare URL<tr><td><code>code</code><td>surround text with <code>`backticks`</code><tr><td><code>code block</code><td>surround text with <code>```console.log()```</code><tr><td><strike>strikethrough</strike><td>surround text with <code>~~two tilde characters~~</code><tr><td><blockquote>quote</blockquote><td>prefix with <code>></code><tr><td>Emoji üò±<td><b>:smile:</b>üòÑ <b>:angry:</b>üò† <b>:disappointed:</b>üòû(<a href=https://www.webfx.com/tools/emoji-cheat-sheet/ >cheat sheet</a>)</table></form></div><div id=commento-comment class=commento-comments hidden aria-hidden=true><div id=commento-comment-card-1548007200 class=commento-card><div class=commento-header><div id=commento-comment-options-1548007200 class=commento-options><button id=commento-comment-reply-1548007200 href=#comment-form onclick='changeValue("fields[reply_to]","1548007200","David")' title="Reply to David" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img data-src="https://www.gravatar.com/avatar/61c6f1a7784a65ddb8f8f3df4ed9e0d7?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt=David><div id=commento-comment-name-1548007200 class=commento-name>David</div><div id=commento-comment-subtitle-1548007200 class=commento-subtitle><div id=commento-comment-timeago-1548007200 title="Monday, Jan 21, 2019" class=commento-timeago>Monday, Jan 21, 2019</div></div></div><div id=commento-comment-body-1548007200 class=commento-body><p>Thanks i was been struggling with this for some months, maybe you should be more specific with the number 1 of the HardWay of how to create an identical auth.User i just get the code from AbstractUser i just test on my development enviroment and works fine.</div><div><div id=commento-comment-card-1548097200 class=commento-card><div class=commento-header><div id=commento-comment-options-1548097200 class=commento-options><button id=commento-comment-reply-1548097200 title="Reply to Arnab Kumar Shil" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick='changeValue("fields[reply_to]","1548007200","Arnab Kumar Shil")'></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id=commento-comment-name-1548097200 class="commento-name commento-moderator">Arnab Kumar Shil</div><div id=commento-comment-subtitle-1548097200 class=commento-subtitle><div id=commento-comment-timeago-1548097200 title="Tuesday, Jan 22, 2019" class=commento-timeago>Tuesday, Jan 22, 2019</div></div></div><div id=commento-comment-body-1548097200 class=commento-body><p>Okay, I will update the post accordingly.</div></div></div></div><div id=commento-comment-card-1565546400 class=commento-card><div class=commento-header><div id=commento-comment-options-1565546400 class=commento-options><button id=commento-comment-reply-1565546400 href=#comment-form onclick='changeValue("fields[reply_to]","1565546400","JR177")' title="Reply to JR177" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img data-src="https://www.gravatar.com/avatar/caca0257c8924b75cddf052290bfb5d7?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt=JR177><div id=commento-comment-name-1565546400 class=commento-name>JR177</div><div id=commento-comment-subtitle-1565546400 class=commento-subtitle><div id=commento-comment-timeago-1565546400 title="Monday, Aug 12, 2019" class=commento-timeago>Monday, Aug 12, 2019</div></div></div><div id=commento-comment-body-1565546400 class=commento-body><p>Hi Ruddra, I&rsquo;m struggling with this exact problem. Might you be able to help? <a href=https://stackoverflow.com/questions/57453469/trying-to-extend-base-user-model-mid-project-and-getting-unique-constraint-error>https://stackoverflow.com/questions/57453469/trying-to-extend-base-user-model-mid-project-and-getting-unique-constraint-error</a>.</div><div><div id=commento-comment-card-1565553600 class=commento-card><div class=commento-header><div id=commento-comment-options-1565553600 class=commento-options><button id=commento-comment-reply-1565553600 title="Reply to JR177" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick='changeValue("fields[reply_to]","1565546400","JR177")'></button></div><img data-src="https://www.gravatar.com/avatar/caca0257c8924b75cddf052290bfb5d7?s=70&r=pg&d=identicon" class="lozad commento-avatar-img"><div id=commento-comment-name-1565553600 class=commento-name>JR177</div><div id=commento-comment-subtitle-1565553600 class=commento-subtitle><div id=commento-comment-timeago-1565553600 title="Monday, Aug 12, 2019" class=commento-timeago>Monday, Aug 12, 2019</div></div></div><div id=commento-comment-body-1565553600 class=commento-body><p>I&rsquo;m unsure how to design the &lsquo;views&rsquo; for this solution. My current view saves the form inputs to the default User model and cannot get it to save to the new model. I also hit this &lsquo;uniqueconstraint&rsquo; problem.</div></div></div></div><div id=commento-comment-card-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-card><div class=commento-header><div id=commento-comment-options-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-options><button id=commento-comment-reply-d4615ef0-47e7-11ea-a62f-c13976200e4a href=#comment-form onclick='changeValue("fields[reply_to]","d4615ef0-47e7-11ea-a62f-c13976200e4a","Gurubux")' title="Reply to Gurubux" class="commento-option-button commento-option-reply onhover" style=right:0></button></div><img data-src="https://www.gravatar.com/avatar/d8a900c6a877ceb86524ac83675d2490?s=70&r=pg&d=identicon" class="lozad commento-avatar-img" alt=Gurubux><div id=commento-comment-name-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-name>Gurubux</div><div id=commento-comment-subtitle-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-subtitle><div id=commento-comment-timeago-d4615ef0-47e7-11ea-a62f-c13976200e4a title="Wednesday, Feb 5, 2020" class=commento-timeago>Wednesday, Feb 5, 2020</div></div></div><div id=commento-comment-body-d4615ef0-47e7-11ea-a62f-c13976200e4a class=commento-body><p>Thank you for this post. My query was that if we drop all the default tables created by Django&rsquo;s makemigration command, will it affect the execution of the API catastrophically or can be managed with those tables. The reason is, those tables are considered to be Junk data. Kindly guide.</div><div><div id=commento-comment-card-f4f47c80-490c-11ea-88e7-339f19dd92a9 class=commento-card><div class=commento-header><div id=commento-comment-options-f4f47c80-490c-11ea-88e7-339f19dd92a9 class=commento-options><button id=commento-comment-reply-f4f47c80-490c-11ea-88e7-339f19dd92a9 title="Reply to Ruddra" class="commento-option-button commento-option-reply onhover" style=right:0 href=#comment-form onclick='changeValue("fields[reply_to]","d4615ef0-47e7-11ea-a62f-c13976200e4a","Ruddra")'></button></div><img data-src="https://avatars0.githubusercontent.com/u/3099861?v=4" class="lozad commento-avatar-img"><div id=commento-comment-name-f4f47c80-490c-11ea-88e7-339f19dd92a9 class="commento-name commento-moderator">Ruddra</div><div id=commento-comment-subtitle-f4f47c80-490c-11ea-88e7-339f19dd92a9 class=commento-subtitle><div id=commento-comment-timeago-f4f47c80-490c-11ea-88e7-339f19dd92a9 title="Thursday, Feb 06, 2020" class=commento-timeago>Thursday, Feb 06, 2020</div></div></div><div id=commento-comment-body-f4f47c80-490c-11ea-88e7-339f19dd92a9 class=commento-body><p>It shouldn&rsquo;t affect if you are following <a href=https://ruddra.com/posts/django-custom-user-migration-mid-phase-project/#hard-way>this procedure</a>. But before doing anything, please make a backup of your database.</div></div></div></div></div></div></section><footer id=copyright><p>&copy; 2022 Arnab Kumar Shil &#183; <a href=/privacy/ >Privacy</a><br><a href=https://creativecommons.org/licenses/by-sa/4.0/ >CC BY-SA 4.0</a> &#183; Made with <a href=https://gohugo.io>Hugo</a></footer></div><script src=/js/bundle1.min.50943f987172202a5fba99ea27e2ff6f50f99d57ddacd10757b00e2a553ef780.js defer></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(e=>{e.installing,e.waiting,e.active,e.addEventListener("updatefound",function(){var t=e.installing;t.onstatechange=()=>{t.state==="installed"&&navigator.serviceWorker.controller&&showReloadAlert()}})})</script>