<!doctype html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta charset="utf-8"><meta name="author" content="Arnab Kumar Shil"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#000000"><meta property="fb:app_id" content="668971647169067"><link rel="manifest" href="/manifest.json" crossorigin="use-credentials"><meta name="yandex-verification" content="3ccce49727df78e2"><link rel="copyright" href="https://ruddra.com/docker-compose-arg-env/#copyright"><link rel="article:author" href="https://ruddra.com/about/"><meta name="robots" content="index,follow"><meta name="referrer" content="unsafe-url"><meta property="og:url" content="https://ruddra.com/docker-compose-arg-env/"><meta name="keywords" content="Docker,DevOps,Blog"><title>Why Use Docker Compose, Build Argument and Environment Variable</title><meta name="description" content="Usage of docker compose, argument and environment variable in different build scenarios."><link rel="preload" as="font" type="font/woff2" href="/fonts/merriweather-v21-latin-regular.woff2" crossorigin="anonymous"><link rel="preload" as="font" type="font/woff2" href="/fonts/pt-sans-v11-latin-regular.woff2" crossorigin="anonymous"><link rel="preload" as="font" type="font/woff2" href="/fonts/merriweather-v21-latin-700.woff2" crossorigin="anonymous"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="5 Minutes"><style type="text/css">@font-face{font-family:pt sans;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/pt-sans-v11-latin-regular.eot);src:local("PT Sans"),local("PTSans-Regular"),url(/fonts/pt-sans-v11-latin-regular.eot?#iefix) format("embedded-opentype"),url(/fonts/pt-sans-v11-latin-regular.woff2) format("woff2"),url(/fonts/pt-sans-v11-latin-regular.woff) format("woff"),url(/fonts/pt-sans-v11-latin-regular.ttf) format("truetype"),url(/fonts/pt-sans-v11-latin-regular.svg#PTSans) format("svg")}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}a{text-decoration:none;padding:2px}body,html{margin:0;padding:0;scroll-behavior:smooth;overflow:auto;scrollbar-width:thin;scrollbar-color:#a4a4a4 transparent}body{color:#222;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body.dark-theme{background-color:#37383e;color:#eee}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-button{background-color:#666}::-webkit-scrollbar-thumb{background-color:#a4a4a4;border-radius:3px}body.dark-theme .highlight .chroma::-webkit-scrollbar-track,body.dark-theme::-webkit-scrollbar-track{background-color:transparent}body.dark-theme .highlight .chroma::-webkit-scrollbar-track-piece,body.dark-theme::-webkit-scrollbar-track-piece{background-color:transparent}body.dark-theme .highlight .chroma::-webkit-scrollbar-corner,body.dark-theme::-webkit-scrollbar{background-color:transparent}body.dark-theme .highlight .chroma::-webkit-resizer,body.dark-theme::-webkit-scrollbar{background-color:transparent}.masthead{border-bottom:1px solid #eee;padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem;background:#202020}.masthead .container{max-width:50rem}.masthead-title{margin-top:0;margin-bottom:0;color:#505050;font-size:20px;letter-spacing:-.025rem;line-height:1.25}.homepage-title a,.masthead-title a{color:#505050;padding:0}.masthead-title small{font-size:75%;font-weight:400;color:silver;letter-spacing:0}h3{font-family:pt sans,Helvetica,Arial,sans-serif;font-weight:400}.container{max-width:42.5rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.content{visibility:hidden}#snackbar{display:none}#nav-check{display:none}.hamburger,.topbar{display:none}.masthead .homepage-title .home-title,.masthead .masthead-title .home-title{color:#cfcdcd}.masthead .homepage-title .home-title-small,.masthead .masthead-title .home-title-small{color:#8c8585;font-size:1.25rem;letter-spacing:-.25px}.homepage-title{margin:0;font-size:20px;line-height:1.25;letter-spacing:-.025rem;font-family:pt sans,Helvetica,Arial,sans-serif;font-weight:400}@media only screen and (min-width:38em){.container{max-width:32rem}}@media only screen and (min-width:30.1em){.container{max-width:28rem}}@media only screen and (min-width:56em){.container{max-width:42rem}}@media screen and (max-width:48em){.homepage-title,.masthead-title{text-align:center}}</style><link rel="preload" href="/js/bundle1.min.51f461d0706ce9f280d9b664aad561209188edc375a22034b7974d8a9c793cf2.js" as="script"><link rel="preload" href="/css/bundle.min.css" as="style"><link rel="stylesheet" href="/css/bundle.min.css" media="print" onload='this.media="all",this.onload=null'><noscript><link rel="stylesheet" href="/css/bundle.min.css"></noscript><link rel="amphtml" type="text/html" href="https://ruddra.com/amp/docker-compose-arg-env/"><link rel="preconnect" href="https://www.google-analytics.com"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon.png"><link rel="shortcut icon" href="/favicon.ico"><link rel="icon" href="https://ruddra.com/logo.png"><link rel="alternate" type="application/rss+xml" title="RSS" href="/sitemap.xml"><link rel="search" href="/opensearch.xml" title="Search at Ruddra" type="application/opensearchdescription+xml"><meta name="generator" content="Hugo 0.75.1"><meta name="twitter:card" content="summary_large_image"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="Coding Blog by Arnab Kumar Shil"><meta property="article:publisher" content="https://ruddra.com"><meta property="article:section" content="Bulletin"><meta property="article:published_time" content="2019-11-09T00:00:00.00Z"><meta property="article:modified_time" content="2020-12-31T00:00:00.00Z"><meta property="og:updated_time" content="2020-12-31T00:00:00.00Z"><meta property="og:image" content="https://ruddra.com/content/images/2019/11/dock2.jpg"><meta property="og:image:secure_url" content="https://ruddra.com/content/images/2019/11/dock2.jpg"><meta name="revised" content="Ruddra.com, 01/07/31126"><meta property="og:image:width" content="720"><meta property="og:image:height" content="350"><meta name="twitter:site" content="@ruddra"><meta name="twitter:creator" content="@ruddra"><meta name="twitter:title" content="Why Use Docker Compose, Build Argument and Environment Variable"><meta name="twitter:description" content="Usage of docker compose, argument and environment variable in different build scenarios."><meta property="og:type" content="Article"><meta property="og:title" content="Why Use Docker Compose, Build Argument and Environment Variable"><meta property="og:description" content="Usage of docker compose, argument and environment variable in different build scenarios."><meta name="twitter:image" content="https://ruddra.com/content/images/2019/11/dock2.jpg"><meta name="twitter:image:src" content="https://ruddra.com/content/images/2019/11/dock2.jpg"><meta property="article:tag" content="docker"><meta property="article:tag" content="devops"><meta property="article:tag" content="ruddra"><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","identifier":"docker-compose-arg-env","headline":"Why Use Docker Compose, Build Argument and Environment Variable","keywords":["Docker","DevOps","Blog"],"url":"https:\/\/ruddra.com\/docker-compose-arg-env\/","dateCreated":"2019-11-09T00:00:00.00Z","datePublished":"2019-11-09T00:00:00.00Z","dateModified":"2020-12-31T00:00:00.00Z","articleBody":"Usage of docker compose, argument and environment variable in different build scenarios.","mainEntityOfPage":"https:\/\/ruddra.com\/docker-compose-arg-env\/","image":{"@type":"ImageObject","url":"https:\/\/ruddra.com\/content\/images\/2019\/11\/dock2.jpg","height":300,"width":750},"creator":["Arnab Kumar Shil"],"author":{"@type":"Person","name":"Arnab Kumar Shil","url":"https://ruddra.com"},"wordCount":"946","commentCount":"0","copyrightYear":"2019","discussionUrl":"https:\/\/ruddra.com\/docker-compose-arg-env\/#comment-headline","isFamilyFriendly":"true","maintainer":{"@type":"Person","name":"Arnab Kumar Shil","url":"https://ruddra.com"},"publisher":{"@type":"Organization","name":"Coding Blog by Arnab Kumar Shil","url":"https://ruddra.com","logo":{"@type":"ImageObject","url":"https:\/\/ruddra.com\/logo.png"}},"thumbnailUrl":"https:\/\/ruddra.com\/content\/images\/2019\/11\/dock2.jpg"}</script></head><body><div class="masthead"><div class="container"><h3 class="masthead-title"><a href="https://ruddra.com/" title="Home" class="home-title">Ruddra</a><small class="home-title-small">.com</small></h3><input type="checkbox" id="nav-check"> <label class="hamburger" for="nav-check"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#f1f1f1"><path d="M24 19H0v-1h24v1zm0-6H0v-1h24v1zm0-6H0V6h24v1z"/><path d="M12 11.293 22.293 1l.707.707L12.707 12 23 22.293l-.707.707L12 12.707l-10.293 10.293-.707-.707L11.293 12l-10.293-10.293.707-.707L12 11.293z"/></svg></label><ul class="topbar"><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li><li><a aria-label="search" href="/search/"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="18" viewBox="0 0 24 24"><path d="M23.8 21.6l-6.2-6.2c1.2-1.6 1.9-3.6 1.9-5.7.0-5.4-4.4-9.7-9.7-9.7-5.4.0-9.7 4.4-9.7 9.7.0 5.4 4.4 9.7 9.7 9.7 2 0 3.9-.6 5.5-1.7l6.2 6.2 2.4-2.4zm-21-11.9c0-3.8 3.1-6.9 6.9-6.9s6.9 3.1 6.9 6.9-3.1 6.9-6.9 6.9c-3.8.0-6.9-3.1-6.9-6.9z"/></svg></a></li><li class="btn-toggle-thm"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M22.088 13.126 24 12l-1.912-1.126c-1.021-.602-1.372-1.91-.788-2.942L22.393 6l-2.22-.02c-1.185-.01-2.143-.968-2.153-2.153l-.02-2.219-1.932 1.093c-1.031.583-2.34.233-2.941-.788l-1.127-1.913-1.127 1.913c-.602 1.021-1.91 1.372-2.941.788l-1.932-1.093-.02 2.219c-.01 1.185-.968 2.143-2.153 2.153l-2.22.02 1.093 1.932c.584 1.032.233 2.34-.788 2.942l-1.912 1.126 1.912 1.126c1.021.602 1.372 1.91.788 2.942l-1.093 1.932 2.22.02c1.185.01 2.143.968 2.153 2.153l.02 2.219 1.932-1.093c1.031-.583 2.34-.233 2.941.788l1.127 1.913 1.127-1.913c.602-1.021 1.91-1.372 2.941-.788l1.932 1.093.02-2.219c.011-1.185.969-2.143 2.153-2.153l2.22-.02-1.093-1.932c-.584-1.031-.234-2.34.788-2.942zM11.971 20c-4.411.0-8-3.589-8-8s3.588-8 8-8 8 3.589 8 8-3.589 8-8 8zM12 8c2.206.0 4 1.794 4 4s-1.794 4-4 4V8zm0-2c-3.313.0-6 2.687-6 6s2.687 6 6 6 6-2.687 6-6-2.687-6-6-6z"/></svg></li></ul></div></div><div class="container content"><div id="blog-post" class="post"><h1 class="post-title"><a href="https://ruddra.com/docker-compose-arg-env/">Why Use Docker Compose, Build Argument and Environment Variable</a></h1><span class="post-date">Nov 09, 2019 &#183; 5 Min Read &#183; 6 Likes &#183; 0 Comment</span><div class="img-container"><img class="lozad" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OTAxIDM1MjMiLz4=" data-srcset="/content/images/2019/11/dock2_hu8831c32c1b6e3b2eeee089cd007ca5cc_1385780_220x0_resize_q100_box.jpg 220w,/content/images/2019/11/dock2_hu8831c32c1b6e3b2eeee089cd007ca5cc_1385780_440x0_resize_q100_box.jpg 440w,/content/images/2019/11/dock2_hu8831c32c1b6e3b2eeee089cd007ca5cc_1385780_500x0_resize_q100_box.jpg 500w,/content/images/2019/11/dock2_hu8831c32c1b6e3b2eeee089cd007ca5cc_1385780_600x0_resize_q100_box.jpg 600w,/content/images/2019/11/dock2_hu8831c32c1b6e3b2eeee089cd007ca5cc_1385780_640x0_resize_q100_box.jpg 640w" alt="Why Use Docker Compose, Build Argument and Environment Variable" data-sizes="440w"><noscript><img src="/content/images/2019/11/dock2.jpg" width="5901" height="3523" alt="Why Use Docker Compose, Build Argument and Environment Variable"></noscript></div><div class="photo-credit">Photo by <a href="https://unsplash.com/@wildspot?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Aurélien - Wild Spot</a> on <a href="https://unsplash.com/">Unsplash</a></div><div><p>Imagine, you have some microservices and you want to use API from one service to another, how can you do that if all of them are running in different docker container? <a href="https://docs.docker.com/compose/">Docker Compose</a> has a solution for you.</p><p>Suppose you want to deploy a project in test, stage and production environment with same <code>Dockerfile</code> for all of them through a single <strong>Dockerfile</strong>. You can do that through Build Argument and Environment Variable.</p><div class="toc"><input id="_toc" type="checkbox" name="_toc"><label class="collapse" for="_toc">Table of contents&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline class="chevron-down" points="6 10 14 18 22 10"/><polyline class="chevron-up" points="22 18 14 10 6 18"/></svg></label><nav id="TableOfContents"><ul><li><a href="#supercharge-your-containers-using-docker-compose">Supercharge your containers using <code>docker-compose</code></a><ul><li><a href="#example">Example</a></li><li><a href="#use-multiple-compose-file-in-same-project">Use multiple compose file in same project</a></li><li><a href="#share-services-from-one-container-to-another">Share services from one container to another</a></li><li><a href="#docker-compose-shell-and-logs">Docker compose shell and logs</a></li></ul></li><li><a href="#build-arguments-or-arg">Build arguments or <code>ARG</code></a><ul><li><a href="#basic-usages-of-arg">Basic usages of <code>ARG</code></a></li></ul></li><li><a href="#envionment-variable-or-env">Envionment variable or <code>ENV</code></a><ul><li><a href="#basic-usages-of-env">Basic usages of <code>ENV</code></a></li><li><a href="#set-default-value-for-environment-variables">Set default value for environment variables</a></li><li><a href="#loading-environment-variables-from-file">Loading environment variables from file</a></li><li><a href="#using-env-in-docker-compose">Using <code>.env</code> in docker compose</a></li><li><a href="#use-host-machine-environment-variables">Use host machine environment variables</a></li></ul></li><li><a href="#arg-vs-env"><code>ARG</code> vs <code>ENV</code></a></li><li><a href="#in-conclusion">In conclusion</a></li><li><a href="#relevent-posts">Relevent posts</a></li><li><a href="#references">References</a></li></ul></nav></div><p></p><h2 id="supercharge-your-containers-using-docker-compose">Supercharge your containers using <code>docker-compose</code><a href="#supercharge-your-containers-using-docker-compose" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p><a href="https://docs.docker.com/compose/"><strong><code>docker-compose</code></strong></a> is a great tool for orchestrating multiple docker instances. But it is not like kubernetes or docker swarm. Rather, its a simple application which allows you to communicate between docker containers, allow you to easily configure things, even help you generate <code>service</code>, <code>route</code>, <code>build config</code> etc for kubernetes if you use <a href="https://github.com/kubernetes/kompose"><strong><code>kompose</code></strong></a>.</p><h3 id="example">Example<a href="#example" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>Here is an example of <code>docker-compose.yml</code>:</p><div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l">.</span><span class="w">
</span><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">dz01</span><span class="w">
</span><span class="w">  </span><span class="nt">db</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">postgres:alpine</span><span class="w">
</span><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">pz01</span><span class="w">
</span></code></pre></div><h3 id="use-multiple-compose-file-in-same-project">Use multiple compose file in same project<a href="#use-multiple-compose-file-in-same-project" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>If you want to have different compose files for building the same project(like one for test server, another for production server), then just write two or more <code>.yml</code> files and when building one of them or run them just use <code>-f</code> argument. Like this:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker-compose -f your_file_name.yml build
</code></pre></div><h3 id="share-services-from-one-container-to-another">Share services from one container to another<a href="#share-services-from-one-container-to-another" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>Let us say you have a database in one container and a server in another container, how can you use that database from that server? Rather than doing the communication manually, I would recommend using docker compose. For example:</p><div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;2&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l">.</span><span class="w">
</span><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">dz01</span><span class="w">
</span><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="l">db</span><span class="w">
</span><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="l">./src:/src</span><span class="w">
</span><span class="w">    </span><span class="nt">expose</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="s2">&#34;8000&#34;</span><span class="w">
</span><span class="w">  </span><span class="nt">db</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">postgres:alpine</span><span class="w">
</span><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">pz01</span><span class="w">
</span><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="s2">&#34;5432:5432&#34;</span><span class="w">
</span></code></pre></div><p>In here, database service is defined as <code>db</code>. From <strong>web</strong> container, you can simply access the database using:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">psql -h db -p <span class="m">5432</span>
</code></pre></div><p>Even <code>wget db:5432</code> will work, because the word <code>db</code> will be resolved automatically through docker compose.</p><h3 id="docker-compose-shell-and-logs">Docker compose shell and logs<a href="#docker-compose-shell-and-logs" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>Access docker compose shell by:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker <span class="nb">exec</span> -ti container_name /bin/sh
</code></pre></div><p>Access docker compose log by:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker-compose logs service_name
</code></pre></div><h2 id="build-arguments-or-arg">Build arguments or <code>ARG</code><a href="#build-arguments-or-arg" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>Build arguments or <code>ARG</code> is value which is available during build. It is useful for many cases:</p><p><strong>.</strong> Set value of environment variable during build.</p><p><strong>.</strong> Use same Dockerfile in multiple projects. For example, you have a django Docker Image, and you can use it in similar projects. Just you need to know project root and where the <code>requirements</code> file is. Example code:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">ARG PROJECT_ROOT
ARG REQUIREMENTS_DIR
ENV SRC_DIR PROJECT_ROOT <span class="c1"># Setting the environment variable from Build Argument</span>

ADD SRC_DIR /app
WORKDIR /app
RUN pip install -r <span class="s2">&#34;</span><span class="si">${</span><span class="nv">REQUIREMENTS_DIR</span><span class="si">}</span><span class="s2">&#34;</span>  <span class="c1"># Installing Requirements from ARGS</span>
CMD <span class="o">[</span><span class="s2">&#34;python&#34;</span>, <span class="s2">&#34;manage.py&#34;</span>, <span class="s2">&#34;runserver&#34;</span><span class="o">]</span>
</code></pre></div><h3 id="basic-usages-of-arg">Basic usages of <code>ARG</code><a href="#basic-usages-of-arg" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>Pass build arguments when building the image like this:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker build --build-arg <span class="nv">PROJECT_ROOT</span><span class="o">=</span>./src <span class="nv">REQUIREMENTS_DIR</span><span class="o">=</span>./requirements/local.txt
</code></pre></div><p>Or if you use <code>docker-compose.yml</code> then update file like this:</p><div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3&#34;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">django</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l">./app</span><span class="w">
</span><span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l">Dockerfile</span><span class="w">
</span><span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">PROJECT_ROOT</span><span class="p">:</span><span class="w"> </span><span class="l">./src</span><span class="w">
</span><span class="w">        </span><span class="nt">REQUIREMENTS_DIR</span><span class="p">:</span><span class="w"> </span><span class="l">./requirements/local.pip</span><span class="w">
</span></code></pre></div><h2 id="envionment-variable-or-env">Envionment variable or <code>ENV</code><a href="#envionment-variable-or-env" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>Using <code>ENV</code> will create environment variables inside Docker container. You can also send them from outside when building the Dockerfile(through Build Arguments) or running the image.</p><h3 id="basic-usages-of-env">Basic usages of <code>ENV</code><a href="#basic-usages-of-env" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>If you are running the Image using <code>docker</code> command in terminal or command line, then use argument <code>-e</code>.</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker run -e <span class="s2">&#34;SRC_DIR=./src&#34;</span> django
</code></pre></div><p>Or you can declare them in <code>docker-compose.yml</code> file:</p><div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3&#34;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">django</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="s2">&#34;SRC_DIR=./src&#34;</span><span class="w">
</span></code></pre></div><h3 id="set-default-value-for-environment-variables">Set default value for environment variables<a href="#set-default-value-for-environment-variables" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>You can simply do that by:</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># With default value</span>
ENV ABC ./src
<span class="c1"># Without Default value</span>
ENV XYZ
</code></pre></div><p>And you can override the value of <code>ABC</code> here by passing the environment from outside of container, ie <code>docker run -e ABC=./abc ...</code>.</p><h3 id="loading-environment-variables-from-file">Loading environment variables from file<a href="#loading-environment-variables-from-file" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>You can store your environment variables in a file and load them in <code>docker-compose.yml</code> via <code>env_file</code>:</p><div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">django</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">env_file</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">web-variables.env</span><span class="w">
</span></code></pre></div><p>Which is similar to what you can use <code>docker run --env-file=FILE ...</code> for load the environment file when running a docker image.</p><h3 id="using-env-in-docker-compose">Using <code>.env</code> in docker compose<a href="#using-env-in-docker-compose" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>You can put environment variables inside <code>.env</code> file and it will be picked up automatically from docker compose. This pretty cool feature as there are some interesting usages within the docker compose file itself.</p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ cat .env
<span class="nv">PORT</span><span class="o">=</span><span class="m">8088</span>

$ cat docker-compose.yml
version: <span class="s1">&#39;3&#39;</span>
services:
  django:
    build:
      context: .
      dockerfile: ./compose/django/Dockerfile
    image: django
    ports:
      - <span class="s2">&#34;</span><span class="si">${</span><span class="nv">PORT</span><span class="si">}</span><span class="s2">:8000&#34;</span>
</code></pre></div><p>So when you run <code>docker-compose up</code> then the variable <code>${PORT}</code> will be replaced by 8088.</p><h3 id="use-host-machine-environment-variables">Use host machine environment variables<a href="#use-host-machine-environment-variables" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h3><p>It will work almost same as above example. Just define the value of <code>PORT</code> in your host machine, then it will automatically be picked up when you run <code>docker-compose up</code></p><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">export</span> <span class="nv">PORT</span><span class="o">=</span><span class="m">8088</span>
$ cat docker-compose.yml
version: <span class="s1">&#39;3&#39;</span>
services:
  django:
    build:
      context: .
      dockerfile: ./compose/django/Dockerfile
    image: django
    ports:
      - <span class="s2">&#34;</span><span class="si">${</span><span class="nv">PORT</span><span class="si">}</span><span class="s2">:8000&#34;</span>
</code></pre></div><h2 id="arg-vs-env"><code>ARG</code> vs <code>ENV</code><a href="#arg-vs-env" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>As explained above, <code>ARG</code> is only build time variables. Means it will be available when you are building the Image from a Dockerfile. On the other hand, <code>ENV</code> can be accessed when you are running the Image. But you can still use the environment variable when building the Image. Then you have to use either <code>ARG</code> to update the <code>ENV</code> value or use a default value.</p><h2 id="in-conclusion">In conclusion<a href="#in-conclusion" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><p>In this post, I tried to explain usages of docker compose, build arguments and environment variables in as detail as possible. But its better to use them in your own project to understand these better. Also checkout the reference links given below which has more detailed explanation.</p><h2 id="relevent-posts">Relevent posts<a href="#relevent-posts" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><ul><li><a href="/docker-write-dockerfile-and-reduce-size-build-time-for-image/">Tips on Writing Dockerfile, Reduce Size and Build Time of an Image</a></li><li><a href="/docker-volume-entrypoint-ignorefile/">Tips on Using Volume, Entrypoint and .dockerignore file</a></li></ul><h2 id="references">References<a href="#references" class="hanchor" aria-label="Anchor"><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a></h2><ul><li><a href="https://vsupalov.com/docker-arg-env-variable-guide/">https://vsupalov.com/docker-arg-env-variable-guide/</a></li><li>Official Documentation on Environment Variable: <a href="https://docs.docker.com/compose/environment-variables/">https://docs.docker.com/compose/environment-variables/</a></li><li>Official Documentation Docker Compose: <a href="https://docs.docker.com/compose/">https://docs.docker.com/compose/</a></li></ul><p><strong>Last updated</strong>: Dec 31, 2020</p></div></div><hr><div class="miscellaneous"><ul class="side-share"><li class="like-comment"><span id="love-share"><svg xmlns="http://www.w3.org/2000/svg" id="love-share-sign" class="love-share-sign" width="24" height="24" viewBox="0 0 24 24" fill="#d0d0d0"><path d="M12 4.2c-3.1-5.4-12-3.8-12 2.9.0 4.7 5.6 9.4 12 15.8 6.4-6.4 12-11.1 12-15.8.0-6.8-8.9-8.3-12-2.9z"/></svg><span id="loved-count" class="loved-count">x<span id="like-count">6</span></span></span></li><li class="like-comment"><svg xmlns="http://www.w3.org/2000/svg" id="show-comment-btn" class="comment-sign" width="24" height="24" viewBox="0 0 24 24" fill="#d0d0d0"><path d="M24 10.2C24 5.1 18.6 1 12 1S0 5.1.0 10.2s5.4 9.2 12.1 9.2c-.4 2-2.8 3.3-4.5 3.7 10.1-.9 16.4-6.5 16.4-12.8z"/></svg><span id="loved-count" class="comment-count">x<span id="comment-counter">0<span></span></span></span></li><input type="checkbox" id="_show_social_share"><li class="share-button"><label id="show-hide-share" class="collapse-share" for="_show_social_share"><svg class="share-sign" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#d0d0d0"><path d="M5 7c2.761.0 5 2.239 5 5s-2.239 5-5 5-5-2.239-5-5 2.239-5 5-5zm11.122 12.065c-.073.301-.122.611-.122.935.0 2.209 1.791 4 4 4s4-1.791 4-4-1.791-4-4-4c-1.165.0-2.204.506-2.935 1.301l-5.488-2.927c-.23.636-.549 1.229-.943 1.764l5.488 2.927zm7.878-15.065c0-2.209-1.791-4-4-4s-4 1.791-4 4c0 .324.049.634.122.935l-5.488 2.927c.395.535.713 1.127.943 1.764l5.488-2.927c.731.795 1.77 1.301 2.935 1.301 2.209.0 4-1.791 4-4z"/></svg><svg fill="#d0d0d0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M5 9c1.654.0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-2c-2.762.0-5 2.239-5 5s2.238 5 5 5 5-2.239 5-5-2.238-5-5-5zm15 9c-1.165.0-2.204.506-2.935 1.301l-5.488-2.927c-.23.636-.549 1.229-.944 1.764l5.488 2.927c-.072.301-.121.611-.121.935.0 2.209 1.791 4 4 4s4-1.791 4-4-1.791-4-4-4zm0 6c-1.103.0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zm0-22c-2.209.0-4 1.791-4 4 0 .324.049.634.121.935l-5.488 2.927c.395.536.713 1.128.944 1.764l5.488-2.927c.731.795 1.77 1.301 2.935 1.301 2.209.0 4-1.791 4-4s-1.791-4-4-4zm0 6c-1.103.0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"/></svg></label></li><li class="social-share"><a target="_blank" aria-label="FB" rel="noreferrer" href="https://www.facebook.com/dialog/share?app_id=668971647169067&display=page&href=https%3a%2f%2fruddra.com%2fdocker-compose-arg-env%2f&redirect_uri=https%3a%2f%2fruddra.com%2fdocker-compose-arg-env%2f"><svg class="fb-share-sign" fill="#d0d0d0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M9 8H6v4h3v12h5V12h3.642L18 8h-4V6.333C14 5.378 14.192 5 15.115 5H18V0h-3.808C10.596.0 9 1.583 9 4.615V8z"/></svg></a></li><li class="social-share"><a aria-label="Twitter" target="_blank" rel="noreferrer" href="https://twitter.com/intent/tweet?text=Why%20Use%20Docker%20Compose%2c%20Build%20Argument%20and%20Environment%20Variable&url=https%3a%2f%2fruddra.com%2fdocker-compose-arg-env%2f"><svg class="tw-share-sign" fill="#d0d0d0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179.0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142.0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg></a></li><li class="social-share"><a aria-label="LN" target="_blank" rel="noreferrer" href="https://www.linkedin.com/shareArticle/?mini=true&url=https%3a%2f%2fruddra.com%2fdocker-compose-arg-env%2f&title=Why%20Use%20Docker%20Compose%2c%20Build%20Argument%20and%20Environment%20Variable&summary=Usage%20of%20docker%20compose%2c%20argument%20and%20environment%20variable%20in%20different%20build%20scenarios.&source="><svg xmlns="http://www.w3.org/2000/svg" class="ln-share-sign" width="24" height="24" viewBox="0 0 24 24" fill="#d0d0d0"><path d="M5 3.5C5 4.9 3.9 6 2.5 6S0 4.9.0 3.5C0 2.1 1.1 1 2.5 1S5 2.1 5 3.5zM5 8H0v16h5V8zm8 0H8v16h5v-8.4c0-4.7 6-5.1 6 0V24h5V13.9c0-7.9-8.9-7.6-11-3.7v-2.2z"/></svg></a></li></ul><div class="tags"><a class="tag-links-a" href="/tags/docker/">Docker</a> <a class="tag-links-a" href="/tags/devops/">DevOps</a></div></div><div class="newsletter-section" id="newsletter-submitted"><h2 class="newsletter-header">Get Better With Docker</h2><div id="commento-newsletter" class="commento-root commento-root-font"><div id="newsletter-error" class="commento-error-box" style="display:none">An error occurred when submitting the form, please try again.</div><div id="newsletter-submitted-box" style="display:none"><p class="newsletter-submitted-txt">Thank you for subscribing to newsletters.<br>You will start receiving emails from next iteration.</p></div><div id="newsletter-body"><div class="newsletter-txt">Subscribe to get monthly articles about Docker and more.<br>I won't spam you. Unsubscribe at any time.</div><div id="commento-main-area-newsletter" class="commento-main-area"><form id="commento-form" method="post" action="https://ruddra-comments.netlify.app/.netlify/functions/server/v2/entry/ruddra/ruddra.comments/master/comments"><input type="hidden" name="options[redirect]" value="https://ruddra.com/docker-compose-arg-env/#newsletter-submitted"> <input type="hidden" name="options[slug]" value="newsletter-subscription"> <input type="hidden" name="options[parent]" value="newsletter-subscription"> <input type="hidden" name="options[origin]" value="https://ruddra.com/newsletters/"> <input type="hidden" name="options[redirectError]" value="https://ruddra.com/docker-compose-arg-env/#newsletter-error"><div id="commento-login" class="commento-login"><label id="email-newsletter"><input aria-label="My email address is ..." type="email" name="fields[email]" placeholder="My email address is ..." class="newsletter-email-input" required></label></div><div style="width:95.8%"><button id="commento-submit-button-root-newsletter" type="submit" class="commento-button commento-submit-button">Subscribe</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id="commento-checkbox-root" name="options[subscribe]" type="checkbox" value="email" required><label for="commento-checkbox-root">I agree to receive emails</label></div></div></form></div></div></div></div><div class="pagination"><div class="pagination-item older"><span class="pagination-arrow">&#8592; Previous</span><div class="pagination-link"><a href="https://ruddra.com/docker-write-dockerfile-and-reduce-size-build-time-for-image/">How to Write Dockerfile to Reduce Size and Build Time …</a></div><div class="pagination-image"><img class="lozad" data-src="/content/images/2019/11/dock_hu3d03a01dcc18bc5be0e67db3d8d209a6_4349541_350x0_resize_q100_box.jpg" alt="How to Write Dockerfile to Reduce Size and Build Time of Docker Images"><noscript><img src="/content/images/2019/11/dock_hu3d03a01dcc18bc5be0e67db3d8d209a6_4349541_350x0_resize_q100_box.jpg" alt="How to Write Dockerfile to Reduce Size and Build Time of Docker Images"></noscript></div><p class="pagination-text">For the past couple of years, I have been creating Dockerfile for different projects. based on those …</p></div><div class="pagination-item newer"><span class="pagination-arrow">Next &#8594;</span><div class="pagination-link"><a href="https://ruddra.com/docker-volume-entrypoint-ignorefile/">How to Use Volume, EntryPoint and Ignore Files in …</a></div><div class="pagination-image"><img class="lozad" data-src="/content/images/2019/11/dock3_hu7a2cd6d4388c240ef5f124cca44aa2a6_2158891_350x0_resize_q100_box.jpg" alt="How to Use Volume, EntryPoint and Ignore Files in Docker"><noscript><img src="/content/images/2019/11/dock3_hu7a2cd6d4388c240ef5f124cca44aa2a6_2158891_350x0_resize_q100_box.jpg" alt="How to Use Volume, EntryPoint and Ignore Files in Docker"></noscript></div><p class="pagination-text">Have you worked with Docker before? Do you think you have trouble with it, like when you are …</p></div></div><div class="tiny" id="comment-submitted"><div id="commento" class="commento-root commento-root-font"><div id="comment-submitted-box" style="display:none">Thank you for your comment. It will be published shortly.</div><div id="comment-error" style="display:none">An error occurred when submitting the form, please try again.</div><div id="commento-main-area" class="commento-main-area"><div class="commento-name" id="comment-headline"><b>Share Your Thoughts</b></div><form id="comment-form" method="post" name="comment-form"><input type="hidden" name="options[redirect]" value="https://ruddra.com/docker-compose-arg-env/#comment-submitted"> <input type="hidden" name="options[slug]" value="docker-compose-arg-env"> <input type="hidden" name="options[parent]" value="docker-compose-arg-env"> <input type="hidden" name="options[origin]" value="https://ruddra.com/docker-compose-arg-env/"> <input type="hidden" id="comment-parent" name="fields[reply_to]"> <input type="hidden" name="options[redirectError]" value="https://ruddra.com/docker-compose-arg-env/#comment-error"> <textarea name="fields[comment]" id="commento-textarea-root" placeholder="Add a comment" required aria-label="Add a comment"></textarea> <button id="commento-submit-button-root" type="submit" class="commento-button commento-submit-button submit-github">Comment With Github</button><div class="commento-round-check commento-anonymous-checkbox-container"><input id="commento-anonymous-checkbox-root" name="options[subscribe]" type="checkbox" value="email"><label for="commento-anonymous-checkbox-root">Notify me of new comments</label></div><a onclick="toggleMarkDownTable()" id="commento-markdown-button-root" class="commento-markdown-button"><b>M↓</b> <span class="commento-markdown">Markdown</span></a><table id="commento-markdown-help-root" class="commento-markdown-help" style="display:none"><tr><td><i>italics</i></td><td>surround text with<code>*asterisks*</code></td></tr><tr><td><b>bold</b></td><td>surround text with<code>**two asterisks**</code></td></tr><tr><td><a href="https://example.com">hyperlink</a></td><td><code>[hyperlink](https://example.com)</code> or just a bare URL</td></tr><tr><td><code>code</code></td><td>surround text with <code>`backticks`</code></td></tr><tr><td><code>code block</code></td><td>surround text with <code>```console.log()```</code></td></tr><tr><td><strike>strikethrough</strike></td><td>surround text with <code>~~two tilde characters~~</code></td></tr><tr><td><blockquote>quote</blockquote></td><td>prefix with <code>></code></td></tr><tr><td>Emoji 😱</td><td><b>:smile:</b>😄 <b>:angry:</b>😠 <b>:disappointed:</b>😞(<a href="https://www.webfx.com/tools/emoji-cheat-sheet/">cheat sheet</a>)</td></tr></table></form></div></div></div></div><div id="copyright"><p>&copy; 2020 Arnab Kumar Shil &#183; <a href="/privacy/">Privacy</a><br><a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> &#183; Made with <a href="https://gohugo.io">Hugo</a></p></div><div class="alert"><span class="closebtn" onclick='this.parentElement.style.display="none"'>&#215;</span> New contents are available at this website. <span class="clsbtnreload" onclick="window.location.reload()">Click here to refresh</span> the page.</div><script src="/js/bundle1.min.51f461d0706ce9f280d9b664aad561209188edc375a22034b7974d8a9c793cf2.js" defer="defer"></script><script>if("serviceWorker"in navigator){navigator.serviceWorker.register('/sw.js').then(reg=>{reg.installing;reg.waiting;reg.active;reg.addEventListener('updatefound',function(){reg.installing;});});var refreshing;navigator.serviceWorker.addEventListener('controllerchange',function(){if(refreshing)return;refreshing=true;var alert=document.getElementByClassName('alert');setAttribute('class','show');});};</script></body></html>